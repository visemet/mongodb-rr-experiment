/* eslint no-undef: 0 */
/* eslint strict: 0 */
/* eslint no-implicit-globals: 0 */

// List of all error messages received from commands.
let successfulCommandCount = 0;
let failedCommandCount = 0;
let skippedCommandCount = 0;
let rollbackTest;
// Declare the functions up front to work around the eslint no-use-before-define rule.
let applyOpsWrapper;
let cmdWrapper;
let mongodVersion;

// Variable to determine if we're running fuzzer commands.
let runningFuzzerCommands = false;

// Override `runCommand` so we can blacklist known issues and do some book-keeping.
(() => {
    const runCommandOriginal = Mongo.prototype.runCommand;

    Mongo.prototype.runCommand = function(dbName, commandObj, options) {
        if (!runningFuzzerCommands) {
            // Don't do any overrides unless we're issuing fuzzer commands. Other parts of the
            // code could legitimately be calling commands that have been modified.
            return runCommandOriginal.apply(this, arguments);
        }

        const commandName = Object.keys(commandObj)[0];
        let res;

        // We do not test capped collections on storage engines that use rollbackViaRefetch, since
        // they can hit SERVER-37172.
        const isV42OrNewer = (mongodVersion[0] > 4 ||
            (mongodVersion[0] === 4 && mongodVersion[1] > 0));
        const skipCappedCollections = TestData.storageEngine === 'mmapv1'
            || (TestData.storageEngine === 'inMemory' && !isV42OrNewer)
            || TestData.storageEngine === 'ephemeralForTest'
            || TestData.enableMajorityReadConcern === false;

        const commandCreatesCappedCollection =
            commandName === 'create' && commandObj.capped || commandName === 'convertToCapped';

        // SERVER-16049: We force capped collections to be created with size=4GB to prevent
        // truncation from occuring.
        if (commandCreatesCappedCollection && !skipCappedCollections) {
            commandObj.size = 4 * 1024 * 1024 * 1024; // 4GB
            print('Forcing capped collection size to 4GB to prevent truncation.');
        }

        // If we are skipping capped collections, change capped collection creation to non-capped.
        if (commandName === 'create' && commandObj.capped && skipCappedCollections) {
            commandObj.capped = false;
            print('Forcing create command to create non-capped collection on this storage engine.');
        }

        // If we are skipping capped collection, skip 'convertToCapped' commands.
        if (commandName === 'convertToCapped' && skipCappedCollections) {
            skippedCommandCount++;
            print('Skipping convertToCapped command on this storage engine.');
            return {ok: 1};
        }

        // SERVER-32727: For capped collections prevent the creation of unique indexes.
        if (commandName === 'createIndexes') {
            let collStatsCalled = false;
            for (let indexSpec of commandObj.indexes) {
                if (indexSpec.unique) {
                    if (!collStatsCalled) {
                        // collStats may fail if the collection does not exist yet.
                        res = runCommandOriginal.call(
                            this, dbName, {collstats: commandObj.createIndexes}, options);
                        collStatsCalled = true;
                    }
                    // If the collStats above fails, we skip disabling unique indexes.
                    if (res.ok && res.capped) {
                        indexSpec.unique = false;
                        print('SERVER-32727: setting the "unique" field to false');
                    }
                }
            }
        }

        res = runCommandOriginal.apply(this, arguments);

        if (res.ok) {
            successfulCommandCount++;
        } else {
            failedCommandCount++;
        }
        return res;
    };
})();

// Keep a record of all the applyOps commands and print them out at the end. If a repro is needed,
// copy and paste the list of applyOps commands from the original failed run.
const applyOpsDict = {};
/**
 * This function is called in place of a regular applyOps command.
 * One or more oplog entries is selected, massaged to remove unnecessary fields, and re-applied
 * through applyOps.
 */
applyOpsWrapper = function(commandIndex) {
    const localDb = rollbackTest.getPrimary().getDB('local');
    // Randomly pick between 1 and 3 operations to include. We use commandIndex here so numOps
    // is fixed each time.
    const numOps = commandIndex % 2 + 1;

    // Skip the 5 latest entries so we don't always apply the same entries that we just saw.
    // Ignore noop oplog entries as well.
    const oplogEntries = localDb.oplog.rs.find({op: {$ne: 'n'}})
                             .sort({$natural: -1})
                             .skip(5)
                             .limit(numOps)
                             .toArray();

    cmdWrapper('admin',
               (() => {
                   let applyOpsCmd;
                   if (applyOpsDict[commandIndex]) {
                       applyOpsCmd = {applyOps: applyOpsDict[commandIndex]};
                   } else {
                       applyOpsDict[commandIndex] = oplogEntries;
                       applyOpsCmd = {applyOps: oplogEntries};
                   }
                   return applyOpsCmd;
               })(),
               commandIndex);
};

cmdWrapper = function(action, cmdObj, commandIndex) {
    const isV40orNewer = (mongodVersion[0] > 3 || (mongodVersion[0] === 3 && mongodVersion[1] > 6));
    if (action === '$fixtureCmd') {
        if (cmdObj.fixtureCmd === 'restartNode' && isV40orNewer) {
            rollbackTest.restartNode(parseInt(cmdObj.nodeId, 10), parseInt(cmdObj.signal, 10));
        }
    } else if (action === 'applyOps') {
        applyOpsWrapper(commandIndex);
    } else if (action === 'runTransaction') {
        if (!isV40orNewer) {
            return;
        }

        let msg = '';
        const sessionOptions = {causalConsistency: false};
        const session = rollbackTest.getPrimary().startSession(sessionOptions);
        session.startTransaction();
        try {
            cmdObj.ops.forEach(function(op) {
                assert.commandWorked(session.getDatabase(cmdObj.db).runCommand(op));
            });
            // Once the ops succeed, the transaction should be able to commit.
            // Otherwise the shell will throw an error when we abort the transaction
            // in the catch block.
            session.commitTransaction();
            msg = 'Committed.';
        } catch (ex) {
            session.abortTransaction();
            msg = 'Aborted. ' + tojson(ex);
        }
        msg = `Completed transaction of cmd ${commandIndex}. ` + msg;
        print(msg);
        session.endSession();
    } else {
        // We pass the dbName as the first argument if no special handling is needed.
        const dbName = action;
        const conn = rollbackTest.getPrimary();
        const myDb = conn.getDB(dbName);
        const res = myDb.runCommand(cmdObj);

        let status = 'FAIL';
        if (res.ok) {
            // The "ok" field won't accurately track whether or not a write via the "insert",
            // "update", or "delete" commands actually happened since those would be reported in
            // writeErrors or writeConcernError. But we should never modify the database when ok=0.
            status = 'PASS';
        }
        let msg =
            `Completed cmd ${commandIndex}. STATUS: ${status}, PRIMARY: ${conn.host}, DB: ${dbName}, COMMAND: ${tojsononeline(cmdObj)}`;
        if (!res.ok) {
            msg += `\nCmd ${commandIndex} Error: ${tojsononeline(res)}`;
        }
        print(msg);
    }
};

// Initialize the fixtures.
(() => {
    if (TestData.useRollbackTestDeluxe) {
        load('jstests/replsets/libs/rollback_test_deluxe.js');
        rollbackTest = new RollbackTestDeluxe('FiveNodeRollbackFuzzerTest');
    } else {
        load('jstests/replsets/libs/rollback_test.js');
        rollbackTest = new RollbackTest('RollbackFuzzerTest');
    }

    mongodVersion = (function() {
        const res = rollbackTest.getPrimary().getDB('test').serverBuildInfo();
        assert.commandWorked(res);

        return res.versionArray;
    })();
})();

runningFuzzerCommands = true;

/* eslint-disable */
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"_id": -1, "e": "text", }, "name": "129760249744457", "background": false, "unique": false, "collation": 956, },{"key": {"date_a.num_b.int_d": 1, "ts_b.1": -1, "date_b.10": 1, }, "name": "ix_eeeee", "background": true, "sparse": true, },], }, 0);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1);
cmdWrapper("db_0", {"create": "three", "capped": false, "validationLevel": "moderate", }, 2);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 3);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 4);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"a": {$ne: 100}, }, }, 5);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "190358903524690", b: [[{"num_a": 1, }, {"num_e": -3.14159265000, }, ], ], c: [{"str_d": "any thing", }, {"str_f": "A0B", }, {"str_a": " a ", }, ]}], "ordered": false, }, 6);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 199607, "max": 8259, "validationLevel": "off", "validationAction": "error", }, 7);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"f": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 8);
cmdWrapper("db_0", {"drop": "two", }, 9);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "303205032560877", d: [], e: {d: {b: [{"bin_f": BinData(0x04,'aGVsbG8='), }, {"bin_c": BinData(0x00,'aGVsbG8='), }, {"bin_f": BinData(0x04,'aGVsbG8='), }, ]}}}], "ordered": true, }, 10);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [], }, 11);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "ix_ffffff", }, 12);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "114260032071149", d: "", b: [{"num_a": 314.15, }, [], BinData(0x80,'aGVsbG8='), ]}], "ordered": false, }, 13);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 14);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "*", }, 15);
cmdWrapper("db_0", {"create": "three", "capped": true, "max": 52000, "flags": 3, }, 16);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 17);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "026851379496100", a: " a ", a: " a "}], "ordered": false, }, 18);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 19);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_ccc", }, 20);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.three", }, 21);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 76, }, 22);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.three", "dropTarget": true, }, 23);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 24);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 25);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 82, }, 26);
cmdWrapper("db_1", {"collMod": "three", "validator": {"f": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 27);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.one", }, 28);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "041642436051421", e: {d: {c: "abc6ef"}}, c: {d: {a: "abc6ef"}}}], "ordered": false, }, 29);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "7", c: {c: [{"str_e": "caseLESS", }, ]}, e: [[314159265000, ], ]}], "ordered": true, }, {"insert": "two", "documents": [{"_id": "8", e: 1, b: [{"num_e": 4.940656484124654e-324, }, {"num_d": -Infinity, }, ]}], "ordered": false, }, {"update": "one", "updates": [{"q": {"_id": "5", }, "u": {c: [{"bin_a": BinData(0x80,'aGVsbG8='), }, {"bin_e": BinData(0x03,'aGVsbG8='), }, ], a: [BinData(0x00,'aGVsbG8='), [BinData(0x01,'aGVsbG8='), BinData(0x03,'aGVsbG8='), ], ]}, }], }, ], }, 30);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 31);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "189011368313413", b: "thing", a: "an y thing"}], "ordered": false, }, 32);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [], }, 33);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 34);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "two", "documents": [{"_id": "3", c: {c: {b: [0.0, [{"bin_e": BinData(0x05,'aGVsbG8='), }, ], ]}}, f: {b: "caselesS"}}], "ordered": true, }, ], }, 35);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 36);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"b": {$ne: 100}, }, "validationLevel": "off", }, 37);
cmdWrapper("db_0", {"create": "one", "capped": false, "size": 953, "validationAction": "warn", }, 38);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 81, }, 39);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 40);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": -1, "_id": 1, }, "name": "528792258790987", "background": true, "unique": true, "sparse": true, "expireAfterSeconds": {"locale": "es", "strength": 3, }, },], }, 41);
cmdWrapper("db_0", {"drop": "two", }, 42);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_eeeee", }, 43);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"date_d.lon_b.ts_c": 1, }, "name": "ix_a", "unique": true, },{"key": {"date_f.dec_e": 1, }, "name": "903205801663557", "sparse": true, "expireAfterSeconds": {"locale": "af", "strength": 1, }, },], }, 44);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 45);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "three", "updates": [{"q": {"_id": "7", }, "u": {d: {"num_d": +0, }, c: "caseLESS"}, }], }, {"insert": "one", "documents": [{"_id": "2", e: "bcxyz", a: []}], "ordered": true, }, {"update": "two", "updates": [{"q": {"_id": "7", }, "u": {a: "", d: "abc6ef"}, }], }, ], }, 46);
cmdWrapper("db_1", {"create": "one", "size": 36, "max": 1955, "validationAction": "error", }, 47);
cmdWrapper("db_1", {"collMod": "two", "validationAction": "error", }, 48);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 49);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 50);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "moderate", "validationAction": "warn", }, 51);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 18, }, 52);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 53);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "450236654214702", f: {a: ["axxxxxxxyz", BinData(0x01,'aGVsbG8='), ]}, a: ""}], "ordered": false, }, 54);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "831047349602373", a: [{"num_a": 0.0, }, [], ], c: ""}], "ordered": false, }, 55);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 56);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 57);
cmdWrapper("db_1", {"create": "three", "max": 41, "validationLevel": "moderate", "validationAction": "error", }, 58);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "864179212475496", f: [[NaN, 0, ], "caseLESS", BinData(0x03,'aGVsbG8='), ], d: {"bin_b": BinData(0x02,'aGVsbG8='), }}], "ordered": true, }, 59);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 76, }, 60);
cmdWrapper("db_1", {"collMod": "one", "validationLevel": "moderate", }, 61);
cmdWrapper("db_1", {"drop": "one", }, 62);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 1664, }, 63);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 211, }, 64);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.three", }, 65);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"_id": 1, "f": -1, }, "name": "ix_dddd", "background": false, "sparse": false, "collation": {"locale": "am", "strength": 4, }, },], }, 66);
cmdWrapper("db_0", {"collMod": "three", "validator": {"e": {$ne: 100}, }, }, 67);

cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "strict", "validationAction": "warn", }, 68);
cmdWrapper("db_0", {"create": "two", "capped": false, "size": 69, "max": 9182, "flags": 3, }, 69);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 70);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, {"delete": "three", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, ], }, 71);
cmdWrapper("db_0", {"create": "one", "capped": false, "max": 569, "validationAction": "error", "flags": 3, }, 72);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "4", }, "u": {a: [[BinData(0x03,'aGVsbG8='), ], [], ], e: {c: [[{"str_c": "an y thing", }, {"str_c": "abc6ef", }, ], BinData(0x80,'aGVsbG8='), ]}}, }], }, {"insert": "one", "documents": [{"_id": "1", c: ["thing", ], f: [{"num_b": -3.14159265000, }, {"num_d": 31.415, }, {"num_f": 4.940656484124654e-324, }, ]}], "ordered": false, }, {"update": "two", "updates": [{"q": {"_id": "3", }, "u": {c: "abc\def", d: {"str_b": "thing", }}, }], }, ], }, 73);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "*", }, 74);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "464029342259755", f: ["thing", "bcxyz", ], a: [[{"bin_c": BinData(0x04,'aGVsbG8='), }, {"bin_c": BinData(0x02,'aGVsbG8='), }, {"bin_f": BinData(0x00,'aGVsbG8='), }, ], ]}], "ordered": true, }, 75);
cmdWrapper("db_0", {"drop": "one", }, 76);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "two", "documents": [{"_id": "7", b: "thing", d: {f: {d: "thing"}}}], "ordered": true, }, {"update": "three", "updates": [{"q": {"_id": "0", }, "u": {a: "abc\def", d: {c: {d: "an y thing"}}}, }], }, {"insert": "three", "documents": [{"_id": "6", e: [BinData(0x00,'aGVsbG8='), ], a: {"str_b": "thing", }}], "ordered": false, }, ], }, 77);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 44, }, 78);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.three", }, 79);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "three", "documents": [{"_id": "0", f: "A0B", c: {e: {e: {b: "  "}}}}], "ordered": true, }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "5", b: "x7F", b: "an y thing"}], "ordered": true, }, ], }, 80);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.two", }, 81);
cmdWrapper("db_0", {"collMod": "two", "validationLevel": "strict", "validationAction": "warn", }, 82);
cmdWrapper("db_1", {"drop": "one", }, 83);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "339775727688816", b: "  ", e: "  "}], "ordered": true, }, 84);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": true, "size": 436, "validator": {"c": {$ne: 100}, }, "validationAction": "error", "flags": 3, }, 85);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "882132663727894", f: [[{"str_f": "A0B", }, {"str_b": " ", }, ], [{"bin_c": BinData(0x00,'aGVsbG8='), }, ], ], a: []}], "ordered": false, }, 86);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"f": "hashed", }, "name": "707949416235224", "background": false, "unique": false, "sparse": true, "expireAfterSeconds": 8065, },{"key": {"rgx_e.int_f": 1, }, "name": "ix_ffffff", "sparse": false, },], }, 87);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "ix_dddd", }, 88);
cmdWrapper("db_0", {"create": "three", "capped": false, "max": 4477, "validator": {"f": {$ne: 100}, }, }, 89);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"ts_c.nul_c": -1, }, "name": "ix_ccc", "background": false, },{"key": {"num_e.dec_c.dec_d": 1, }, "name": "ix_dddd", "background": false, "unique": false, "sparse": true, "collation": 508808523, },{"key": {"c": 1, }, "name": "825571463805863", "unique": true, },{"key": {"d": "text", "c": 1, }, "name": "802564993236337", "background": false, "unique": true, "expireAfterSeconds": {"locale": "af", "strength": 4, }, },], }, 90);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "194183105451453", c: "", f: [{"bin_c": BinData(0x00,'aGVsbG8='), }, {"bin_d": BinData(0x01,'aGVsbG8='), }, {"bin_a": BinData(0x02,'aGVsbG8='), }, ]}], "ordered": true, }, 91);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "181569938651100", c: "abc6ef", e: [{"num_a": Infinity, }, 31.415, ]}], "ordered": true, }, 92);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.one", }, 93);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.one", }, 94);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 3475, }, 95);
cmdWrapper("db_1", {"collMod": "three", "validator": {"c": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 96);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [], }, 97);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"a": -1, "c": 1, }, "name": "470862299067423", "unique": true, "expireAfterSeconds": 93, },{"key": {"e": "hashed", "_id": -1, }, "name": "ix_dddd", "background": false, "unique": false, "sparse": false, "collation": 221244, },], }, 98);
cmdWrapper("db_0", {"create": "one", "capped": false, "size": 82, "validator": {"f": {$ne: 100}, }, "validationLevel": "off", }, 99);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 100);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "6", }, "limit": 1, }], }, {"update": "three", "updates": [{"q": {"_id": "9", }, "u": {c: [{"bin_e": BinData(0x01,'aGVsbG8='), }, {"str_d": "", }, NaN, ], a: "thing"}, }], }, {"delete": "two", "deletes": [{"q": {"_id": "0", }, "limit": 1, }], }, ], }, 101);
cmdWrapper("db_0", {"drop": "two", }, 102);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "672739869020940", e: [[BinData(0x02,'aGVsbG8='), BinData(0x80,'aGVsbG8='), BinData(0x03,'aGVsbG8='), ], [31.415, ], [{"num_d": 0, }, ], ], c: [{"num_b": -3.14159265000, }, ]}], "ordered": true, }, 103);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 104);
cmdWrapper("db_0", {"drop": "two", }, 105);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"f": "hashed", }, "name": "ix_bb", "unique": false, "sparse": false, },{"key": {"dec_b": -1, "lon_a.ts_c.$": 1, "rgx_a.10": 1, }, "name": "532749679742631", "background": false, },{"key": {"_id": -1, }, "name": "852013856787926", "background": false, "unique": false, "sparse": true, "expireAfterSeconds": 25, },], }, 106);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 814, }, 107);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_eeeee", }, 108);
cmdWrapper("db_0", {"drop": "one", }, 109);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "355680560425989", f: [{"str_e": "", }, ], b: -1.0}], "ordered": true, }, 110);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"int_f.$.rgx_c": 1, "date_d.udf_e": 1, "2": -1, }, "name": "ix_dddd", "background": false, "unique": false, },], }, 111);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 112);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "297254806493008", a: [["x1B", " a ", "abc\def", ], [], ], f: "CASELESS"}], "ordered": false, }, 113);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "three", "updates": [{"q": {"_id": "9", }, "u": {c: {f: {c: []}}, b: [{"bin_c": BinData(0x80,'aGVsbG8='), }, {"bin_b": BinData(0x00,'aGVsbG8='), }, ]}, }], }, {"delete": "two", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, {"update": "two", "updates": [{"q": {"_id": "4", }, "u": {f: [{"num_b": +0, }, {"num_f": 1, }, ], f: {"bin_a": BinData(0x00,'aGVsbG8='), }}, }], }, ], }, 114);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.one", "dropTarget": true, }, 115);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": true, "validator": {"f": {$ne: 100}, }, }, 116);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"f": "hashed", }, "name": "ix_dddd", "background": false, "unique": true, "sparse": false, },{"key": {"_id": "hashed", "_id": 1, }, "name": "ix_a", "background": true, "unique": false, "expireAfterSeconds": {"locale": "es", "strength": 2, }, },{"key": {"dec_b.$.bin_b": 1, }, "name": "904886933761003", "unique": true, "sparse": false, },], }, 117);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "263287977292625", a: [BinData(0x03,'aGVsbG8='), ], f: "thing"}], "ordered": false, }, 118);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "690090785772189", a: [], e: {e: {a: {a: "￿f"}}}}], "ordered": true, }, 119);
cmdWrapper("db_0", {"drop": "three", }, 120);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 121);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 122);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "103133705305740", d: "axxxxxxxyz", f: [{"str_f": "x1B", }, ]}], "ordered": false, }, 123);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 70, }, 124);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"udf_e.dec_e": -1, }, "name": "812515729742383", },{"key": {"b": "text", }, "name": "234395377687425", "expireAfterSeconds": 60, },{"key": {"nul_e.num_a.nul_d": 1, "num_e": 1, "int_d.rgx_e.date_c": 1, }, "name": "824399417297619", "background": true, },], }, 125);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 126);
cmdWrapper("db_0", {"create": "three", "size": 92, "max": 58, "validationLevel": "moderate", "flags": 3, }, 127);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "5", }, "u": {e: ["abc\def", [], ], f: "x1B"}, }], }, ], }, 128);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "632512885133192", c: [BinData(0x05,'aGVsbG8='), BinData(0x04,'aGVsbG8='), BinData(0x02,'aGVsbG8='), ], c: "caseLESS"}], "ordered": true, }, 129);
cmdWrapper("db_1", {"drop": "one", }, 130);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "ix_ccc", }, 131);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_eeeee", }, 132);
cmdWrapper("db_1", {"drop": "three", }, 133);
cmdWrapper("db_1", {"collMod": "two", "validationAction": "error", }, 134);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 135);
cmdWrapper("db_0", {"create": "two", "capped": true, "max": 67, "validator": {"b": {$ne: 100}, }, "flags": 3, }, 136);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 833, }, 137);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("db_0", {"convertToCapped": "two", "size": 12, }, 138);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"d": -1, "f": "text", }, "name": "148104953607216", "background": false, "sparse": true, "collation": 4235, },], }, 139);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 140);
cmdWrapper("db_0", {"collMod": "one", "validationLevel": "off", }, 141);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 142);
cmdWrapper("db_1", {"drop": "two", }, 143);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_0.two", }, 144);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "250118501391047", a: {a: ["  ", "abc6ef", ]}, b: [{"str_d": "caselesS", }, {"str_c": "axyz", }, ]}], "ordered": true, }, 145);
cmdWrapper("db_1", {"create": "two", "capped": false, "validator": {"c": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 146);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"f": -1, }, "name": "ix_eeeee", "background": false, "sparse": false, "expireAfterSeconds": {"locale": "am", "strength": 5, }, },], }, 147);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 148);
cmdWrapper("db_0", {"create": "three", "size": 98, "max": 725, "validator": {"c": {$ne: 100}, }, "validationLevel": "moderate", "flags": 3, }, 149);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 57, }, 150);
cmdWrapper("db_0", {"create": "two", "capped": false, "max": 29, "validator": {"f": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", }, 151);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"int_d.dec_d": 1, }, "name": "337998615382367", "background": false, "unique": false, "expireAfterSeconds": 711, },{"key": {"rgx_e.bool_a": 1, }, "name": "519245301293390", "background": true, },], }, 152);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 153);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 230, }, 154);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "*", }, 155);
cmdWrapper("db_0", {"collMod": "two", }, 156);
cmdWrapper("db_1", {"collMod": "two", }, 157);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 766, }, 158);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 47, }, 159);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": 1, }, "name": "ix_ffffff", "sparse": true, "collation": 9372, },{"key": {"e": "text", }, "name": "483333973669517", "sparse": false, },], }, 160);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_eeeee", }, 161);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 162);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_ccc", }, 163);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"a": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 164);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"_id": "hashed", "_id": "hashed", }, "name": "ix_dddd", "expireAfterSeconds": 694, },{"key": {"_id": "text", "_id": 1, }, "name": "807098165270428", "unique": false, "sparse": false, "expireAfterSeconds": {"locale": "yo", "strength": 4, }, },{"key": {"ts_d.2": 1, }, "name": "ix_bb", "sparse": false, "expireAfterSeconds": 95, },], }, 165);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 641258, }, 166);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 47, }, 167);
cmdWrapper("db_0", {"drop": "one", }, 168);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 2383, }, 169);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 170);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 171);
cmdWrapper("db_1", {"create": "three", "validationLevel": "off", }, 172);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 8806, }, 173);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 25, }, 174);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "830872490359868", e: "", e: 0.0}], "ordered": false, }, 175);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "max": 276, "validationLevel": "strict", "validationAction": "warn", "flags": 3, }, 176);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 177);
cmdWrapper("db_1", {"create": "two", "validator": {"d": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "warn", "flags": 3, }, 178);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"f": {$ne: 100}, }, "validationAction": "error", }, 179);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.one", "dropTarget": false, }, 180);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 181);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 182);
cmdWrapper("db_0", {"drop": "two", }, 183);
cmdWrapper("db_0", {"create": "one", "capped": true, "max": 7348, "validator": {"e": {$ne: 100}, }, "validationAction": "error", }, 184);
cmdWrapper("db_0", {"create": "three", "size": 57, "validationAction": "warn", "flags": 3, }, 185);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 30, }, 186);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.two", "dropTarget": true, }, 187);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 188);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 189);
cmdWrapper("db_0", {"create": "three", "capped": true, "validator": {"a": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "error", }, 190);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 191);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 192);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 188, }, 193);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": -1, "_id": -1, }, "name": "ix_ffffff", "background": true, },{"key": {"lon_c": 1, }, "name": "863544838416403", "background": true, "unique": true, },{"key": {"_id": -1, "_id": "hashed", }, "name": "ix_ffffff", "unique": false, "collation": {"locale": "sq", "strength": 2, }, },], }, 194);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "489109471770456", b: ["anything", ], a: "axxxxxxxyz"}], "ordered": false, }, 195);
cmdWrapper("db_1", {"collMod": "one", "validator": {"b": {$ne: 100}, }, }, 196);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "782056110809776", f: [{"str_f": "", }, " a ", ], c: -1.0}], "ordered": false, }, 197);
cmdWrapper("db_0", {"collMod": "one", }, 198);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 11, }, 199);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 200);
cmdWrapper("db_0", {"collMod": "one", "validator": {"d": {$ne: 100}, }, "validationLevel": "moderate", }, 201);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.three", }, 202);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 203);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 204);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 205);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 8114, }, 206);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 207);
cmdWrapper("db_0", {"drop": "three", }, 208);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"c": "hashed", "_id": "text", }, "name": "ix_bb", "background": true, "unique": false, },], }, 209);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.three", "dropTarget": false, }, 210);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 211);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.two", }, 212);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 213);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"date_e.10.int_b": "hashed", }, "name": "359580694177166", "unique": true, "sparse": false, "collation": 6881, },{"key": {"c": 1, }, "name": "ix_ccc", "unique": false, "sparse": true, },], }, 214);
cmdWrapper("db_1", {"collMod": "two", "validator": {"e": {$ne: 100}, }, }, 215);
cmdWrapper("db_0", {"drop": "three", }, 216);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 217);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "834185948096364", f: [BinData(0x04,'aGVsbG8='), BinData(0x01,'aGVsbG8='), BinData(0x04,'aGVsbG8='), ], c: [{"str_b": "anything", }, ]}], "ordered": false, }, 218);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "one", "updates": [{"q": {"_id": "2", }, "u": {c: {c: {e: {b: [[-1.0, -1.0, ], [0.0, -0, ], ]}}}, d: "any thing"}, }], }, ], }, 219);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"a": "hashed", "b": -1, }, "name": "376638720179675", "sparse": true, },{"key": {"_id": "text", }, "name": "ix_bb", "expireAfterSeconds": {"locale": "yo", "strength": 1, }, },], }, 220);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_dddd", }, 221);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "max": 63, "validator": {"c": {$ne: 100}, }, "validationLevel": "moderate", }, 222);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "2", }, "u": {b: ["caselesS", ], c: [["thing", " a ", "axxxxxxxyz", ], ]}, }], }, ], }, 223);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.two", "dropTarget": true, }, 224);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_eeeee", }, 225);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_1", {"create": "one", "validationAction": "warn", "flags": 3, }, 226);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_1", {"collMod": "two", "validator": {"f": {$ne: 100}, }, }, 227);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "111971929234085", d: [[{"str_f": "bcxyz", }, {"str_c": "  ", }, ], BinData(0x03,'aGVsbG8='), [{"str_d": "abc6ef", }, {"str_c": "abc\def", }, {"str_d": "axyz", }, ], ], d: "axxxxxxxyz"}], "ordered": true, }, 228);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "moderate", }, 229);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "542767642445599", f: "", f: {c: {e: "￿f"}}}], "ordered": false, }, 230);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 22, }, 231);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 232);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 233);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 234);
cmdWrapper("db_1", {"collMod": "three", "validator": {"c": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "error", }, 235);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 1405, }, 236);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"b": "text", }, "name": "710546234157571", "unique": false, "sparse": false, "expireAfterSeconds": {"locale": "yo", "strength": 4, }, },{"key": {"ts_f.ts_e.$": "hashed", }, "name": "ix_ccc", "background": true, "collation": 864276, },], }, 237);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 63, }, 238);
cmdWrapper("db_0", {"create": "two", "size": 21, "max": 22, "validationLevel": "moderate", }, 239);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.two", }, 240);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 241);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 91716, }, 242);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "818146028149532", d: "", e: [{"str_e": "abc6ef", }, {"str_d": "A0B", }, {"str_e": "caselesS", }, ]}], "ordered": false, }, 243);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 244);
cmdWrapper("db_0", {"create": "two", "capped": true, "max": 73, "validationLevel": "strict", }, 245);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 38, }, 246);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"lon_b.int_b.3": 1, }, "name": "ix_ccc", "background": false, "unique": false, "sparse": false, },{"key": {"d": 1, "_id": 1, }, "name": "646593699718660", },{"key": {"lon_d.num_f.dec_c": -1, }, "name": "428452970387358", "unique": false, "sparse": false, },], }, 247);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 4152, }, 248);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [], }, 249);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 991, }, 250);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 251);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "three", "updates": [{"q": {"_id": "5", }, "u": {c: [-3.14159265000, [BinData(0x04,'aGVsbG8='), BinData(0x05,'aGVsbG8='), BinData(0x00,'aGVsbG8='), ], {"str_c": "bcxyz", }, ], b: [[{"str_b": "axyz", }, ], ]}, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "2", }, "limit": 1, }], }, ], }, 252);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 51, }, 253);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_eeeee", }, 254);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": "text", "c": "text", }, "name": "115194749299920", "background": true, "sparse": true, "expireAfterSeconds": {"locale": "hu", "strength": 2, }, },], }, 255);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 256);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 1270, }, 257);
cmdWrapper("db_0", {"drop": "two", }, 258);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_dddd", }, 259);
cmdWrapper("db_1", {"create": "three", "capped": true, "validationAction": "error", }, 260);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "one", "documents": [{"_id": "9", d: [["abc6ef", "caselesS", "axyz", ], [0.0, 10, ], ], e: " "}], "ordered": true, }, {"insert": "two", "documents": [{"_id": "9", e: [], c: [BinData(0x02,'aGVsbG8='), BinData(0x01,'aGVsbG8='), BinData(0x02,'aGVsbG8='), ]}], "ordered": false, }, {"update": "three", "updates": [{"q": {"_id": "0", }, "u": {d: [{"bin_c": BinData(0x05,'aGVsbG8='), }, [{"bin_f": BinData(0x04,'aGVsbG8='), }, ], [{"bin_a": BinData(0x01,'aGVsbG8='), }, {"bin_f": BinData(0x00,'aGVsbG8='), }, {"bin_e": BinData(0x05,'aGVsbG8='), }, ], ], b: {a: "abc6ef"}}, }], }, ], }, 261);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 1618, }, 262);
cmdWrapper("db_0", {"collMod": "one", "validationAction": "error", }, 263);
cmdWrapper("db_1", {"collMod": "three", "validator": {"a": {$ne: 100}, }, "validationAction": "warn", }, 264);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 265);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 889038, }, 266);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 267);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 268);
cmdWrapper("db_0", {"create": "three", "max": 776, "validator": {"f": {$ne: 100}, }, "validationAction": "error", "flags": 3, }, 269);
cmdWrapper("db_0", {"create": "one", "size": 8728, "max": 65, "validationAction": "warn", "flags": 3, }, 270);
cmdWrapper("db_1", {"create": "two", "size": 758, "validationLevel": "off", "validationAction": "warn", }, 271);
cmdWrapper("db_1", {"drop": "three", }, 272);
cmdWrapper("db_1", {"collMod": "one", "validationLevel": "off", "validationAction": "error", }, 273);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "281275256524575", a: [[{"bin_e": BinData(0x04,'aGVsbG8='), }, {"bin_e": BinData(0x05,'aGVsbG8='), }, ], ["bcxyz", ], ], c: "caselesS"}], "ordered": true, }, 274);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "374087671201182", c: {e: 314159265000}, a: []}], "ordered": true, }, 275);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.two", }, 276);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 95, }, 277);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "743070827508908", a: BinData(0x80,'aGVsbG8='), f: [[BinData(0x80,'aGVsbG8='), BinData(0x05,'aGVsbG8='), BinData(0x80,'aGVsbG8='), ], ]}], "ordered": false, }, 278);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "124703479164349", b: [" ", {"bin_e": BinData(0x02,'aGVsbG8='), }, ], b: {a: [-0, 1.0, 31.415, ]}}], "ordered": true, }, 279);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"rgx_d.10.ts_c": -1, }, "name": "260524748333146", "expireAfterSeconds": 52, },], }, 280);
cmdWrapper("db_1", {"collMod": "two", "validator": {"b": {$ne: 100}, }, }, 281);
cmdWrapper("db_1", {"drop": "two", }, 282);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "three", "updates": [{"q": {"_id": "2", }, "u": {c: [{"bin_f": BinData(0x04,'aGVsbG8='), }, {"bin_a": BinData(0x80,'aGVsbG8='), }, {"bin_a": BinData(0x00,'aGVsbG8='), }, ], f: [{"num_e": -8, }, BinData(0x00,'aGVsbG8='), BinData(0x00,'aGVsbG8='), ]}, }], }, {"update": "three", "updates": [{"q": {"_id": "3", }, "u": {b: {b: "x7F"}, b: [-3.14159265859, [], {"str_a": "anything", }, ]}, }], }, {"insert": "two", "documents": [{"_id": "2", b: [[BinData(0x00,'aGVsbG8='), ], [4.940656484124654e-324, ], ], d: "  "}], "ordered": false, }, ], }, 283);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"a": {$ne: 100}, }, "validationLevel": "moderate", }, 284);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "420852294624739", f: "thing", f: ["bcxyz", BinData(0x04,'aGVsbG8='), ]}], "ordered": true, }, 285);
cmdWrapper("db_1", {"drop": "one", }, 286);
cmdWrapper("db_0", {"create": "one", "capped": false, "size": 301, "validator": {"d": {$ne: 100}, }, }, 287);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"int_e.lon_d.0": -1, "lon_a.ts_d.dec_e": 1, "int_e.dec_b": 1, }, "name": "ix_ffffff", "expireAfterSeconds": 163, },{"key": {"lon_e.0.dec_c": 1, "rgx_b.str_b.int_b": 1, "dec_d.3": -1, }, "name": "ix_bb", "unique": true, "expireAfterSeconds": 38, },], }, 288);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "moderate", }, 289);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 290);
cmdWrapper("db_1", {"create": "two", "validationLevel": "strict", }, 291);
cmdWrapper("db_1", {"collMod": "three", "validationAction": "warn", }, 292);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.three", "dropTarget": true, }, 293);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 85, }, 294);
cmdWrapper("db_0", {"create": "one", "size": 919, "max": 90, "validator": {"c": {$ne: 100}, }, "validationAction": "warn", }, 295);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "three", "documents": [{"_id": "1", c: "any thing", c: [-1.0, -0, ]}], "ordered": false, }, ], }, 296);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, {"delete": "two", "deletes": [{"q": {"_id": "0", }, "limit": 1, }], }, ], }, 297);
cmdWrapper("db_0", {"collMod": "three", "validationAction": "warn", }, 298);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 826, }, 299);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "013549863976002", a: [0.0, ], b: [BinData(0x00,'aGVsbG8='), [{"num_e": 10, }, {"num_e": 0.0, }, {"num_a": -1.0, }, ], {"bin_d": BinData(0x80,'aGVsbG8='), }, ]}], "ordered": true, }, 300);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "*", }, 301);
cmdWrapper("db_1", {"create": "three", "capped": true, "max": 6938, "validator": {"b": {$ne: 100}, }, "validationLevel": "off", }, 302);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.two", }, 303);
cmdWrapper("db_1", {"create": "one", "capped": false, "size": 36, "validator": {"f": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "warn", "flags": 3, }, 304);
cmdWrapper("db_0", {"create": "three", "size": 99, "max": 9965, "validator": {"b": {$ne: 100}, }, "validationAction": "warn", "flags": 3, }, 305);
cmdWrapper("db_1", {"drop": "one", }, 306);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 307);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "410259060880352", b: {e: [-1, -1, Infinity, ]}, a: BinData(0x05,'aGVsbG8=')}], "ordered": false, }, 308);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"d": -1, "_id": 1, }, "name": "ix_dddd", "unique": false, "sparse": true, "expireAfterSeconds": 13930815, },{"key": {"_id": "hashed", }, "name": "215710493737297", "background": true, },], }, 309);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "8", b: {d: [{"bin_b": BinData(0x05,'aGVsbG8='), }, {"bin_b": BinData(0x05,'aGVsbG8='), }, ]}, b: [[BinData(0x01,'aGVsbG8='), ], [4.940656484124654e-324, 314159265000, ], ]}], "ordered": true, }, ], }, 310);
cmdWrapper("db_0", {"collMod": "three", }, 311);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "8", }, "u": {e: "caseLESS", b: {a: " a "}}, }], }, {"insert": "one", "documents": [{"_id": "1", e: [], b: {b: [BinData(0x03,'aGVsbG8='), ]}}], "ordered": true, }, ], }, 312);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "539699275802221", e: "caseLESS", d: {b: {a: " a "}}}], "ordered": false, }, 313);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 314);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "4", }, "limit": 1, }], }, {"delete": "two", "deletes": [{"q": {"_id": "2", }, "limit": 1, }], }, ], }, 315);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 316);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 54885, }, 317);
cmdWrapper("db_0", {"drop": "one", }, 318);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "153731174396586", d: "  ", c: {e: ["thing", ]}}], "ordered": true, }, 319);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "708154120347896", b: "anything", b: BinData(0x04,'aGVsbG8=')}], "ordered": true, }, 320);
cmdWrapper("db_1", {"drop": "two", }, 321);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 322);
cmdWrapper("db_1", {"drop": "three", }, 323);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "587399409585614", e: ["abc\def", ], c: [{"bin_c": BinData(0x80,'aGVsbG8='), }, {"bin_f": BinData(0x04,'aGVsbG8='), }, ]}], "ordered": false, }, 324);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.two", }, 325);
cmdWrapper("db_0", {"drop": "two", }, 326);
cmdWrapper("db_1", {"collMod": "three", "validator": {"a": {$ne: 100}, }, "validationLevel": "moderate", }, 327);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 328);
cmdWrapper("db_0", {"drop": "three", }, 329);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 330);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 5387, }, 331);
cmdWrapper("db_0", {"drop": "one", }, 332);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 333);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "2", }, "u": {f: "bcxyz", e: ["￿f", [{"str_e": "bcxyz", }, {"str_c": "thing", }, ], [{"str_e": "  ", }, ], ]}, }], }, {"delete": "two", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, {"update": "one", "updates": [{"q": {"_id": "0", }, "u": {e: [], f: {"bin_c": BinData(0x00,'aGVsbG8='), }}, }], }, ], }, 334);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_bb", }, 335);
cmdWrapper("db_1", {"collMod": "one", }, 336);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "one", "documents": [{"_id": "7", c: {c: [+0, ]}, e: {a: [BinData(0x80,'aGVsbG8='), ]}}], "ordered": true, }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "2", }, "limit": 1, }], }, ], }, 337);
cmdWrapper("db_1", {"collMod": "two", "validationLevel": "strict", "validationAction": "error", }, 338);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 339);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 340);
cmdWrapper("db_1", {"drop": "one", }, 341);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_0.three", "dropTarget": true, }, 342);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [], }, 343);
cmdWrapper("db_1", {"collMod": "two", "validator": {"a": {$ne: 100}, }, "validationAction": "warn", }, 344);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "515734270028417", e: {f: {c: {e: "bcxyz"}}}, d: "thing"}], "ordered": false, }, 345);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 346);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 347);
cmdWrapper("db_1", {"collMod": "one", "validator": {"c": {$ne: 100}, }, }, 348);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 349);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "088759332910408", f: {f: []}, e: {d: {d: "￿f"}}}], "ordered": true, }, 350);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 82, }, 351);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("runTransaction",{"db": "db_1", "ops": [], }, 352);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 353);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.two", "dropTarget": false, }, 354);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_dddd", }, 355);
cmdWrapper("db_0", {"drop": "two", }, 356);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "two", "updates": [{"q": {"_id": "8", }, "u": {d: ["bcxyz", [], BinData(0x80,'aGVsbG8='), ], c: [[{"str_c": "anything", }, {"str_b": "axxxxxxxyz", }, ], ]}, }], }, {"insert": "two", "documents": [{"_id": "8", a: "CASELESS", e: ""}], "ordered": false, }, {"update": "two", "updates": [{"q": {"_id": "4", }, "u": {b: {d: "anything"}, d: {f: {d: {b: {c: {d: ["abc6ef", ]}}}}}}, }], }, ], }, 357);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "177100820135686", a: [[1.0, ], {"num_c": 4.940656484124654e-324, }, ], d: {b: []}}], "ordered": true, }, 358);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"f": "text", "_id": "text", }, "name": "ix_bb", "background": true, "sparse": false, },{"key": {"c": "text", "f": 1, }, "name": "840526130137020", "background": false, "sparse": false, },], }, 359);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 360);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "three", "documents": [{"_id": "8", a: {f: {a: "abc\def"}}, c: {b: [[BinData(0x00,'aGVsbG8='), BinData(0x80,'aGVsbG8='), ], [], ]}}], "ordered": false, }, {"update": "two", "updates": [{"q": {"_id": "8", }, "u": {a: "x1B", c: {e: [{"bin_b": BinData(0x80,'aGVsbG8='), }, {"bin_b": BinData(0x05,'aGVsbG8='), }, ]}}, }], }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "2", d: [{"str_c": "abc6ef", }, ], e: "  "}], "ordered": true, }, ], }, 361);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "ix_dddd", }, 362);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"a": "text", "f": 1, }, "name": "610631683139720", "background": false, "collation": 5571352, },{"key": {"f": "hashed", "_id": "text", }, "name": "181860574471748", "unique": false, },{"key": {"b": 1, }, "name": "954967387073456", "background": false, "unique": false, "sparse": false, },], }, 363);
cmdWrapper("db_1", {"collMod": "one", "validator": {"f": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "error", }, 364);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "383421724496428", b: "", c: {b: "x7F"}}], "ordered": true, }, 365);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 366);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 367);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 368);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 15, }, 369);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 910, }, 370);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"date_d.2.num_f": -1, "rgx_e.2.date_f": 1, "rgx_f.2.lon_c": 1, }, "name": "953852385817908", "unique": true, "expireAfterSeconds": {"locale": "es", "strength": 5, }, },{"key": {"e": -1, "f": 1, }, "name": "ix_eeeee", "unique": true, "expireAfterSeconds": 87, },{"key": {"0": 1, }, "name": "ix_ccc", "background": false, "collation": 621, },], }, 371);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "154607529757868", b: "abc\def", c: [BinData(0x03,'aGVsbG8='), 1, ]}], "ordered": false, }, 372);
cmdWrapper("db_1", {"create": "two", "max": 667, "validationAction": "error", "flags": 3, }, 373);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.three", "dropTarget": false, }, 374);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 282, }, 375);
cmdWrapper("db_1", {"drop": "one", }, 376);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "*", }, 377);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 378);
cmdWrapper("db_0", {"collMod": "one", "validationAction": "error", }, 379);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.one", "dropTarget": true, }, 380);
cmdWrapper("db_1", {"drop": "three", }, 381);
cmdWrapper("db_1", {"collMod": "three", "validator": {"a": {$ne: 100}, }, "validationLevel": "strict", }, 382);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 518, }, 383);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.three", }, 384);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 385);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 386);
cmdWrapper("db_1", {"create": "one", "capped": false, "validationLevel": "strict", "validationAction": "warn", "flags": 3, }, 387);
cmdWrapper("db_1", {"drop": "three", }, 388);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "two", "documents": [{"_id": "9", b: {"num_e": 4.940656484124654e-324, }, d: {e: []}}], "ordered": false, }, {"insert": "one", "documents": [{"_id": "2", b: {a: []}, c: "any thing"}], "ordered": true, }, {"insert": "one", "documents": [{"_id": "9", f: {b: {e: "x1B"}}, c: ""}], "ordered": true, }, ], }, 389);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": true, "validationLevel": "moderate", "validationAction": "warn", "flags": 3, }, 390);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "one", "documents": [{"_id": "5", a: "anything", a: {c: [[4.940656484124654e-324, ], [{"num_a": 2.225073858072009e308, }, {"num_f": -8, }, ], "A0B", ]}}], "ordered": false, }, {"update": "one", "updates": [{"q": {"_id": "9", }, "u": {e: [{"num_c": 1.7976931348623157e308, }, [BinData(0x03,'aGVsbG8='), BinData(0x00,'aGVsbG8='), ], {"str_e": " ", }, ], d: {f: " a "}}, }], }, {"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "3", }, "u": {a: [["abc6ef", ], [" ", "x1B", ], ], b: {f: {a: [[{"bin_b": BinData(0x03,'aGVsbG8='), }, ], {"str_f": "￿f", }, ]}}}, }], }, ], }, 391);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.two", "dropTarget": true, }, 392);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.three", }, 393);
cmdWrapper("db_0", {"create": "two", "capped": false, "size": 277, "max": 252, "validationLevel": "strict", "flags": 3, }, 394);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 395);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "3", e: ["axxxxxxxyz", [], [-314159265359, +0, ], ], e: "caselesS"}], "ordered": true, }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "6", }, "limit": 1, }], }, ], }, 396);
cmdWrapper("db_0", {"create": "one", "capped": false, "max": 64, "validator": {"a": {$ne: 100}, }, "validationAction": "warn", }, 397);
cmdWrapper("db_1", {"collMod": "two", "validator": {"f": {$ne: 100}, }, "validationAction": "error", }, 398);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [], }, 399);
cmdWrapper("db_1", {"collMod": "two", "validationLevel": "moderate", }, 400);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 401);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 402);
cmdWrapper("db_0", {"create": "two", "flags": 3, }, 403);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 664, }, 404);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 77, }, 405);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 406);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 407);
cmdWrapper("db_1", {"create": "two", "capped": false, "validator": {"b": {$ne: 100}, }, "validationAction": "warn", "flags": 3, }, 408);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": 1, "f": "text", }, "name": "ix_bb", "background": false, "unique": true, },{"key": {"c": "hashed", }, "name": "ix_ffffff", "background": false, "sparse": false, },], }, 409);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 54, }, 410);
cmdWrapper("db_0", {"create": "three", "capped": true, "max": 4471, "validator": {"c": {$ne: 100}, }, "validationLevel": "off", "validationAction": "error", }, 411);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 412);
cmdWrapper("db_1", {"create": "two", "size": 571, }, 413);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"e": "text", }, "name": "ix_a", "background": false, "unique": true, "expireAfterSeconds": {"locale": "af", "strength": 4, }, },], }, 414);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_ffffff", }, 415);
cmdWrapper("db_0", {"create": "three", "size": 48, "max": 23, "validator": {"a": {$ne: 100}, }, "flags": 3, }, 416);
cmdWrapper("db_0", {"collMod": "one", "validationLevel": "off", }, 417);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 418);
cmdWrapper("db_1", {"create": "one", "size": 54, "validationLevel": "strict", "flags": 3, }, 419);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 420);
cmdWrapper("db_1", {"create": "three", "max": 42, }, 421);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "2", d: {b: "an y thing"}, c: ["caselesS", ]}], "ordered": true, }, ], }, 422);
cmdWrapper("db_1", {"collMod": "three", "validator": {"d": {$ne: 100}, }, }, 423);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_ccc", }, 424);
cmdWrapper("db_0", {"create": "two", "capped": true, "size": 60, "max": 67, "validator": {"b": {$ne: 100}, }, "validationAction": "error", }, 425);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": "text", }, "name": "863484523965428", },{"key": {"date_e": 1, }, "name": "359291105527644", },], }, 426);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"lon_c.10.date_d": "hashed", }, "name": "741602396775522", "background": true, "collation": {"locale": "es", "strength": 5, }, },], }, 427);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"e": -1, }, "name": "112720162245375", "background": true, "unique": true, "sparse": true, "expireAfterSeconds": {"locale": "af", "strength": 2, }, },{"key": {"ts_b.date_d": 1, }, "name": "094752337366334", "unique": false, "sparse": false, },], }, 428);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 429);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 8497, }, 430);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_ccc", }, 431);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "6", a: 31.415, e: [[BinData(0x03,'aGVsbG8='), ], [{"num_e": 1, }, {"num_a": 4.940656484124654e-324, }, {"num_b": -3.14159265000, }, ], [{"str_c": "bcxyz", }, ], ]}], "ordered": false, }, {"delete": "one", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, {"update": "one", "updates": [{"q": {"_id": "7", }, "u": {a: "CASELESS", a: ["A0B", BinData(0x05,'aGVsbG8='), ]}, }], }, ], }, 432);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "470291856972099", a: [{"str_a": "anything", }, {"str_c": "x7F", }, ], e: "bcxyz"}], "ordered": true, }, 433);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 434);
cmdWrapper("db_0", {"create": "two", "capped": true, "max": 69, }, 435);
cmdWrapper("db_0", {"drop": "three", }, 436);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 178, }, 437);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 98, }, 438);
cmdWrapper("db_0", {"collMod": "two", }, 439);
cmdWrapper("db_0", {"create": "two", "size": 21, "validator": {"e": {$ne: 100}, }, "flags": 3, }, 440);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "ix_ffffff", }, 441);
cmdWrapper("db_0", {"drop": "two", }, 442);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 443);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 444);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "623705189642450", b: {d: " a "}, a: {b: []}}], "ordered": true, }, 445);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 41, }, 446);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 447);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.three", }, 448);
cmdWrapper("db_1", {"drop": "one", }, 449);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.two", "dropTarget": false, }, 450);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "8", }, "u": {f: [{"str_a": "axyz", }, {"str_b": "x1B", }, ], b: BinData(0x01,'aGVsbG8=')}, }], }, ], }, 451);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 452);
cmdWrapper("db_1", {"collMod": "one", "validator": {"d": {$ne: 100}, }, }, 453);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 454);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 455);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.three", }, 456);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_dddd", }, 457);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "ix_ffffff", }, 458);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"b": -1, "c": 1, }, "name": "ix_ccc", "background": true, "collation": 454283, },{"key": {"c": 1, "e": "text", }, "name": "ix_a", "unique": false, },{"key": {"date_a.10.ts_e": -1, }, "name": "095605216611831", "background": false, "expireAfterSeconds": {"locale": "hu", "strength": 3, }, },], }, 459);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "547448964666236", f: [NaN, ], d: "anything"}], "ordered": true, }, 460);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 234761059, }, 461);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 462);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 463);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [], }, 464);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationAction": "error", }, 465);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 101, }, 466);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [], }, 467);
cmdWrapper("db_0", {"collMod": "one", "validator": {"a": {$ne: 100}, }, }, 468);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "two", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, {"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "3", }, "u": {b: [314.15, ], d: ["x7F", ["￿f", "thing", "CASELESS", ], ]}, }], }, ], }, 469);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "3", }, "u": {e: "￿f", d: "abc\def"}, }], }, {"update": "three", "updates": [{"q": {"_id": "8", }, "u": {a: {e: "axyz"}, c: []}, }], }, ], }, 470);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 988, }, 471);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "two", "deletes": [{"q": {"_id": "0", }, "limit": 1, }], }, {"update": "three", "updates": [{"q": {"_id": "9", }, "u": {d: [BinData(0x80,'aGVsbG8='), BinData(0x00,'aGVsbG8='), BinData(0x03,'aGVsbG8='), ], b: [{"str_a": "CASELESS", }, {"str_b": "axxxxxxxyz", }, ]}, }], }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "3", b: "CASELESS", b: [{"num_b": 1.0, }, {"num_e": -1.0, }, ]}], "ordered": true, }, ], }, 472);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"a": -1, }, "name": "ix_eeeee", "unique": true, "sparse": true, "expireAfterSeconds": {"locale": "es", "strength": 2, }, },{"key": {"c": -1, }, "name": "ix_a", "background": false, "sparse": false, "collation": 1076, },{"key": {"date_f.lon_f": -1, }, "name": "013736368964673", "unique": true, "sparse": false, },], }, 473);
cmdWrapper("db_0", {"collMod": "three", "validationAction": "warn", }, 474);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "strict", "validationAction": "warn", }, 475);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "*", }, 476);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 98, "max": 768, "validator": {"e": {$ne: 100}, }, "flags": 3, }, 477);
cmdWrapper("db_0", {"create": "two", "size": 54, "validator": {"f": {$ne: 100}, }, }, 478);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "three", "updates": [{"q": {"_id": "1", }, "u": {f: {d: {b: "  "}}, a: "any thing"}, }], }, {"update": "three", "updates": [{"q": {"_id": "0", }, "u": {c: "axxxxxxxyz", c: {c: []}}, }], }, {"insert": "two", "documents": [{"_id": "7", c: {d: [[1, -314159265359, ], ]}, b: [[-0, ], {"str_b": "anything", }, ]}], "ordered": false, }, ], }, 479);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 480);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "three", "documents": [{"_id": "1", a: [], a: {c: {a: "CASELESS"}}}], "ordered": false, }, {"update": "two", "updates": [{"q": {"_id": "5", }, "u": {e: "A0B", a: []}, }], }, ], }, 481);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"ts_b.num_a.$": 1, "int_b": -1, "oid_f.rgx_e": -1, }, "name": "920823141365611", "background": true, "unique": true, "sparse": true, "expireAfterSeconds": {"locale": "sq", "strength": 1, }, },{"key": {"$**": "text", }, "name": "ix_eeeee", "sparse": false, "collation": 22, },], }, 482);
cmdWrapper("db_1", {"collMod": "one", "validationAction": "warn", }, 483);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.one", }, 484);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.two", "dropTarget": false, }, 485);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 486);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "819033135011996", c: [[{"num_e": -3.14159265859, }, {"num_d": -314159265359, }, {"num_b": 1.0, }, ], [{"str_d": "thing", }, {"str_b": "any thing", }, ], ], e: {d: {a: {b: {e: "A0B"}}}}}], "ordered": false, }, 487);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "0", }, "u": {f: [[BinData(0x02,'aGVsbG8='), BinData(0x80,'aGVsbG8='), BinData(0x04,'aGVsbG8='), ], ], e: {"bin_c": BinData(0x80,'aGVsbG8='), }}, }], }, {"delete": "two", "deletes": [{"q": {"_id": "7", }, "limit": 1, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "0", }, "limit": 1, }], }, ], }, 488);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"date_b": -1, }, "name": "ix_a", "unique": false, "expireAfterSeconds": {"locale": "am", "strength": 4, }, },{"key": {"b": -1, }, "name": "161470198757608", "collation": 696, },{"key": {"ts_f.2.bin_b": -1, }, "name": "ix_eeeee", "background": false, "sparse": true, },], }, 489);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"str_e.3": -1, }, "name": "287512211215885", "unique": false, "collation": 70, },{"key": {"c": -1, "_id": "text", }, "name": "284788707726611", "background": false, "unique": false, "sparse": false, },], }, 490);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "*", }, 491);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 492);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "two", "updates": [{"q": {"_id": "8", }, "u": {d: [{"str_a": "A0B", }, ], f: "an y thing"}, }], }, {"update": "one", "updates": [{"q": {"_id": "6", }, "u": {b: "caselesS", d: "CASELESS"}, }], }, {"update": "two", "updates": [{"q": {"_id": "5", }, "u": {c: {f: [BinData(0x05,'aGVsbG8='), ]}, c: [{"num_b": 2.225073858072009e308, }, 3.14159265359, ]}, }], }, ], }, 493);
cmdWrapper("db_1", {"collMod": "one", }, 494);
cmdWrapper("db_0", {"drop": "three", }, 495);
cmdWrapper("db_0", {"drop": "three", }, 496);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "two", "updates": [{"q": {"_id": "7", }, "u": {b: [-0, {"str_c": "caselesS", }, ], d: []}, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "7", }, "limit": 1, }], }, ], }, 497);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 1689, }, 498);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"num_e.bin_b": -1, "0.str_a": 1, "10.dec_e": 1, }, "name": "223769389840409", "unique": true, "expireAfterSeconds": 62, },{"key": {"lon_b.int_b.date_e": -1, "str_f.ts_c": -1, "nul_e.str_f.0": -1, }, "name": "ix_ccc", "collation": {"locale": "am", "strength": 5, }, },], }, 499);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 500);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.one", }, 501);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 502);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"e": {$ne: 100}, }, "validationAction": "warn", "flags": 3, }, 503);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 71, }, 504);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 505);
cmdWrapper("db_1", {"create": "three", "size": 36388, "validationLevel": "strict", }, 506);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 507);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "868402174729859", b: {"num_f": 2.225073858072009e308, }, b: {a: [[{"num_d": -1.0, }, {"num_d": 31.415, }, ], {"bin_e": BinData(0x80,'aGVsbG8='), }, ]}}], "ordered": true, }, 508);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "145751159369263", e: [[BinData(0x00,'aGVsbG8='), BinData(0x05,'aGVsbG8='), BinData(0x00,'aGVsbG8='), ], ], b: {c: {b: {b: {"num_b": 31.415, }}}}}], "ordered": true, }, 509);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 510);
cmdWrapper("db_0", {"drop": "one", }, 511);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"c": -1, }, "name": "146970080065123", "background": true, "unique": false, "sparse": false, },{"key": {"rgx_b.date_f.nul_c": -1, }, "name": "221026909109106", "background": false, "unique": false, "sparse": true, },{"key": {"_id": -1, "e": "text", }, "name": "ix_eeeee", "unique": false, "expireAfterSeconds": {"locale": "af", "strength": 5, }, },], }, 512);
cmdWrapper("db_1", {"drop": "one", }, 513);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 514);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "284651160517402", f: [{"num_c": -3.14159265000, }, {"num_a": -314159265359, }, ], b: [0, 1.0, ]}], "ordered": true, }, 515);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_ffffff", }, 516);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "652685155900252", f: "bcxyz", a: "CASELESS"}], "ordered": false, }, 517);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "two", "deletes": [{"q": {"_id": "3", }, "limit": 1, }], }, {"delete": "three", "deletes": [{"q": {"_id": "6", }, "limit": 1, }], }, {"insert": "two", "documents": [{"_id": "9", e: {b: {a: {e: [["an y thing", ], 4.940656484124654e-324, {"bin_b": BinData(0x05,'aGVsbG8='), }, ]}}}, e: [{"bin_f": BinData(0x04,'aGVsbG8='), }, [{"bin_e": BinData(0x03,'aGVsbG8='), }, {"bin_f": BinData(0x00,'aGVsbG8='), }, ], ]}], "ordered": false, }, ], }, 518);
cmdWrapper("db_0", {"create": "three", "size": 91929356, "max": 14, "validator": {"d": {$ne: 100}, }, }, 519);
cmdWrapper("db_1", {"create": "three", "capped": true, "size": 232, }, 520);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"str_b.num_c": -1, }, "name": "354704836732122", },{"key": {"_id": "hashed", "f": "hashed", }, "name": "242178083302274", "sparse": false, "collation": 75533, },], }, 521);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "1", }, "u": {b: [[{"bin_f": BinData(0x03,'aGVsbG8='), }, ], {"bin_b": BinData(0x00,'aGVsbG8='), }, [], ], d: [{"num_f": +0, }, {"num_c": 3.14159265359, }, {"num_b": -314159265359, }, ]}, }], }, {"insert": "three", "documents": [{"_id": "8", c: "CASELESS", c: [BinData(0x00,'aGVsbG8='), ]}], "ordered": false, }, ], }, 522);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 523);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 524);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 525);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [], }, 526);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 527);
cmdWrapper("db_0", {"drop": "three", }, 528);
cmdWrapper("db_1", {"drop": "three", }, 529);
cmdWrapper("db_0", {"collMod": "two", "validator": {"e": {$ne: 100}, }, }, 530);
cmdWrapper("db_0", {"collMod": "one", "validationLevel": "strict", "validationAction": "error", }, 531);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "one", "documents": [{"_id": "1", f: {e: []}, e: "caselesS"}], "ordered": false, }, {"update": "one", "updates": [{"q": {"_id": "3", }, "u": {d: [{"num_b": -0, }, {"num_f": 314.15, }, ], a: "caselesS"}, }], }, ], }, 532);
cmdWrapper("db_0", {"collMod": "three", "validator": {"f": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "error", }, 533);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 534);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 535);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 12, }, 536);
cmdWrapper("db_0", {"create": "two", "size": 3440, "max": 376, }, 537);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationAction": "error", }, 538);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_dddd", }, 539);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "6", b: [[{"str_e": "caseLESS", }, ], [{"bin_e": BinData(0x05,'aGVsbG8='), }, ], {"str_d": "x1B", }, ], b: [[{"bin_f": BinData(0x03,'aGVsbG8='), }, {"bin_d": BinData(0x05,'aGVsbG8='), }, {"bin_b": BinData(0x00,'aGVsbG8='), }, ], {"str_f": "anything", }, [{"str_b": "axyz", }, {"str_d": "￿f", }, ], ]}], "ordered": false, }, {"update": "three", "updates": [{"q": {"_id": "7", }, "u": {f: "CASELESS", f: "axxxxxxxyz"}, }], }, {"delete": "one", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, ], }, 540);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"num_e.0.ts_a": "hashed", }, "name": "ix_bb", "collation": {"locale": "es", "strength": 1, }, },{"key": {"date_b.10": -1, }, "name": "ix_a", "sparse": false, "collation": {"locale": "am", "strength": 4, }, },{"key": {"_id": "text", }, "name": "157868394999959", "background": true, "sparse": true, "expireAfterSeconds": 73027, },], }, 541);
cmdWrapper("db_0", {"create": "three", "size": 75, "max": 197, "validationLevel": "moderate", "validationAction": "error", }, 542);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 543);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.one", "dropTarget": true, }, 544);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 545);
cmdWrapper("db_0", {"create": "two", "size": 218, }, 546);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_dddd", }, 547);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 548);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"_id": -1, "_id": 1, }, "name": "ix_ffffff", "background": false, "unique": true, "sparse": false, "expireAfterSeconds": {"locale": "bs", "strength": 2, }, },{"key": {"a": 1, }, "name": "251779829228057", "collation": 8674, },{"key": {"lon_e.lon_c.$": 1, }, "name": "ix_dddd", "background": false, "sparse": true, },], }, 549);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "056789414138788", a: "caselesS", d: {f: "caseLESS"}}], "ordered": true, }, 550);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 551);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"str_a.1.lon_e": -1, }, "name": "ix_ccc", "unique": false, "expireAfterSeconds": {"locale": "bs", "strength": 1, }, },{"key": {"lon_d.date_c.str_b": -1, }, "name": "ix_bb", "background": true, },], }, 552);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "two", "updates": [{"q": {"_id": "2", }, "u": {f: "caseLESS", f: {c: {b: [[{"num_a": +0, }, {"num_c": 0.0, }, ], ]}}}, }], }, {"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "8", }, "u": {b: [], a: "A0B"}, }], }, {"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "0", }, "u": {c: [[BinData(0x05,'aGVsbG8='), BinData(0x03,'aGVsbG8='), BinData(0x02,'aGVsbG8='), ], [{"bin_d": BinData(0x00,'aGVsbG8='), }, ], ], f: {e: []}}, }], }, ], }, 553);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "146902732178021", a: "abc\def", f: {f: []}}], "ordered": false, }, 554);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "one", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, {"insert": "three", "documents": [{"_id": "9", d: [[], ], f: ""}], "ordered": true, }, {"insert": "one", "documents": [{"_id": "8", a: [0, 2.225073858072014e-308, ], a: "x7F"}], "ordered": false, }, ], }, 555);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 911, }, 556);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"ts_a.3": -1, }, "name": "ix_ccc", },{"key": {"c": 1, }, "name": "ix_dddd", "unique": true, },{"key": {"_id": "hashed", "e": "text", }, "name": "ix_eeeee", "unique": true, "sparse": false, "expireAfterSeconds": {"locale": "bs", "strength": 2, }, },], }, 557);
cmdWrapper("db_1", {"create": "two", "max": 75, "validator": {"a": {$ne: 100}, }, "validationAction": "warn", "flags": 3, }, 558);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 559);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 560);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "two", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, ], }, 561);
cmdWrapper("db_0", {"create": "one", "capped": true, "max": 87, "validationLevel": "off", }, 562);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 563);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "121960914516397", d: "", a: "abc6ef"}], "ordered": false, }, 564);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.one", }, 565);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 566);
cmdWrapper("db_0", {"drop": "two", }, 567);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 50, }, 568);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 958, }, 569);
cmdWrapper("db_0", {"drop": "two", }, 570);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 571);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "646930597175687", b: {b: {c: "thing"}}, c: {a: "abc6ef"}}], "ordered": false, }, 572);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 573);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "size": 70, "max": 29956, "validator": {"d": {$ne: 100}, }, "validationLevel": "strict", }, 574);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 55, }, 575);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": "text", }, "name": "ix_ccc", "sparse": false, },{"key": {"c": "hashed", "f": -1, }, "name": "ix_ccc", "unique": false, "sparse": true, "collation": {"locale": "es", "strength": 4, }, },], }, 576);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "one", "deletes": [{"q": {"_id": "6", }, "limit": 1, }], }, ], }, 577);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 506, }, 578);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 579);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "two", "deletes": [{"q": {"_id": "9", }, "limit": 1, }], }, {"delete": "three", "deletes": [{"q": {"_id": "6", }, "limit": 1, }], }, ], }, 580);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": -1, }, "name": "079558901605896", "sparse": false, },], }, 581);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "221121775003447", a: {a: [[{"str_b": "", }, ], ]}, b: "￿f"}], "ordered": false, }, 582);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 583);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 584);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "ix_bb", }, 585);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.one", }, 586);
cmdWrapper("db_0", {"create": "two", "capped": false, "validationLevel": "moderate", "flags": 3, }, 587);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "*", }, 588);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"ts_b.udf_f.1": -1, }, "name": "ix_dddd", "unique": false, "sparse": true, },], }, 589);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 590);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "two", "deletes": [{"q": {"_id": "3", }, "limit": 1, }], }, ], }, 591);
cmdWrapper("db_0", {"create": "two", "validationLevel": "strict", "validationAction": "warn", }, 592);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "8", d: {c: {d: " "}}, f: [[BinData(0x01,'aGVsbG8='), ], ]}], "ordered": true, }, {"update": "one", "updates": [{"q": {"_id": "7", }, "u": {d: {c: ["abc6ef", "CASELESS", "axxxxxxxyz", ]}, c: "any thing"}, }], }, ], }, 593);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "437090466182546", c: [{"str_c": "abc6ef", }, {"str_c": "anything", }, ], e: BinData(0x04,'aGVsbG8=')}], "ordered": false, }, 594);
cmdWrapper("db_1", {"collMod": "one", "validationLevel": "off", "validationAction": "error", }, 595);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "one", "documents": [{"_id": "8", d: ["￿f", -1.0, ], c: {f: {d: [1, -8, ]}}}], "ordered": true, }, ], }, 596);
cmdWrapper("db_1", {"drop": "two", }, 597);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "4", c: [BinData(0x00,'aGVsbG8='), "axyz", [BinData(0x01,'aGVsbG8='), BinData(0x80,'aGVsbG8='), ], ], e: [{"num_f": -0, }, "CASELESS", [{"num_d": 3.14159265359, }, ], ]}], "ordered": true, }, {"delete": "two", "deletes": [{"q": {"_id": "9", }, "limit": 1, }], }, ], }, 598);
cmdWrapper("db_1", {"drop": "two", }, 599);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "4", }, "limit": 1, }], }, ], }, 600);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "7", }, "limit": 1, }], }, {"update": "one", "updates": [{"q": {"_id": "2", }, "u": {a: "thing", e: [{"str_a": " ", }, BinData(0x04,'aGVsbG8='), ]}, }], }, {"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "7", }, "u": {b: {c: {"bin_e": BinData(0x01,'aGVsbG8='), }}, a: {a: []}}, }], }, ], }, 601);
cmdWrapper("db_0", {"create": "two", "max": 799, "validationLevel": "strict", "validationAction": "error", }, 602);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"lon_c": -1, }, "name": "371656234065251", "unique": false, "expireAfterSeconds": 80, },{"key": {"a": 1, "_id": 1, }, "name": "032844254168924", "background": true, "sparse": false, },], }, 603);
cmdWrapper("db_1", {"drop": "two", }, 604);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "599035971641471", f: [[{"num_c": -3.14159265000, }, {"num_b": NaN, }, {"num_e": 1.7976931348623157e308, }, ], [{"bin_e": BinData(0x80,'aGVsbG8='), }, ], ], c: "x1B"}], "ordered": false, }, 605);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 606);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "324125128790121", b: [{"bin_a": BinData(0x01,'aGVsbG8='), }, {"bin_f": BinData(0x04,'aGVsbG8='), }, ], c: " "}], "ordered": false, }, 607);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "799858080373538", f: {d: [["thing", ], ["anything", ], ]}, f: ["axyz", ]}], "ordered": false, }, 608);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 609);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 774, }, 610);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 611);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 612);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_eeeee", }, 613);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 614);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationAction": "warn", }, 615);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 616);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.two", }, 617);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 618);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 4681, }, 619);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 620);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "818185591503904", e: [314159265000, ], f: [[], {"bin_b": BinData(0x05,'aGVsbG8='), }, ]}], "ordered": true, }, 621);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "three", "documents": [{"_id": "4", d: "axyz", a: []}], "ordered": false, }, {"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "9", }, "u": {b: ["any thing", "x7F", [], ], a: "anything"}, }], }, {"delete": "one", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, ], }, 622);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 623);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"c": "text", }, "name": "ix_ffffff", "background": false, "unique": false, "sparse": false, "expireAfterSeconds": 27, },{"key": {"lon_d": -1, "int_e.ts_d.2": 1, "ts_f.$": 1, }, "name": "ix_a", "background": true, "unique": true, "sparse": true, "expireAfterSeconds": {"locale": "yo", "strength": 5, }, },{"key": {"rgx_d.date_c.rgx_e": 1, "0.int_a": -1, "bool_b.3.dec_b": 1, }, "name": "796656319880560", "background": true, "unique": true, "sparse": false, "collation": 23, },], }, 624);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 625);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 8311, }, 626);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 627);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"bool_c.dec_b.str_f": 1, }, "name": "377109396888904", "sparse": true, },{"key": {"_id": "hashed", "b": "text", }, "name": "868885616403554", "background": false, "unique": false, "sparse": true, "expireAfterSeconds": 21, },], }, 628);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 629);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 630);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 631);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 632);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 633);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 33, }, 634);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 635);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 636);
cmdWrapper("db_1", {"create": "two", "capped": true, }, 637);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_eeeee", }, 638);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 639);
cmdWrapper("db_0", {"create": "two", "size": 236, "max": 42, "validationLevel": "strict", "validationAction": "warn", "flags": 3, }, 640);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "9", }, "limit": 1, }], }, {"update": "three", "updates": [{"q": {"_id": "3", }, "u": {a: [{"num_b": 1.0, }, {"bin_c": BinData(0x80,'aGVsbG8='), }, [], ], e: " "}, }], }, ], }, 641);
cmdWrapper("db_0", {"drop": "one", }, 642);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "two", "updates": [{"q": {"_id": "5", }, "u": {b: "bcxyz", a: ""}, }], }, ], }, 643);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "*", }, 644);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "311981159727563", f: {b: "CASELESS"}, a: {b: []}}], "ordered": true, }, 645);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "7", }, "u": {f: {b: [["thing", "abc\def", "￿f", ], ]}, f: {d: "bcxyz"}}, }], }, ], }, 646);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "strict", }, 647);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.three", }, 648);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 649);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "strict", }, 650);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 651);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "0", }, "u": {e: {a: {d: [{"str_e": "thing", }, ["x1B", " ", "CASELESS", ], "thing", ]}}, a: [{"num_d": -8, }, {"num_d": 31.415, }, ]}, }], }, {"update": "three", "updates": [{"q": {"_id": "2", }, "u": {e: "caselesS", a: [{"bin_f": BinData(0x04,'aGVsbG8='), }, {"bin_b": BinData(0x04,'aGVsbG8='), }, {"bin_a": BinData(0x05,'aGVsbG8='), }, ]}, }], }, {"delete": "three", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, ], }, 652);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_dddd", }, 653);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": 1, }, "name": "ix_ffffff", "sparse": true, },{"key": {"_id": "hashed", }, "name": "ix_ccc", "background": false, "unique": false, "sparse": false, "expireAfterSeconds": 63, },], }, 654);
cmdWrapper("db_0", {"collMod": "one", "validator": {"d": {$ne: 100}, }, }, 655);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 656);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "strict", "validationAction": "error", }, 657);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 658);
cmdWrapper("db_0", {"drop": "one", }, 659);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.one", }, 660);
cmdWrapper("db_1", {"drop": "three", }, 661);
cmdWrapper("db_1", {"drop": "one", }, 662);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "550796520458781", d: {"num_f": -3.14159265859, }, e: {a: "anything"}}], "ordered": false, }, 663);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "128151962759554", a: " a ", a: [{"num_a": 3.14159265359, }, {"num_a": -0, }, ]}], "ordered": true, }, 664);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 665);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "067634889536598", c: " ", b: "abc\def"}], "ordered": false, }, 666);
cmdWrapper("db_0", {"collMod": "three", "validator": {"e": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "error", }, 667);
cmdWrapper("db_1", {"drop": "one", }, 668);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "344563147842168", d: [[{"num_b": -8, }, {"num_a": 2.225073858072009e308, }, {"num_b": Infinity, }, ], ], d: {a: {e: {c: []}}}}], "ordered": true, }, 669);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "two", "deletes": [{"q": {"_id": "9", }, "limit": 1, }], }, {"update": "three", "updates": [{"q": {"_id": "9", }, "u": {f: [BinData(0x80,'aGVsbG8='), ], b: [0, -1, ]}, }], }, ], }, 670);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 39, }, 671);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 672);
cmdWrapper("db_1", {"drop": "three", }, 673);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 674);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.two", "dropTarget": false, }, 675);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "889878531736515", f: "", c: [[" a ", ], ]}], "ordered": false, }, 676);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 642, }, 677);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 70, }, 678);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "*", }, 679);
cmdWrapper("db_0", {"create": "two", "capped": true, "validationLevel": "off", "validationAction": "error", "flags": 3, }, 680);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"1": -1, }, "name": "826830020488703", "background": false, "unique": false, },{"key": {"int_f.ts_f": 1, }, "name": "ix_ffffff", "sparse": true, },], }, 681);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 682);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 683);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "6", }, "limit": 1, }], }, {"insert": "three", "documents": [{"_id": "5", b: {e: -8}, a: "￿f"}], "ordered": true, }, {"update": "three", "updates": [{"q": {"_id": "3", }, "u": {e: ["  ", ], c: [4.940656484124654e-324, [{"bin_a": BinData(0x80,'aGVsbG8='), }, {"bin_d": BinData(0x02,'aGVsbG8='), }, ], ]}, }], }, ], }, 684);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 685);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "483429131311666", a: "x7F", f: {b: {f: "A0B"}}}], "ordered": false, }, 686);
cmdWrapper("db_1", {"create": "three", "capped": true, "validationLevel": "off", "validationAction": "warn", }, 687);
cmdWrapper("db_1", {"create": "three", "capped": false, "validator": {"a": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", "flags": 3, }, 688);
cmdWrapper("db_0", {"drop": "two", }, 689);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "607915169854064", f: [[{"bin_f": BinData(0x01,'aGVsbG8='), }, ], ], e: BinData(0x01,'aGVsbG8=')}], "ordered": true, }, 690);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 691);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("db_0", {"create": "one", "max": 64, "validator": {"b": {$ne: 100}, }, "validationLevel": "off", }, 692);
cmdWrapper("db_0", {"drop": "two", }, 693);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 694);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"d": "text", "_id": "hashed", }, "name": "207536962656244", "unique": false, "collation": 61, },{"key": {"date_c.bin_c": -1, }, "name": "ix_eeeee", "sparse": true, },{"key": {"_id": "text", }, "name": "ix_a", "unique": false, "collation": {"locale": "af", "strength": 5, }, },], }, 695);
cmdWrapper("db_1", {"create": "two", "size": 97, "max": 587901, "validator": {"d": {$ne: 100}, }, "validationLevel": "off", }, 696);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 498, }, 697);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "099529469497370", d: [{"bin_a": BinData(0x00,'aGVsbG8='), }, ], f: [{"str_c": "an y thing", }, {"str_d": "an y thing", }, ]}], "ordered": true, }, 698);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 478, }, 699);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [], }, 700);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"str_d.10.int_c": 1, }, "name": "853919649173583", "background": false, "sparse": true, },{"key": {"_id": "text", }, "name": "ix_ffffff", "unique": true, "sparse": true, "expireAfterSeconds": 870, },], }, 701);
cmdWrapper("db_1", {"drop": "one", }, 702);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"num_c.str_d.num_a": 1, }, "name": "ix_bb", "background": true, "unique": true, },], }, 703);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"ts_d.lon_f.$": "hashed", }, "name": "053204767928626", "background": true, "unique": true, "expireAfterSeconds": {"locale": "af", "strength": 4, }, },{"key": {"e": 1, "_id": "text", }, "name": "ix_a", "sparse": true, "collation": {"locale": "sq", "strength": 1, }, },], }, 704);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 705);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 706);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 707);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "639530685663356", e: [[31.415, 4.940656484124654e-324, ], [-0, ], ], a: -1}], "ordered": false, }, 708);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 93, }, 709);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 710);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "040884043747429", b: "abc6ef", f: "thing"}], "ordered": true, }, 711);
cmdWrapper("db_0", {"drop": "two", }, 712);
cmdWrapper("db_0", {"drop": "one", }, 713);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"e": "hashed", "f": "hashed", }, "name": "ix_dddd", "sparse": false, "collation": {"locale": "af", "strength": 1, }, },{"key": {"_id": 1, "_id": -1, }, "name": "ix_dddd", "background": true, },], }, 714);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"int_f.lon_b": -1, }, "name": "044315838138408", "unique": false, "sparse": true, },{"key": {"f": "text", }, "name": "ix_eeeee", "collation": 281, },{"key": {"str_b.lon_b.str_c": 1, }, "name": "ix_bb", "background": false, "sparse": true, },], }, 715);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "043073598050698", d: "  ", b: {e: [BinData(0x05,'aGVsbG8='), "thing", [], ]}}], "ordered": true, }, 716);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 57, }, 717);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 5010237, }, 718);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"_id": "hashed", }, "name": "010267427577997", "expireAfterSeconds": 940, },{"key": {"_id": 1, "d": 1, }, "name": "182374788451755", "background": true, "unique": false, "sparse": true, },{"key": {"_id": "text", "c": 1, }, "name": "ix_ccc", "background": false, "unique": true, "sparse": true, "expireAfterSeconds": {"locale": "hu", "strength": 4, }, },{"key": {"date_c.lon_c.$": 1, }, "name": "ix_ffffff", "unique": true, "collation": 29, },], }, 719);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "537865394613728", c: "caselesS", a: {a: "bcxyz"}}], "ordered": true, }, 720);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "317537681815248", e: "bcxyz", e: [{"bin_b": BinData(0x04,'aGVsbG8='), }, [{"bin_c": BinData(0x00,'aGVsbG8='), }, ], {"bin_c": BinData(0x05,'aGVsbG8='), }, ]}], "ordered": true, }, 721);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.three", "dropTarget": false, }, 722);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_dddd", }, 723);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": "hashed", "_id": "text", }, "name": "ix_dddd", "collation": 320, },{"key": {"_id": 1, }, "name": "ix_eeeee", "unique": true, "sparse": true, },{"key": {"dec_b.10": -1, }, "name": "414700947923733", "unique": false, },], }, 724);
cmdWrapper("db_0", {"create": "three", "size": 1522, "validator": {"e": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "warn", "flags": 3, }, 725);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_bb", }, 726);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"num_c.date_f": -1, }, "name": "ix_ffffff", "sparse": false, },], }, 727);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "025289279501201", f: {f: {b: BinData(0x04,'aGVsbG8=')}}, e: [1.7976931348623157e308, 2.225073858072009e308, ]}], "ordered": true, }, 728);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"_id": -1, }, "name": "815350845496191", "background": true, "sparse": false, },], }, 729);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "one", "updates": [{"q": {"_id": "3", }, "u": {d: "caselesS", e: {f: {b: {c: [[-1, 314.15, -3.14159265859, ], ]}}}}, }], }, {"update": "two", "updates": [{"q": {"_id": "4", }, "u": {a: ["x1B", ], d: {b: [{"bin_e": BinData(0x00,'aGVsbG8='), }, {"bin_d": BinData(0x03,'aGVsbG8='), }, ]}}, }], }, {"delete": "one", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, ], }, 730);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 731);
cmdWrapper("db_1", {"drop": "three", }, 732);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 733);
cmdWrapper("db_0", {"create": "two", "capped": true, "validationLevel": "strict", "validationAction": "error", "flags": 3, }, 734);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.two", }, 735);
cmdWrapper("db_0", {"drop": "one", }, 736);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "8", }, "u": {d: [{"bin_b": BinData(0x01,'aGVsbG8='), }, [BinData(0x05,'aGVsbG8='), ], [{"bin_a": BinData(0x04,'aGVsbG8='), }, {"bin_a": BinData(0x80,'aGVsbG8='), }, ], ], f: {a: {b: {"bin_d": BinData(0x00,'aGVsbG8='), }}}}, }], }, {"update": "three", "updates": [{"q": {"_id": "6", }, "u": {b: {e: "thing"}, c: BinData(0x01,'aGVsbG8=')}, }], }, ], }, 737);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "603220837211394", a: {b: [" a ", [3.14159265359, 31.415, ], 10, ]}, e: {b: " a "}}], "ordered": true, }, 738);
cmdWrapper("db_0", {"drop": "three", }, 739);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 740);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 741);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "three", "deletes": [{"q": {"_id": "0", }, "limit": 1, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "2", }, "limit": 1, }], }, {"insert": "two", "documents": [{"_id": "8", b: "thing", d: "x7F"}], "ordered": true, }, ], }, 742);
cmdWrapper("db_1", {"create": "one", "capped": true, "size": 11, "max": 22, "validator": {"f": {$ne: 100}, }, "flags": 3, }, 743);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 588, }, 744);
cmdWrapper("db_0", {"create": "three", "max": 67429, "validator": {"f": {$ne: 100}, }, "validationLevel": "off", "validationAction": "error", "flags": 3, }, 745);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 98, }, 746);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 747);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "*", }, 748);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"date_d.str_f": -1, }, "name": "507945686880045", "background": true, "unique": false, "expireAfterSeconds": 77, },], }, 749);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 632, }, 750);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "two", "updates": [{"q": {"_id": "2", }, "u": {e: {f: {"bin_c": BinData(0x80,'aGVsbG8='), }}, a: []}, }], }, {"update": "one", "updates": [{"q": {"_id": "7", }, "u": {e: {b: "A0B"}, f: [[BinData(0x04,'aGVsbG8='), BinData(0x01,'aGVsbG8='), ], [], ]}, }], }, ], }, 751);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": true, "size": 45144634108, "max": 17, }, 752);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.three", }, 753);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "620167553741161", d: "", a: "abc\def"}], "ordered": false, }, 754);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 63, }, 755);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.one", }, 756);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.three", }, 757);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.two", "dropTarget": false, }, 758);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 759);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 760);
cmdWrapper("db_0", {"drop": "two", }, 761);
cmdWrapper("db_1", {"create": "three", "max": 60548306, "validator": {"b": {$ne: 100}, }, "validationLevel": "moderate", "flags": 3, }, 762);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "088354516736362", b: [Infinity, "CASELESS", BinData(0x05,'aGVsbG8='), ], a: {d: " a "}}], "ordered": true, }, 763);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 764);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 13, }, 765);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 766);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, {"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "9", }, "u": {d: {c: []}, f: "CASELESS"}, }], }, ], }, 767);
cmdWrapper("db_0", {"collMod": "three", "validator": {"e": {$ne: 100}, }, "validationAction": "warn", }, 768);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "1", d: {e: [[], "abc6ef", [314.15, 1.7976931348623157e308, ], ]}, d: {f: ""}}], "ordered": true, }, {"update": "two", "updates": [{"q": {"_id": "9", }, "u": {d: "A0B", a: {b: {a: {a: {a: ["abc6ef", ]}}}}}, }], }, ], }, 769);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 770);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 771);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"$**": "text", }, "name": "903793207604995", "background": false, "unique": false, },{"key": {"d": "text", }, "name": "961851451493854", "background": false, "unique": false, "sparse": true, },{"key": {"lon_d.0.num_d": 1, "lon_a.dec_a.$": -1, "$.int_d": -1, }, "name": "092010995286770", "unique": true, "sparse": true, "expireAfterSeconds": {"locale": "af", "strength": 4, }, },{"key": {"3": -1, "ts_b.10": -1, "10.date_c": -1, }, "name": "ix_a", "sparse": true, "expireAfterSeconds": {"locale": "am", "strength": 3, }, },], }, 772);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"f": 1, "e": "hashed", }, "name": "089111252597093", "background": true, "unique": false, },{"key": {"_id": "hashed", "_id": -1, }, "name": "ix_ffffff", "sparse": false, "collation": {"locale": "yo", "strength": 2, }, },], }, 773);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 774);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.two", "dropTarget": false, }, 775);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 776);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"_id": 1, "_id": 1, }, "name": "301648889889536", "background": true, "collation": 62, },], }, 777);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": -1, "_id": 1, }, "name": "540180149737928", "unique": true, "expireAfterSeconds": 364072, },{"key": {"str_b": 1, }, "name": "435707816109050", "background": false, "sparse": false, "collation": 544, },{"key": {"_id": 1, "f": 1, }, "name": "151621836119708", "background": false, "sparse": false, "collation": 8094, },], }, 778);
cmdWrapper("db_0", {"collMod": "two", "validationAction": "warn", }, 779);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 13, }, 780);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_a", }, 781);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.three", "dropTarget": false, }, 782);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 783);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.one", }, 784);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 34, }, 785);
cmdWrapper("db_0", {"collMod": "three", "validator": {"e": {$ne: 100}, }, "validationAction": "warn", }, 786);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 787);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "1", a: [{"num_a": -3.14159265859, }, ["x1B", "A0B", "an y thing", ], "any thing", ], e: [[], [10, 1.0, 1, ], ]}], "ordered": true, }, {"update": "two", "updates": [{"q": {"_id": "6", }, "u": {d: [2.225073858072009e308, -1.0, 314.15, ], f: "any thing"}, }], }, ], }, 788);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 426, }, 789);
cmdWrapper("db_0", {"collMod": "two", "validator": {"d": {$ne: 100}, }, }, 790);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 53, }, 791);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"rgx_f.$.int_d": -1, }, "name": "377011557754979", "unique": true, "sparse": true, },{"key": {"b": 1, "_id": 1, }, "name": "ix_a", "unique": false, "sparse": true, },{"key": {"c": "hashed", "d": -1, }, "name": "ix_bb", "background": true, },], }, 792);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.two", "dropTarget": true, }, 793);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"a": -1, }, "name": "785072876890923", },{"key": {"2.int_f": -1, }, "name": "ix_ccc", "background": true, "unique": true, },], }, 794);
cmdWrapper("db_1", {"create": "two", "capped": true, "max": 9348200, "validationAction": "error", "flags": 3, }, 795);
cmdWrapper("db_0", {"create": "two", "size": 74, "max": 81, "validator": {"f": {$ne: 100}, }, "validationAction": "error", "flags": 3, }, 796);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_ccc", }, 797);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "0", }, "u": {e: " a ", b: "CASELESS"}, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "6", }, "limit": 1, }], }, {"insert": "two", "documents": [{"_id": "5", f: [2.225073858072009e308, 3.14159265359, -3.14159265859, ], a: [[" a ", ], [{"str_b": "  ", }, {"str_e": "  ", }, {"str_e": "thing", }, ], ]}], "ordered": false, }, ], }, 798);
cmdWrapper("db_1", {"collMod": "one", "validator": {"f": {$ne: 100}, }, }, 799);
cmdWrapper("db_1", {"create": "two", "capped": false, "size": 454, "max": 30, "flags": 3, }, 800);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 801);
cmdWrapper("db_1", {"create": "one", "max": 4663, "validationLevel": "off", "validationAction": "warn", }, 802);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "327848581591321", e: {c: ["abc\def", BinData(0x80,'aGVsbG8='), ]}, b: {e: "an y thing"}}], "ordered": false, }, 803);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "size": 59, "max": 15, "validationLevel": "strict", "flags": 3, }, 804);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "678856087291203", d: BinData(0x03,'aGVsbG8='), a: {b: "x7F"}}], "ordered": false, }, 805);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [], }, 806);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "size": 38, "max": 5418536, "validator": {"f": {$ne: 100}, }, "validationAction": "warn", "flags": 3, }, 807);
cmdWrapper("db_1", {"collMod": "three", "validator": {"c": {$ne: 100}, }, "validationAction": "error", }, 808);
cmdWrapper("db_0", {"drop": "two", }, 809);
cmdWrapper("db_0", {"collMod": "two", }, 810);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 57, }, 811);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.one", }, 812);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "490355867832089", b: {a: BinData(0x02,'aGVsbG8=')}, b: " a "}], "ordered": true, }, 813);
cmdWrapper("db_0", {"collMod": "one", "validator": {"c": {$ne: 100}, }, "validationLevel": "off", }, 814);
cmdWrapper("db_0", {"drop": "three", }, 815);
cmdWrapper("db_0", {"create": "one", "capped": true, "size": 27, "validator": {"f": {$ne: 100}, }, "validationAction": "warn", }, 816);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "three", "documents": [{"_id": "4", b: [["any thing", "x1B", "anything", ], [1.7976931348623157e308, 0, ], BinData(0x80,'aGVsbG8='), ], a: [[{"bin_a": BinData(0x05,'aGVsbG8='), }, {"bin_f": BinData(0x02,'aGVsbG8='), }, ], BinData(0x80,'aGVsbG8='), ]}], "ordered": false, }, {"insert": "one", "documents": [{"_id": "5", c: {e: {b: "an y thing"}}, a: [{"bin_a": BinData(0x01,'aGVsbG8='), }, ]}], "ordered": true, }, {"delete": "one", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, ], }, 817);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "598246931730795", c: [1.0, 2.225073858072009e308, -1, ], b: {e: [BinData(0x01,'aGVsbG8='), BinData(0x04,'aGVsbG8='), ]}}], "ordered": false, }, 818);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.two", "dropTarget": true, }, 819);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "ix_ccc", }, 820);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "481416384422294", c: [4.940656484124654e-324, ], c: []}], "ordered": true, }, 821);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "509707119824244", c: [], b: "abc\def"}], "ordered": false, }, 822);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 894, }, 823);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 5689, }, 824);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 825);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 826);
cmdWrapper("db_0", {"collMod": "one", }, 827);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_a", }, 828);
cmdWrapper("db_1", {"create": "two", "capped": true, "size": 725, "validator": {"f": {$ne: 100}, }, "validationLevel": "off", "flags": 3, }, 829);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_a", }, 830);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_dddd", }, 831);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 832);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.one", }, 833);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 834);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.one", }, 835);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 836);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "103452188631664", e: [{"str_c": " ", }, {"str_b": "bcxyz", }, [], ], b: [{"str_a": "anything", }, ]}], "ordered": false, }, 837);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"2": 1, "num_b.lon_f": 1, "ts_e.lon_a.3": 1, }, "name": "ix_dddd", "background": true, "collation": 45927, },{"key": {"e": -1, }, "name": "529699446868028", "expireAfterSeconds": {"locale": "am", "strength": 2, }, },], }, 838);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 839);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "400199113670107", f: {d: "A0B"}, a: "abc\def"}], "ordered": true, }, 840);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 841);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.three", "dropTarget": false, }, 842);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 73, }, 843);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "228610144038028", f: ["any thing", "A0B", "x7F", ], e: [{"num_e": 2.225073858072014e-308, }, {"num_c": 31.415, }, {"num_d": -3.14159265000, }, ]}], "ordered": false, }, 844);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"e": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", "flags": 3, }, 845);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"ts_d.num_d.str_c": -1, }, "name": "ix_a", "background": false, "sparse": false, "collation": {"locale": "es", "strength": 1, }, },{"key": {"rgx_d": "hashed", }, "name": "538797696914742", "background": true, "unique": false, "collation": {"locale": "yo", "strength": 3, }, },], }, 846);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 22, }, 847);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_0", {"convertToCapped": "two", "size": 53479, }, 848);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 849);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "031364818633817", d: [[{"str_d": "any thing", }, {"str_c": "an y thing", }, {"str_d": " a ", }, ], ], a: "abc6ef"}], "ordered": true, }, 850);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.two", "dropTarget": true, }, 851);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"str_a.date_c": 1, }, "name": "786889131275522", "sparse": false, },], }, 852);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "off", }, 853);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_0.one", "dropTarget": false, }, 854);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_eeeee", }, 855);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 856);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 857);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 13, }, 858);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 859);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"_id": "hashed", }, "name": "281606744078135", "unique": false, "sparse": true, "collation": 1843293, },{"key": {"b": "hashed", }, "name": "360695696273354", "background": true, "unique": true, "sparse": true, },{"key": {"date_f.udf_b": -1, }, "name": "ix_a", "unique": false, "sparse": true, "collation": {"locale": "hu", "strength": 5, }, },], }, 860);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 861);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 862);
cmdWrapper("db_0", {"drop": "two", }, 863);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"a": -1, "_id": "text", }, "name": "186053125941894", "background": false, "unique": true, "sparse": false, },], }, 864);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "528316691304165", b: {"bin_b": BinData(0x03,'aGVsbG8='), }, c: -3.14159265000}], "ordered": true, }, 865);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"b": "hashed", }, "name": "ix_dddd", "background": false, "sparse": true, "collation": 9723, },{"key": {"date_e.date_d.10": -1, "date_e.10.int_c": -1, "int_c.num_f": -1, }, "name": "134740067386693", "collation": {"locale": "bs", "strength": 4, }, },], }, 866);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 867);
cmdWrapper("db_1", {"create": "three", "size": 8079, "max": 38, "validator": {"b": {$ne: 100}, }, }, 868);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 47, }, 869);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 870);
cmdWrapper("db_0", {"create": "one", "capped": true, "validator": {"f": {$ne: 100}, }, "flags": 3, }, 871);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "6", }, "u": {f: "CASELESS", f: {c: 2.225073858072014e-308}}, }], }, ], }, 872);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 73, }, 873);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"num_a": -1, }, "name": "069332380220149", },{"key": {"2.num_e": -1, }, "name": "712859426241752", "unique": false, "expireAfterSeconds": 51, },], }, 874);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "2", b: {b: []}, b: {e: [BinData(0x05,'aGVsbG8='), BinData(0x02,'aGVsbG8='), ]}}], "ordered": false, }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "6", e: [], d: "abc\def"}], "ordered": false, }, ], }, 875);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 35, }, 876);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 613, }, 877);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"c": "text", "_id": "hashed", }, "name": "ix_ccc", "background": true, "sparse": true, },], }, 878);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 879);
cmdWrapper("db_0", {"create": "three", "validationLevel": "moderate", "validationAction": "warn", }, 880);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "strict", }, 881);
cmdWrapper("db_0", {"create": "two", "max": 31, "validator": {"f": {$ne: 100}, }, "validationAction": "warn", }, 882);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "487146658825872", c: {d: {b: [[], ]}}, c: {b: " "}}], "ordered": true, }, 883);
cmdWrapper("db_1", {"collMod": "one", "validationAction": "warn", }, 884);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 79, }, 885);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.three", "dropTarget": true, }, 886);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [], }, 887);
cmdWrapper("db_0", {"drop": "three", }, 888);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 17, }, 889);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 2364982718, "validator": {"d": {$ne: 100}, }, "validationLevel": "moderate", "flags": 3, }, 890);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 94, }, 891);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.one", "dropTarget": true, }, 892);
cmdWrapper("db_0", {"collMod": "one", }, 893);
cmdWrapper("db_0", {"collMod": "one", "validator": {"e": {$ne: 100}, }, "validationAction": "error", }, 894);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"$": 1, }, "name": "574711366682916", "background": false, "sparse": true, },{"key": {"num_e.str_d": -1, }, "name": "333898087439176", "expireAfterSeconds": 135, },], }, 895);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "ix_bb", }, 896);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"dec_f.rgx_b.3": -1, }, "name": "367119923772321", "unique": false, "sparse": true, "expireAfterSeconds": {"locale": "yo", "strength": 4, }, },{"key": {"1": 1, }, "name": "ix_eeeee", "background": true, "collation": 583, },{"key": {"rgx_b.$": 1, }, "name": "ix_a", "background": true, "unique": true, },], }, 897);
cmdWrapper("db_1", {"collMod": "two", "validator": {"c": {$ne: 100}, }, }, 898);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 899);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.two", "dropTarget": false, }, 900);
cmdWrapper("db_0", {"drop": "two", }, 901);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "three", "updates": [{"q": {"_id": "8", }, "u": {d: [], d: [{"num_f": -3.14159265859, }, {"num_a": 314159265000, }, {"num_b": -Infinity, }, ]}, }], }, {"insert": "one", "documents": [{"_id": "6", f: "caseLESS", b: [BinData(0x04,'aGVsbG8='), [{"str_d": "anything", }, {"str_a": "axyz", }, ], ]}], "ordered": false, }, ], }, 902);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 903);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "578045213729117", c: "any thing", b: {e: "an y thing"}}], "ordered": true, }, 904);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 68, }, 905);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"0.rgx_b": -1, }, "name": "704767583514528", "background": false, "unique": true, "sparse": false, "collation": 72403738, },{"key": {"b": -1, }, "name": "815688191562737", "background": true, "unique": false, "expireAfterSeconds": 25, },{"key": {"bool_c.0.num_b": -1, }, "name": "ix_eeeee", "background": false, "sparse": false, "expireAfterSeconds": 636, },], }, 906);
cmdWrapper("db_0", {"drop": "two", }, 907);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 99, }, 908);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "three", "updates": [{"q": {"_id": "2", }, "u": {b: {a: {"bin_d": BinData(0x02,'aGVsbG8='), }}, d: "CASELESS"}, }], }, {"delete": "two", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, {"delete": "two", "deletes": [{"q": {"_id": "2", }, "limit": 1, }], }, ], }, 909);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 910);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "ix_eeeee", }, 911);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("db_0", {"collMod": "two", "validationAction": "error", }, 912);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 32, }, 913);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 40, }, 914);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"_id": 1, }, "name": "428157363731062", "background": false, "unique": true, "sparse": true, },{"key": {"lon_f.str_b": "text", }, "name": "819135230943397", "sparse": true, },], }, 915);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 916);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "812993901866541", c: [[-1, ], {"bin_c": BinData(0x04,'aGVsbG8='), }, {"str_c": "  ", }, ], b: "￿f"}], "ordered": true, }, 917);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 918);
cmdWrapper("db_1", {"drop": "two", }, 919);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "one", "documents": [{"_id": "5", d: {b: {e: {b: [{"num_d": 2.225073858072014e-308, }, {"num_e": 2.225073858072014e-308, }, ]}}}, a: {c: {a: [{"str_d": "axxxxxxxyz", }, {"str_e": " ", }, ]}}}], "ordered": true, }, ], }, 920);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 921);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 922);
cmdWrapper("db_0", {"create": "two", "max": 89134, "validationAction": "warn", "flags": 3, }, 923);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"f": "hashed", }, "name": "338371202173917", "background": false, "unique": false, "sparse": true, "collation": {"locale": "es", "strength": 4, }, },{"key": {"_id": "hashed", "e": "text", }, "name": "ix_bb", "background": false, },], }, 924);
cmdWrapper("db_1", {"create": "two", "size": 592, "validator": {"b": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", }, 925);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 926);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 4092, }, 927);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 928);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 929);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 47, }, 930);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 71, }, 931);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 932);
cmdWrapper("db_0", {"create": "three", "capped": false, "size": 698, "max": 533, "validator": {"f": {$ne: 100}, }, }, 933);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "150310606010157", f: "an y thing", b: [[1, +0, ], ]}], "ordered": false, }, 934);
cmdWrapper("db_1", {"drop": "two", }, 935);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 936);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 17, }, 937);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "ix_eeeee", }, 938);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 53, }, 939);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 87, }, 940);
cmdWrapper("db_1", {"drop": "one", }, 941);
cmdWrapper("db_1", {"drop": "one", }, 942);
cmdWrapper("db_0", {"drop": "three", }, 943);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "three", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, {"insert": "three", "documents": [{"_id": "9", a: [[{"bin_a": BinData(0x80,'aGVsbG8='), }, {"bin_c": BinData(0x05,'aGVsbG8='), }, {"bin_a": BinData(0x03,'aGVsbG8='), }, ], -3.14159265859, {"num_e": +0, }, ], a: {"bin_a": BinData(0x00,'aGVsbG8='), }}], "ordered": false, }, ], }, 944);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 945);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"b": 1, "_id": 1, }, "name": "ix_eeeee", "background": true, "unique": true, },{"key": {"rgx_e.int_b": 1, }, "name": "880765075398871", "background": false, "sparse": false, "collation": 34, },], }, 946);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"num_b.lon_d.dec_e": -1, }, "name": "043410109651093", "background": true, "sparse": true, "collation": {"locale": "yo", "strength": 4, }, },{"key": {"rgx_a.2.ts_c": -1, }, "name": "ix_ffffff", "background": true, "unique": true, "collation": 62, },{"key": {"rgx_f.0": -1, }, "name": "ix_ccc", "background": false, "expireAfterSeconds": {"locale": "yo", "strength": 5, }, },], }, 947);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 948);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"b": {$ne: 100}, }, "validationLevel": "strict", }, 949);
cmdWrapper("db_1", {"create": "two", "capped": false, "max": 299, "validationLevel": "strict", "flags": 3, }, 950);
cmdWrapper("db_1", {"collMod": "three", "validator": {"d": {$ne: 100}, }, }, 951);
cmdWrapper("db_0", {"drop": "two", }, 952);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 953);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "4", }, "u": {e: {d: [-Infinity, ]}, f: {c: {d: BinData(0x03,'aGVsbG8=')}}}, }], }, ], }, 954);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_bb", }, 955);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 956);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 957);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"str_a.num_d.ts_b": -1, "oid_c.str_e": 1, "int_e": 1, }, "name": "433484954570648", "background": false, "unique": false, "expireAfterSeconds": {"locale": "sq", "strength": 4, }, },{"key": {"0.date_e": 1, }, "name": "790256680719755", "sparse": true, },], }, 958);
cmdWrapper("db_0", {"drop": "two", }, 959);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 960);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "206459435596984", d: [[{"str_a": "CASELESS", }, {"str_f": "abc6ef", }, {"str_c": "x7F", }, ], -Infinity, ], d: []}], "ordered": true, }, 961);
cmdWrapper("db_0", {"create": "one", "capped": true, "size": 336, "validationAction": "warn", }, 962);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 963);
cmdWrapper("db_0", {"collMod": "two", "validationLevel": "moderate", }, 964);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "709205615358881", f: "CASELESS", f: {c: {c: [[{"str_a": "A0B", }, {"str_e": "axxxxxxxyz", }, ], ]}}}], "ordered": false, }, 965);
cmdWrapper("db_1", {"drop": "two", }, 966);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "292592742433271", e: {d: {a: [[{"bin_c": BinData(0x00,'aGVsbG8='), }, {"bin_f": BinData(0x03,'aGVsbG8='), }, ], -1, ]}}, a: []}], "ordered": true, }, 967);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 968);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "773748041719775", b: [[], {"str_a": "any thing", }, [{"num_b": 314159265000, }, {"num_f": -3.14159265859, }, ], ], c: []}], "ordered": false, }, 969);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "811305382175248", c: [BinData(0x80,'aGVsbG8='), BinData(0x02,'aGVsbG8='), BinData(0x04,'aGVsbG8='), ], e: {d: {c: "￿f"}}}], "ordered": true, }, 970);
cmdWrapper("db_0", {"collMod": "three", "validator": {"f": {$ne: 100}, }, "validationAction": "warn", }, 971);
cmdWrapper("db_0", {"create": "three", "max": 19, "validator": {"c": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "warn", "flags": 3, }, 972);
cmdWrapper("db_0", {"collMod": "one", "validator": {"d": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 973);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "576524112635371", f: [0.0, 31.415, 4.940656484124654e-324, ], c: {"bin_d": BinData(0x05,'aGVsbG8='), }}], "ordered": true, }, 974);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "max": 8424, "validator": {"c": {$ne: 100}, }, "flags": 3, }, 975);
cmdWrapper("db_0", {"drop": "one", }, 976);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_ccc", }, 977);
cmdWrapper("db_0", {"drop": "two", }, 978);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 979);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"nul_a": -1, }, "name": "ix_dddd", "background": false, "unique": true, },], }, 980);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.one", }, 981);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "0", }, "u": {d: {"str_a": "abc6ef", }, c: "axxxxxxxyz"}, }], }, ], }, 982);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "two", "documents": [{"_id": "1", f: -1.0, f: "axxxxxxxyz"}], "ordered": false, }, {"delete": "one", "deletes": [{"q": {"_id": "6", }, "limit": 1, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, ], }, 983);
cmdWrapper("db_0", {"drop": "three", }, 984);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.one", "dropTarget": false, }, 985);
cmdWrapper("db_1", {"collMod": "one", "validationAction": "warn", }, 986);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 987);
cmdWrapper("db_0", {"drop": "three", }, 988);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 989);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "max": 827, "validator": {"b": {$ne: 100}, }, "validationLevel": "off", "validationAction": "error", "flags": 3, }, 990);
cmdWrapper("db_1", {"create": "one", "capped": true, "size": 93, "validator": {"d": {$ne: 100}, }, "validationAction": "error", "flags": 3, }, 991);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.three", "dropTarget": false, }, 992);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, {"delete": "three", "deletes": [{"q": {"_id": "0", }, "limit": 1, }], }, {"insert": "two", "documents": [{"_id": "2", a: "CASELESS", c: "abc6ef"}], "ordered": true, }, ], }, 993);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 19, }, 994);
cmdWrapper("db_1", {"collMod": "two", "validationLevel": "strict", }, 995);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_ffffff", }, 996);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": 1, "f": "text", }, "name": "352780858528387", },{"key": {"2.rgx_b": 1, }, "name": "404346683663551", "unique": true, },{"key": {"_id": "text", "c": 1, }, "name": "895846392719779", "background": true, "unique": false, "sparse": false, },], }, 997);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 998);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 999);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 1000);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1001);
cmdWrapper("db_0", {"create": "three", "max": 96115, "validationLevel": "strict", }, 1002);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "one", "documents": [{"_id": "9", e: "axyz", f: []}], "ordered": true, }, ], }, 1003);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"ts_f.0": 1, }, "name": "540153650159541", "background": true, "collation": 61, },], }, 1004);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "moderate", "validationAction": "warn", }, 1005);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "one", "deletes": [{"q": {"_id": "9", }, "limit": 1, }], }, ], }, 1006);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.three", "dropTarget": true, }, 1007);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": "hashed", "_id": "text", }, "name": "ix_bb", "background": false, "expireAfterSeconds": 23, },{"key": {"f": 1, "_id": "hashed", }, "name": "ix_bb", "background": false, "sparse": true, "collation": 59, },], }, 1008);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1009);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_0.two", "dropTarget": true, }, 1010);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 83, }, 1011);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 80, }, 1012);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("db_1", {"create": "three", "capped": false, "validator": {"e": {$ne: 100}, }, "validationLevel": "moderate", }, 1013);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 15, }, 1014);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": true, "max": 625, "validator": {"f": {$ne: 100}, }, "validationLevel": "moderate", }, 1015);
cmdWrapper("db_1", {"create": "one", "size": 383, "max": 1994, "validator": {"e": {$ne: 100}, }, "flags": 3, }, 1016);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "ix_ffffff", }, 1017);
cmdWrapper("db_1", {"create": "three", "capped": true, "size": 17, "max": 60, "validator": {"c": {$ne: 100}, }, "validationAction": "error", "flags": 3, }, 1018);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1019);
cmdWrapper("db_1", {"collMod": "three", }, 1020);
cmdWrapper("db_0", {"create": "one", "capped": true, "size": 6617, "max": 88, "validationLevel": "moderate", "validationAction": "error", "flags": 3, }, 1021);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": "hashed", "_id": "text", }, "name": "050024930691376", "background": true, "unique": false, },], }, 1022);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 1023);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "strict", "validationAction": "warn", }, 1024);
cmdWrapper("db_0", {"create": "three", "max": 984, "validationLevel": "moderate", }, 1025);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 818, }, 1026);
cmdWrapper("db_1", {"create": "one", "validationLevel": "off", "flags": 3, }, 1027);
cmdWrapper("db_0", {"create": "one", "capped": false, "size": 356648, "validator": {"c": {$ne: 100}, }, "validationAction": "warn", }, 1028);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 6133, }, 1029);
cmdWrapper("db_0", {"drop": "one", }, 1030);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "off", }, 1031);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "one", "updates": [{"q": {"_id": "9", }, "u": {b: [], b: {c: {b: BinData(0x05,'aGVsbG8=')}}}, }], }, {"insert": "one", "documents": [{"_id": "1", b: [{"bin_e": BinData(0x03,'aGVsbG8='), }, ], e: {a: [314159265000, [BinData(0x01,'aGVsbG8='), BinData(0x05,'aGVsbG8='), ], ]}}], "ordered": false, }, {"update": "one", "updates": [{"q": {"_id": "7", }, "u": {c: {a: "thing"}, a: []}, }], }, ], }, 1032);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "off", }, 1033);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.two", "dropTarget": true, }, 1034);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 11, }, 1035);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"f": "text", "a": 1, }, "name": "ix_eeeee", "unique": true, "sparse": false, },{"key": {"f": 1, "_id": "hashed", }, "name": "ix_a", "background": true, "unique": true, "collation": 66, },], }, 1036);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1037);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.one", "dropTarget": false, }, 1038);
cmdWrapper("db_1", {"create": "one", }, 1039);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1040);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 9428, }, 1041);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.three", "dropTarget": false, }, 1042);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "527372249974438", b: "abc6ef", e: "caseLESS"}], "ordered": false, }, 1043);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "543561813223430", e: [[" a ", "axyz", ], {"num_e": -1, }, ], f: {"str_e": "A0B", }}], "ordered": false, }, 1044);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "4", }, "u": {d: {a: {a: {"bin_f": BinData(0x05,'aGVsbG8='), }}}, d: []}, }], }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "8", d: "  ", c: ""}], "ordered": true, }, {"delete": "one", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, ], }, 1045);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.three", }, 1046);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_a", }, 1047);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1048);
cmdWrapper("db_0", {"create": "two", "capped": false, "max": 43, "validationLevel": "off", "validationAction": "warn", "flags": 3, }, 1049);
cmdWrapper("db_0", {"collMod": "one", "validationLevel": "strict", }, 1050);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "903924794746692", b: "thing", d: {e: "￿f"}}], "ordered": true, }, 1051);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"date_b.1.nul_f": "hashed", }, "name": "ix_dddd", "sparse": false, "expireAfterSeconds": {"locale": "yo", "strength": 5, }, },{"key": {"_id": "hashed", }, "name": "ix_ffffff", "unique": false, "sparse": false, "collation": {"locale": "hu", "strength": 3, }, },], }, 1052);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1053);
cmdWrapper("db_1", {"drop": "two", }, 1054);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "moderate", }, 1055);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"bool_c.str_e": 1, }, "name": "667880539754867", },{"key": {"_id": "text", }, "name": "545460843872178", "background": false, "sparse": false, "expireAfterSeconds": {"locale": "bs", "strength": 1, }, },{"key": {"dec_d": -1, "ts_b.dec_e": -1, "lon_f.date_d.3": 1, }, "name": "764894687238365", },], }, 1056);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1057);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_ccc", }, 1058);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1059);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1060);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"10": -1, "ts_e": -1, "ts_d": 1, }, "name": "ix_a", "sparse": false, },], }, 1061);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "326511471457095", f: [[314159265000, ], BinData(0x01,'aGVsbG8='), "A0B", ], c: {f: [[], ]}}], "ordered": false, }, 1062);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"ts_b.date_a.3": "hashed", }, "name": "100351937978823", "sparse": false, "collation": 12, },{"key": {"str_b.1": -1, }, "name": "823138667726958", "background": true, "unique": false, "collation": 37, },{"key": {"e": "text", }, "name": "ix_a", "sparse": false, },], }, 1063);
cmdWrapper("db_0", {"create": "one", "capped": true, "max": 86, "validator": {"e": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "error", }, 1064);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 23, }, 1065);
cmdWrapper("db_1", {"create": "one", "max": 5373, "flags": 3, }, 1066);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"e": 1, "_id": "text", }, "name": "ix_ffffff", "unique": false, "expireAfterSeconds": 21, },], }, 1067);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "674621594035483", c: {e: "x1B"}, a: [{"num_a": -Infinity, }, ]}], "ordered": false, }, 1068);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "one", "updates": [{"q": {"_id": "2", }, "u": {f: "axyz", c: [[], [{"num_a": 0, }, ], ]}, }], }, {"update": "three", "updates": [{"q": {"_id": "3", }, "u": {d: [[BinData(0x04,'aGVsbG8='), ], "x7F", [" a ", "  ", "thing", ], ], b: BinData(0x04,'aGVsbG8=')}, }], }, ], }, 1069);
cmdWrapper("db_1", {"drop": "three", }, 1070);
cmdWrapper("db_0", {"create": "one", "capped": true, "size": 26, "validationLevel": "off", "flags": 3, }, 1071);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "152300044073503", f: {e: "axxxxxxxyz"}, e: {c: "an y thing"}}], "ordered": false, }, 1072);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1073);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"rgx_a.int_d.1": -1, "ts_f": -1, "int_a.lon_b.ts_e": 1, }, "name": "ix_dddd", "background": true, "unique": false, "sparse": true, "collation": {"locale": "yo", "strength": 2, }, },{"key": {"b": "hashed", }, "name": "353136333873900", "sparse": false, "expireAfterSeconds": {"locale": "fr", "strength": 1, }, },], }, 1074);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.three", }, 1075);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"num_b.$.nul_a": -1, }, "name": "094127759295933", "unique": true, },{"key": {"dec_a.rgx_b.$": "hashed", }, "name": "ix_bb", "sparse": true, },{"key": {"rgx_a.2.dec_c": 1, }, "name": "707469189112207", "sparse": true, "collation": 513, },], }, 1076);
cmdWrapper("db_0", {"drop": "three", }, 1077);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 86, }, 1078);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"num_a": -1, }, "name": "ix_eeeee", "background": true, "unique": false, "expireAfterSeconds": 50, },{"key": {"_id": "text", }, "name": "374230516470388", "collation": {"locale": "bs", "strength": 5, }, },], }, 1079);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1080);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "0", }, "u": {b: 314.15, e: {f: {"num_c": -1, }}}, }], }, ], }, 1081);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1082);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"e": {$ne: 100}, }, "validationAction": "error", }, 1083);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1084);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1085);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1086);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "333424632597932", b: {b: {a: {d: [{"bin_d": BinData(0x80,'aGVsbG8='), }, ]}}}, f: BinData(0x80,'aGVsbG8=')}], "ordered": false, }, 1087);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_1", {"drop": "one", }, 1088);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 788, "validationLevel": "moderate", "flags": 3, }, 1089);
cmdWrapper("db_0", {"create": "two", "capped": false, "validationLevel": "moderate", "validationAction": "error", }, 1090);
cmdWrapper("db_1", {"collMod": "three", "validationLevel": "strict", "validationAction": "error", }, 1091);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1092);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "780520170799727", c: "x1B", b: [{"bin_d": BinData(0x04,'aGVsbG8='), }, {"bin_c": BinData(0x03,'aGVsbG8='), }, {"bin_a": BinData(0x00,'aGVsbG8='), }, ]}], "ordered": true, }, 1093);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1094);
cmdWrapper("db_0", {"drop": "one", }, 1095);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"_id": 1, }, "name": "724459477671954", "background": true, "unique": false, },], }, 1096);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1097);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"e": 1, "f": "text", }, "name": "570363032675121", "unique": false, "sparse": true, "expireAfterSeconds": {"locale": "af", "strength": 5, }, },{"key": {"lon_d.num_c.num_d": "hashed", }, "name": "ix_a", "collation": {"locale": "sq", "strength": 1, }, },{"key": {"a": 1, }, "name": "694925396296746", "background": true, "collation": 576, },{"key": {"e": -1, }, "name": "255500687024863", "unique": true, "sparse": false, "expireAfterSeconds": 80, },], }, 1098);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"str_e.int_b": "hashed", }, "name": "864525806896668", "collation": {"locale": "yo", "strength": 3, }, },{"key": {"e": 1, }, "name": "ix_a", "unique": false, "sparse": true, },], }, 1099);
cmdWrapper("db_1", {"collMod": "one", }, 1100);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 49, }, 1101);
cmdWrapper("db_1", {"collMod": "one", "validationLevel": "off", "validationAction": "warn", }, 1102);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 11, }, 1103);
cmdWrapper("db_1", {"collMod": "one", "validationAction": "error", }, 1104);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "183033076157896", a: {"str_b": "  ", }, b: [-3.14159265000, "x1B", [{"str_f": "bcxyz", }, {"str_a": "  ", }, {"str_d": "x7F", }, ], ]}], "ordered": true, }, 1105);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "9", }, "u": {a: {d: {c: [{"bin_a": BinData(0x04,'aGVsbG8='), }, {"bin_e": BinData(0x00,'aGVsbG8='), }, {"bin_f": BinData(0x03,'aGVsbG8='), }, ]}}, b: [{"num_f": 1.7976931348623157e308, }, {"num_e": 1, }, {"num_b": 2.225073858072014e-308, }, ]}, }], }, {"insert": "three", "documents": [{"_id": "7", f: {a: ["abc6ef", ]}, c: [BinData(0x80,'aGVsbG8='), ]}], "ordered": true, }, ], }, 1106);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 583, }, 1107);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1108);
cmdWrapper("db_1", {"drop": "one", }, 1109);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.three", }, 1110);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1111);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "938212244723352", f: {a: {a: "thing"}}, e: "CASELESS"}], "ordered": false, }, 1112);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.two", "dropTarget": false, }, 1113);
cmdWrapper("db_0", {"drop": "one", }, 1114);
cmdWrapper("db_0", {"drop": "one", }, 1115);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "364326922326398", e: {a: {b: [[{"num_a": Infinity, }, ], ]}}, b: " "}], "ordered": false, }, 1116);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_ffffff", }, 1117);
cmdWrapper("db_1", {"collMod": "three", }, 1118);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1119);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"a": -1, "e": "hashed", }, "name": "ix_bb", "background": true, "unique": true, "sparse": false, "expireAfterSeconds": 5393, },{"key": {"1": 1, }, "name": "002713290596502", "background": false, "unique": false, "collation": {"locale": "fr", "strength": 5, }, },{"key": {"rgx_b.str_c": -1, }, "name": "ix_ccc", "background": false, },], }, 1120);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1121);
cmdWrapper("db_1", {"drop": "one", }, 1122);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 32, }, 1123);
cmdWrapper("db_1", {"drop": "three", }, 1124);
cmdWrapper("db_1", {"collMod": "two", "validationLevel": "strict", "validationAction": "warn", }, 1125);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 1126);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": true, "validator": {"e": {$ne: 100}, }, "validationAction": "warn", "flags": 3, }, 1127);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.three", }, 1128);
cmdWrapper("db_1", {"drop": "one", }, 1129);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 13, }, 1130);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"a": {$ne: 100}, }, "validationAction": "warn", }, 1131);
cmdWrapper("db_1", {"collMod": "one", "validator": {"e": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", }, 1132);
cmdWrapper("db_1", {"drop": "two", }, 1133);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "three", "documents": [{"_id": "6", c: "abc\def", e: []}], "ordered": true, }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "3", b: [{"num_f": 0, }, ], a: [NaN, [-3.14159265000, -1, ], ]}], "ordered": true, }, ], }, 1134);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_dddd", }, 1135);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "7", e: {f: [314.15, [{"num_c": -8, }, {"num_a": +0, }, {"num_b": -Infinity, }, ], ]}, f: {b: [[{"bin_f": BinData(0x04,'aGVsbG8='), }, {"bin_a": BinData(0x03,'aGVsbG8='), }, {"bin_a": BinData(0x80,'aGVsbG8='), }, ], ]}}], "ordered": true, }, ], }, 1136);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1137);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "885873940007542", e: {d: {e: "thing"}}, b: "any thing"}], "ordered": false, }, 1138);
cmdWrapper("db_1", {"create": "two", "capped": false, "validator": {"c": {$ne: 100}, }, }, 1139);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1140);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1141);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 392, }, 1142);
cmdWrapper("db_1", {"collMod": "three", }, 1143);
cmdWrapper("db_0", {"create": "two", "capped": true, "validationLevel": "off", "validationAction": "warn", "flags": 3, }, 1144);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "709393932986494", e: [[{"bin_a": BinData(0x05,'aGVsbG8='), }, ], ], b: {d: {"bin_b": BinData(0x80,'aGVsbG8='), }}}], "ordered": true, }, 1145);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1146);
cmdWrapper("db_0", {"create": "three", "capped": true, "size": 52668, "validator": {"a": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 1147);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.one", }, 1148);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "three", "documents": [{"_id": "3", e: "an y thing", e: "A0B"}], "ordered": false, }, {"insert": "two", "documents": [{"_id": "8", e: "abc6ef", c: {d: {"bin_f": BinData(0x01,'aGVsbG8='), }}}], "ordered": false, }, ], }, 1149);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.one", "dropTarget": true, }, 1150);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "two", "documents": [{"_id": "6", c: {a: {a: {a: [[{"num_b": Infinity, }, {"num_e": 1.7976931348623157e308, }, ], {"str_a": "abc6ef", }, ]}}}, d: [{"bin_c": BinData(0x03,'aGVsbG8='), }, {"bin_c": BinData(0x03,'aGVsbG8='), }, {"bin_b": BinData(0x80,'aGVsbG8='), }, ]}], "ordered": false, }, {"insert": "two", "documents": [{"_id": "0", b: [[{"bin_a": BinData(0x02,'aGVsbG8='), }, {"bin_b": BinData(0x05,'aGVsbG8='), }, ], BinData(0x00,'aGVsbG8='), {"bin_c": BinData(0x01,'aGVsbG8='), }, ], c: "thing"}], "ordered": true, }, ], }, 1151);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 1152);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 490, }, 1153);
cmdWrapper("db_0", {"create": "three", "max": 96, "flags": 3, }, 1154);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"f": 1, }, "name": "985744208378857", "background": true, "unique": true, },{"key": {"b": "text", "f": "text", }, "name": "097702801928865", "background": true, "expireAfterSeconds": 589, },], }, 1155);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"d": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "error", }, 1156);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.two", }, 1157);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 314318, }, 1158);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "368930713620288", b: {c: []}, a: [BinData(0x04,'aGVsbG8='), BinData(0x03,'aGVsbG8='), BinData(0x00,'aGVsbG8='), ]}], "ordered": true, }, 1159);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1160);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_bb", }, 1161);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "395731329907039", c: {a: {c: "x1B"}}, c: ""}], "ordered": false, }, 1162);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "289321439320091", c: [[], ], c: "axyz"}], "ordered": true, }, 1163);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_eeeee", }, 1164);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 34, }, 1165);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1166);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "one", "documents": [{"_id": "8", f: "anything", d: [{"str_b": "axyz", }, ]}], "ordered": false, }, {"delete": "three", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, ], }, 1167);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"d": "text", }, "name": "574066299751839", "background": true, "unique": true, "expireAfterSeconds": {"locale": "yo", "strength": 3, }, },{"key": {"2.lon_a": "hashed", }, "name": "ix_bb", "sparse": true, "collation": {"locale": "yo", "strength": 4, }, },{"key": {"d": "text", }, "name": "909025945255521", "unique": true, },{"key": {"dec_d.1": 1, "rgx_c.2": 1, "str_d": -1, }, "name": "ix_a", "background": false, "unique": false, "sparse": true, },], }, 1168);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"ts_d.lon_f.str_a": -1, "ts_d": -1, "1": -1, }, "name": "ix_ffffff", "background": false, "sparse": false, },{"key": {"c": -1, "b": -1, }, "name": "723792810089976", "unique": false, "expireAfterSeconds": 75710, },], }, 1169);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "028216359063501", c: [{"num_b": 3.14159265359, }, {"num_b": -3.14159265000, }, {"num_f": NaN, }, ], e: "caseLESS"}], "ordered": true, }, 1170);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 88384, }, 1171);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [], }, 1172);
cmdWrapper("db_0", {"collMod": "one", "validationLevel": "off", }, 1173);
cmdWrapper("db_1", {"drop": "two", }, 1174);
cmdWrapper("db_0", {"collMod": "one", "validator": {"d": {$ne: 100}, }, }, 1175);
cmdWrapper("db_1", {"collMod": "two", }, 1176);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 57, }, 1177);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "500736173501529", b: {"num_d": 10, }, f: {c: "caseLESS"}}], "ordered": true, }, 1178);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1179);
cmdWrapper("db_0", {"drop": "one", }, 1180);
cmdWrapper("db_0", {"drop": "one", }, 1181);
cmdWrapper("db_1", {"collMod": "three", }, 1182);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [], }, 1183);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "ix_a", }, 1184);
cmdWrapper("db_1", {"create": "two", "capped": false, "size": 40, "max": 429438, "validator": {"d": {$ne: 100}, }, "flags": 3, }, 1185);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": 1, }, "name": "378233304484172", "background": false, "expireAfterSeconds": 933, },{"key": {"lon_f.3": "text", }, "name": "ix_a", "background": true, "expireAfterSeconds": 10, },{"key": {"_id": 1, }, "name": "ix_dddd", "sparse": false, },{"key": {"str_a.num_c": -1, "int_d.int_e.str_d": 1, "dec_f.ts_b.int_a": -1, }, "name": "260875735680965", "sparse": false, "expireAfterSeconds": 2609, },], }, 1186);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1187);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "253752533899179", b: ["", ], c: []}], "ordered": true, }, 1188);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"num_d": 1, }, "name": "835553974348909", "expireAfterSeconds": 402, },{"key": {"_id": "text", }, "name": "714130446327998", "unique": false, },], }, 1189);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 701, }, 1190);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 7752, }, 1191);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "318754049450412", e: {"num_a": 10, }, b: {b: [[-1.0, 10, 1, ], [{"bin_b": BinData(0x04,'aGVsbG8='), }, {"bin_e": BinData(0x05,'aGVsbG8='), }, {"bin_f": BinData(0x05,'aGVsbG8='), }, ], ]}}], "ordered": true, }, 1192);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1193);
cmdWrapper("db_1", {"create": "three", "size": 438556, "max": 28, "validationLevel": "strict", "validationAction": "error", "flags": 3, }, 1194);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "871951228838448", b: Infinity, b: "axyz"}], "ordered": true, }, 1195);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1196);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "three", "updates": [{"q": {"_id": "5", }, "u": {e: "￿f", c: "abc6ef"}, }], }, {"insert": "one", "documents": [{"_id": "0", e: {d: [["thing", ], [-8, ], ]}, c: {f: "CASELESS"}}], "ordered": true, }, ], }, 1197);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"a": -1, "e": 1, }, "name": "516214473657841", "background": false, "unique": true, },{"key": {"dec_b.10.date_f": -1, }, "name": "260147798364989", "background": false, "sparse": true, },], }, 1198);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"int_a.3": 1, }, "name": "342159262926381", "collation": 79, },], }, 1199);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.two", }, 1200);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "244925577177942", d: [[], ], e: {b: [BinData(0x03,'aGVsbG8='), BinData(0x00,'aGVsbG8='), BinData(0x80,'aGVsbG8='), ]}}], "ordered": false, }, 1201);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1202);
cmdWrapper("db_0", {"drop": "two", }, 1203);
cmdWrapper("db_1", {"collMod": "three", "validator": {"f": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "error", }, 1204);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1205);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("db_0", {"drop": "two", }, 1206);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"2": -1, }, "name": "783180758831648", "background": true, },{"key": {"ts_b.2": -1, }, "name": "ix_ccc", "background": false, "sparse": false, },], }, 1207);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"d": "text", }, "name": "814716506944820", "unique": true, "expireAfterSeconds": 935911, },{"key": {"ts_a.ts_b": 1, }, "name": "ix_ffffff", "unique": true, },{"key": {"a": -1, }, "name": "ix_bb", "sparse": true, "expireAfterSeconds": {"locale": "af", "strength": 3, }, },], }, 1208);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 7755, }, 1209);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1210);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1211);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.one", }, 1212);
cmdWrapper("db_1", {"drop": "three", }, 1213);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1214);
cmdWrapper("db_1", {"drop": "two", }, 1215);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.two", "dropTarget": true, }, 1216);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "161237884273100", e: "￿f", e: [4.940656484124654e-324, -0, -Infinity, ]}], "ordered": false, }, 1217);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1218);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "two", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, ], }, 1219);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"ts_e.int_e": 1, "rgx_e.date_e.0": -1, "3": -1, }, "name": "252447985067319", "background": true, },], }, 1220);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": "text", "c": "text", }, "name": "259421504115819", "unique": false, "sparse": false, },{"key": {"1": -1, }, "name": "ix_ccc", "background": true, "unique": true, },], }, 1221);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1222);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1223);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"a": -1, }, "name": "645027491628243", },{"key": {"c": -1, "_id": 1, }, "name": "207730303082420", "background": false, "sparse": false, },{"key": {"2.lon_c": 1, }, "name": "ix_bb", "background": false, "unique": true, "sparse": true, "expireAfterSeconds": {"locale": "sq", "strength": 4, }, },], }, 1224);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"ts_c.$.str_b": "text", }, "name": "ix_bb", "background": false, "unique": true, "sparse": true, "collation": 54, },{"key": {"_id": "text", "_id": "text", }, "name": "ix_eeeee", "background": false, "unique": true, "sparse": true, },{"key": {"rgx_f.lon_e": -1, }, "name": "ix_a", "background": true, "unique": false, "sparse": false, "collation": 95, },{"key": {"_id": 1, }, "name": "ix_dddd", "unique": true, "sparse": true, "collation": {"locale": "hu", "strength": 3, }, },], }, 1225);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 14, }, 1226);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1227);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": "hashed", }, "name": "587376176850966", "unique": false, "sparse": true, },{"key": {"b": -1, }, "name": "ix_ffffff", },{"key": {"num_b.0": 1, }, "name": "ix_ffffff", "background": false, "unique": false, "sparse": true, },], }, 1228);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.two", "dropTarget": false, }, 1229);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "1", }, "u": {d: {b: "thing"}, c: [BinData(0x02,'aGVsbG8='), {"bin_b": BinData(0x03,'aGVsbG8='), }, ]}, }], }, {"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "7", }, "u": {e: [{"bin_d": BinData(0x04,'aGVsbG8='), }, {"bin_b": BinData(0x05,'aGVsbG8='), }, ], f: [{"num_f": NaN, }, {"bin_d": BinData(0x02,'aGVsbG8='), }, ]}, }], }, ], }, 1230);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 39, }, 1231);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1232);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "one", "documents": [{"_id": "4", a: {e: ""}, f: "abc6ef"}], "ordered": false, }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "2", }, "limit": 1, }], }, ], }, 1233);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_0.three", "dropTarget": false, }, 1234);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1235);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1236);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1237);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "198734329657529", d: {a: [2.225073858072009e308, 1.0, 0.0, ]}, f: {a: {a: "caseLESS"}}}], "ordered": false, }, 1238);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_dddd", }, 1239);
cmdWrapper("db_0", {"collMod": "three", "validator": {"e": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "error", }, 1240);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "055703292283588", d: [-1, "axyz", ], e: {d: {a: [["caseLESS", ], [], ]}}}], "ordered": false, }, 1241);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "921471261560814", c: "bcxyz", f: [[314.15, 3.14159265359, 2.225073858072009e308, ], ]}], "ordered": true, }, 1242);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 55, "validator": {"c": {$ne: 100}, }, "validationAction": "warn", "flags": 3, }, 1243);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.one", "dropTarget": true, }, 1244);
cmdWrapper("db_0", {"drop": "one", }, 1245);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "557207297555213", e: "CASELESS", a: 1.7976931348623157e308}], "ordered": false, }, 1246);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1247);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1248);
cmdWrapper("db_0", {"create": "three", "size": 6367623, "max": 302, "validator": {"c": {$ne: 100}, }, "validationLevel": "moderate", "flags": 3, }, 1249);
cmdWrapper("db_1", {"create": "one", "max": 612412, "validator": {"a": {$ne: 100}, }, "flags": 3, }, 1250);
cmdWrapper("db_1", {"drop": "two", }, 1251);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "831985460435144", f: "anything", d: -0}], "ordered": false, }, 1252);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 226, }, 1253);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "one", "updates": [{"q": {"_id": "9", }, "u": {c: " ", c: ["caseLESS", ]}, }], }, {"update": "one", "updates": [{"q": {"_id": "3", }, "u": {c: "abc\def", d: [{"str_b": "bcxyz", }, {"str_e": " ", }, ]}, }], }, {"delete": "one", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, ], }, 1254);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [], }, 1255);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "813392790153453", a: [], f: BinData(0x00,'aGVsbG8=')}], "ordered": true, }, 1256);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1257);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 13211, }, 1258);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1259);
cmdWrapper("db_1", {"create": "one", "validationLevel": "strict", "validationAction": "error", }, 1260);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "max": 419, "validator": {"d": {$ne: 100}, }, "validationLevel": "moderate", }, 1261);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1262);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1263);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.three", }, 1264);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.two", "dropTarget": true, }, 1265);
cmdWrapper("db_1", {"create": "three", "validator": {"b": {$ne: 100}, }, "validationLevel": "strict", }, 1266);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1267);
cmdWrapper("db_0", {"collMod": "two", "validationLevel": "moderate", "validationAction": "warn", }, 1268);
cmdWrapper("db_0", {"drop": "three", }, 1269);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": 1, }, "name": "ix_ffffff", "background": true, },{"key": {"f": 1, }, "name": "966341630033023", "background": true, "sparse": true, "expireAfterSeconds": 184255, },], }, 1270);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"int_e.10.int_e": "hashed", }, "name": "ix_eeeee", "sparse": false, "expireAfterSeconds": {"locale": "sq", "strength": 1, }, },{"key": {"1.date_a": "hashed", }, "name": "134614840944971", "expireAfterSeconds": 89, },], }, 1271);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"b": "text", "_id": "hashed", }, "name": "878685842967554", "background": false, "unique": true, "sparse": true, },{"key": {"str_e.dec_b.bool_c": 1, }, "name": "080140694182970", "background": false, "collation": 72, },{"key": {"_id": "hashed", "_id": "hashed", }, "name": "690816395425268", "background": true, "unique": false, "sparse": true, },], }, 1272);
cmdWrapper("db_0", {"drop": "three", }, 1273);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "731164269406778", c: "thing", f: [[" ", ], [{"num_e": Infinity, }, ], {"str_f": "", }, ]}], "ordered": true, }, 1274);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_0", {"collMod": "one", "validator": {"c": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "error", }, 1275);
cmdWrapper("db_1", {"collMod": "one", }, 1276);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "ix_ffffff", }, 1277);
cmdWrapper("db_1", {"collMod": "two", "validator": {"d": {$ne: 100}, }, "validationAction": "warn", }, 1278);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 229, }, 1279);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 1280);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1281);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 1282);
cmdWrapper("db_1", {"collMod": "one", "validationLevel": "moderate", }, 1283);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "772339469374549", d: [{"num_c": -3.14159265000, }, {"num_e": -1, }, {"num_a": 1.7976931348623157e308, }, ], e: [["abc6ef", "axyz", "bcxyz", ], 1.7976931348623157e308, ]}], "ordered": false, }, 1284);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "019352873406604", b: [{"num_f": -0, }, {"num_c": -0, }, ], f: [{"bin_b": BinData(0x02,'aGVsbG8='), }, {"bin_c": BinData(0x03,'aGVsbG8='), }, ]}], "ordered": false, }, 1285);
cmdWrapper("db_1", {"collMod": "one", "validationLevel": "off", }, 1286);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 97737, "max": 39, "validator": {"a": {$ne: 100}, }, "validationLevel": "moderate", }, 1287);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "4", }, "u": {a: "￿f", a: {"bin_a": BinData(0x00,'aGVsbG8='), }}, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "7", }, "limit": 1, }], }, {"delete": "one", "deletes": [{"q": {"_id": "7", }, "limit": 1, }], }, ], }, 1288);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_dddd", }, 1289);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": -1, }, "name": "ix_ccc", "background": true, "sparse": true, },], }, 1290);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 3343, "validationAction": "warn", }, 1291);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "303946073810957", a: {a: {c: {e: []}}}, c: "bcxyz"}], "ordered": true, }, 1292);
cmdWrapper("db_0", {"drop": "one", }, 1293);
cmdWrapper("db_0", {"create": "three", "max": 98995, }, 1294);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 93, }, 1295);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 1296);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.three", }, 1297);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.three", "dropTarget": true, }, 1298);
cmdWrapper("db_0", {"collMod": "three", "validator": {"a": {$ne: 100}, }, }, 1299);
cmdWrapper("db_1", {"create": "two", "capped": true, "size": 66, "validator": {"f": {$ne: 100}, }, "validationAction": "error", }, 1300);
cmdWrapper("db_1", {"drop": "three", }, 1301);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1302);
cmdWrapper("db_0", {"drop": "two", }, 1303);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.two", "dropTarget": false, }, 1304);
cmdWrapper("db_0", {"drop": "one", }, 1305);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1306);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"rgx_e.$.lon_f": -1, }, "name": "380359214776075", },{"key": {"num_a.int_a": 1, }, "name": "772335388972908", "background": false, "unique": false, "sparse": false, },], }, 1307);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"d": "text", "_id": "hashed", }, "name": "ix_ccc", "background": true, "unique": false, },], }, 1308);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1309);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1310);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 1311);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "176647134162156", c: " ", f: " a "}], "ordered": false, }, 1312);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 56153314, }, 1313);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_eeeee", }, 1314);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "436386214813198", b: "caseLESS", b: "A0B"}], "ordered": false, }, 1315);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1316);
cmdWrapper("db_0", {"collMod": "two", "validator": {"c": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 1317);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1318);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1319);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1320);
cmdWrapper("db_1", {"drop": "one", }, 1321);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "080454870307551", d: "A0B", a: {c: "anything"}}], "ordered": true, }, 1322);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.two", "dropTarget": true, }, 1323);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1324);
cmdWrapper("db_1", {"create": "two", "validator": {"a": {$ne: 100}, }, "flags": 3, }, 1325);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "914445735543761", f: [], d: [{"str_e": "A0B", }, ]}], "ordered": true, }, 1326);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1327);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1328);
cmdWrapper("db_1", {"create": "one", "capped": true, "size": 915, "max": 42, "validator": {"c": {$ne: 100}, }, "validationLevel": "off", }, 1329);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"e": 1, }, "name": "443409611166905", "sparse": true, },], }, 1330);
cmdWrapper("db_0", {"create": "one", "capped": true, "validator": {"f": {$ne: 100}, }, "flags": 3, }, 1331);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"b": "text", "a": -1, }, "name": "167521331988508", "sparse": true, "expireAfterSeconds": {"locale": "es", "strength": 3, }, },{"key": {"rgx_b.2.str_e": 1, }, "name": "183919421785416", "background": true, "unique": true, "expireAfterSeconds": {"locale": "yo", "strength": 3, }, },], }, 1332);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "441109900723443", f: {b: [BinData(0x04,'aGVsbG8='), ]}, d: "CASELESS"}], "ordered": true, }, 1333);
cmdWrapper("db_1", {"drop": "one", }, 1334);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1335);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "3", }, "limit": 1, }], }, ], }, 1336);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 748, }, 1337);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "off", "validationAction": "error", }, 1338);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "one", "documents": [{"_id": "9", b: "bcxyz", e: "axyz"}], "ordered": false, }, ], }, 1339);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, ], }, 1340);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_dddd", }, 1341);
cmdWrapper("db_0", {"create": "one", "max": 46, "validator": {"c": {$ne: 100}, }, "validationLevel": "off", }, 1342);
cmdWrapper("db_1", {"create": "three", "capped": true, "validator": {"a": {$ne: 100}, }, "validationAction": "warn", "flags": 3, }, 1343);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"b": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 1344);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1345);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1346);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1347);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "219291647730839", f: {b: "x1B"}, a: ""}], "ordered": false, }, 1348);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 59, }, 1349);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1350);
cmdWrapper("db_0", {"drop": "two", }, 1351);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "051691609644111", e: "bcxyz", e: {d: "axyz"}}], "ordered": true, }, 1352);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "two", "documents": [{"_id": "9", b: "thing", d: {b: [BinData(0x03,'aGVsbG8='), BinData(0x02,'aGVsbG8='), BinData(0x04,'aGVsbG8='), ]}}], "ordered": true, }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "9", }, "limit": 1, }], }, ], }, 1353);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.one", }, 1354);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1355);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1356);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "231909249798627", e: [[{"str_c": "CASELESS", }, {"str_b": "an y thing", }, {"str_c": "CASELESS", }, ], ["", " a ", ], {"str_d": "bcxyz", }, ], b: {a: [[BinData(0x01,'aGVsbG8='), BinData(0x04,'aGVsbG8='), ], NaN, [2.225073858072009e308, ], ]}}], "ordered": true, }, 1357);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "8", e: "an y thing", d: {d: [BinData(0x02,'aGVsbG8='), ]}}], "ordered": false, }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "9", f: {e: "CASELESS"}, b: {c: {a: [{"num_e": Infinity, }, {"bin_c": BinData(0x00,'aGVsbG8='), }, ]}}}], "ordered": false, }, ], }, 1358);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 374, }, 1359);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "strict", }, 1360);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1361);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1362);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": "hashed", "d": -1, }, "name": "ix_ffffff", "background": true, "sparse": true, "expireAfterSeconds": {"locale": "bs", "strength": 5, }, },{"key": {"$**": "text", }, "name": "ix_a", "sparse": false, },], }, 1363);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1364);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.three", "dropTarget": true, }, 1365);
cmdWrapper("db_0", {"drop": "two", }, 1366);
cmdWrapper("db_1", {"collMod": "three", "validationAction": "error", }, 1367);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 1368);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"nul_e.num_c.dec_c": 1, }, "name": "ix_dddd", "sparse": true, },], }, 1369);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"ts_b.$": -1, }, "name": "ix_bb", "background": false, "unique": true, "collation": 93, },{"key": {"_id": -1, "_id": "text", }, "name": "375650055632055", "background": true, "unique": false, "collation": {"locale": "fr", "strength": 1, }, },], }, 1370);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 358, }, 1371);
cmdWrapper("db_0", {"collMod": "two", "validator": {"a": {$ne: 100}, }, "validationAction": "warn", }, 1372);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1373);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.three", }, 1374);
cmdWrapper("db_0", {"create": "two", "capped": false, "size": 80, }, 1375);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_bb", }, 1376);
cmdWrapper("db_0", {"drop": "two", }, 1377);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_1", {"drop": "three", }, 1378);
cmdWrapper("db_1", {"collMod": "one", "validator": {"e": {$ne: 100}, }, "validationLevel": "off", }, 1379);
cmdWrapper("db_1", {"collMod": "one", "validator": {"f": {$ne: 100}, }, "validationLevel": "strict", }, 1380);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "161855772837761", c: [], b: [{"str_f": " ", }, {"str_c": "caselesS", }, {"str_b": "CASELESS", }, ]}], "ordered": false, }, 1381);
cmdWrapper("db_1", {"drop": "two", }, 1382);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1383);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 339, }, 1384);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"dec_c.10.udf_a": 1, }, "name": "ix_a", "sparse": false, "collation": 43, },], }, 1385);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"date_e.0.int_e": 1, }, "name": "008409070140203", },{"key": {"f": 1, "_id": 1, }, "name": "066874298729589", },], }, 1386);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "ix_dddd", }, 1387);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"ts_f.2": 1, }, "name": "ix_ccc", "collation": 65, },{"key": {"lon_e.ts_d.rgx_a": -1, }, "name": "875483071712163", "sparse": false, "expireAfterSeconds": {"locale": "af", "strength": 3, }, },{"key": {"b": "hashed", }, "name": "ix_bb", "unique": false, "sparse": true, "collation": 26, },], }, 1388);
cmdWrapper("db_0", {"collMod": "two", }, 1389);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "150647921056316", c: [[BinData(0x04,'aGVsbG8='), ], ], a: [{"num_f": 2.225073858072014e-308, }, ]}], "ordered": false, }, 1390);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": -1, }, "name": "ix_a", "background": true, "sparse": false, },{"key": {"a": "hashed", "_id": 1, }, "name": "ix_bb", "background": true, },], }, 1391);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.two", "dropTarget": true, }, 1392);
cmdWrapper("db_0", {"create": "two", "size": 21, "validationLevel": "off", }, 1393);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.three", }, 1394);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 7660, }, 1395);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"num_e.str_b.2": -1, }, "name": "ix_eeeee", "unique": true, },{"key": {"d": 1, }, "name": "595859705604530", "background": false, "unique": false, "expireAfterSeconds": 227, },], }, 1396);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"rgx_f": "text", }, "name": "823044252506509", "unique": false, },{"key": {"_id": -1, "_id": -1, }, "name": "036964910268503", "expireAfterSeconds": {"locale": "sq", "strength": 3, }, },{"key": {"dec_b.3": -1, }, "name": "ix_ffffff", },], }, 1397);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 799, }, 1398);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": "text", }, "name": "256413351421393", "background": true, "unique": false, "expireAfterSeconds": {"locale": "fr", "strength": 5, }, },{"key": {"_id": "hashed", "_id": 1, }, "name": "795276750926403", "background": false, "unique": false, "sparse": true, "expireAfterSeconds": {"locale": "fr", "strength": 3, }, },], }, 1399);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "two", "deletes": [{"q": {"_id": "2", }, "limit": 1, }], }, {"update": "two", "updates": [{"q": {"_id": "7", }, "u": {f: "thing", e: "thing"}, }], }, {"update": "three", "updates": [{"q": {"_id": "8", }, "u": {b: [[{"num_d": Infinity, }, ], ], a: {c: "CASELESS"}}, }], }, ], }, 1400);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 1401);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"dec_e.$": 1, }, "name": "303768112900648", "background": true, "unique": false, "sparse": false, },{"key": {"_id": "hashed", }, "name": "245073906457658", "unique": false, },], }, 1402);
cmdWrapper("db_0", {"collMod": "two", "validator": {"a": {$ne: 100}, }, "validationAction": "warn", }, 1403);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1404);
cmdWrapper("db_1", {"collMod": "three", "validationAction": "error", }, 1405);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "0", }, "u": {c: "caseLESS", b: "x1B"}, }], }, {"insert": "two", "documents": [{"_id": "9", e: "  ", d: {b: {d: [{"bin_c": BinData(0x00,'aGVsbG8='), }, ]}}}], "ordered": true, }, ], }, 1406);
cmdWrapper("db_0", {"collMod": "one", "validationAction": "error", }, 1407);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"_id": -1, "e": -1, }, "name": "983729033915071", "background": true, "collation": 65, },{"key": {"a": "hashed", }, "name": "937272997164082", "background": false, "sparse": false, "expireAfterSeconds": {"locale": "fr", "strength": 3, }, },{"key": {"date_c": "text", }, "name": "939814967619466", },], }, 1408);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 374, }, 1409);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_a", }, 1410);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 91, }, 1411);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 1412);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "ix_eeeee", }, 1413);
cmdWrapper("db_1", {"collMod": "two", "validationLevel": "off", "validationAction": "error", }, 1414);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1415);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 58, }, 1416);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1417);
cmdWrapper("db_1", {"drop": "three", }, 1418);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 1419);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 20, }, 1420);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"_id": "hashed", "f": -1, }, "name": "ix_a", "background": false, "unique": false, "collation": 909, },], }, 1421);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 1422);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "493247294030183", f: "abc6ef", b: ["an y thing", ]}], "ordered": true, }, 1423);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1424);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 62, }, 1425);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "730970099483615", f: {d: "CASELESS"}, a: {a: [[10, 314159265000, ], ["an y thing", "thing", ], ]}}], "ordered": true, }, 1426);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "734764713899156", a: [-314159265359, "x7F", [{"bin_b": BinData(0x05,'aGVsbG8='), }, {"bin_e": BinData(0x02,'aGVsbG8='), }, ], ], e: [{"num_c": 4.940656484124654e-324, }, {"num_c": +0, }, ]}], "ordered": false, }, 1427);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.one", "dropTarget": true, }, 1428);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "570810061864638", a: [{"str_e": "any thing", }, {"str_a": "any thing", }, ], d: {e: -1}}], "ordered": false, }, 1429);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 1430);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1431);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"lon_d.2": 1, "rgx_f.lon_b.lon_a": 1, "nul_c.1": -1, }, "name": "ix_a", "background": true, "unique": true, "sparse": true, "expireAfterSeconds": 72, },], }, 1432);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 62, }, 1433);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [], }, 1434);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 494293920, "max": 394309, "validationLevel": "off", }, 1435);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [], }, 1436);
cmdWrapper("db_1", {"collMod": "three", "validationLevel": "strict", }, 1437);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.three", }, 1438);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "799655362058432", e: "CASELESS", c: {"str_f": "", }}], "ordered": true, }, 1439);
cmdWrapper("db_0", {"collMod": "two", "validator": {"a": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "error", }, 1440);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1441);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "860829954700598", a: "", d: []}], "ordered": true, }, 1442);
cmdWrapper("db_1", {"create": "two", "validator": {"f": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", }, 1443);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "089574025888995", b: [3.14159265359, ], a: [[Infinity, -3.14159265000, -3.14159265000, ], [{"str_f": "", }, {"str_c": "abc\def", }, ], BinData(0x02,'aGVsbG8='), ]}], "ordered": false, }, 1444);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.three", }, 1445);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1446);
cmdWrapper("db_1", {"create": "two", "capped": true, "max": 60, "validator": {"c": {$ne: 100}, }, "validationLevel": "off", "validationAction": "error", }, 1447);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "one", "updates": [{"q": {"_id": "9", }, "u": {f: {c: ["caselesS", ]}, f: [BinData(0x01,'aGVsbG8='), [], ]}, }], }, {"delete": "one", "deletes": [{"q": {"_id": "0", }, "limit": 1, }], }, ], }, 1448);
cmdWrapper("db_1", {"create": "two", "capped": false, "validationLevel": "off", "flags": 3, }, 1449);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "0", a: [{"str_c": "bcxyz", }, {"str_f": "abc\def", }, ], c: "caselesS"}], "ordered": false, }, {"update": "three", "updates": [{"q": {"_id": "3", }, "u": {f: [-Infinity, ], a: ["abc6ef", "", ]}, }], }, ], }, 1450);
cmdWrapper("db_1", {"create": "three", "size": 466, "max": 29, "validationLevel": "moderate", "validationAction": "error", "flags": 3, }, 1451);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_eeeee", }, 1452);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"rgx_e": -1, }, "name": "681872069390093", "sparse": false, "expireAfterSeconds": 48, },], }, 1453);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "one", "documents": [{"_id": "7", b: [{"bin_b": BinData(0x03,'aGVsbG8='), }, {"bin_c": BinData(0x05,'aGVsbG8='), }, ], a: [[-314159265359, NaN, -1, ], {"str_e": "any thing", }, "A0B", ]}], "ordered": false, }, {"insert": "two", "documents": [{"_id": "6", d: "abc\def", d: [{"bin_c": BinData(0x01,'aGVsbG8='), }, {"bin_d": BinData(0x03,'aGVsbG8='), }, ]}], "ordered": true, }, ], }, 1454);
cmdWrapper("db_0", {"collMod": "three", "validator": {"e": {$ne: 100}, }, "validationLevel": "off", "validationAction": "error", }, 1455);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "152437519618203", f: "thing", d: [[], BinData(0x05,'aGVsbG8='), ]}], "ordered": false, }, 1456);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1457);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "392143956238243", c: {f: " "}, d: [[{"str_d": "thing", }, {"str_f": "axxxxxxxyz", }, {"str_f": "x7F", }, ], ]}], "ordered": false, }, 1458);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "max": 4665102, "validator": {"a": {$ne: 100}, }, "flags": 3, }, 1459);
cmdWrapper("db_1", {"collMod": "one", "validator": {"c": {$ne: 100}, }, }, 1460);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 864, }, 1461);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "ix_bb", }, 1462);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "two", "documents": [{"_id": "5", e: [["any thing", ], ], b: []}], "ordered": false, }, {"delete": "one", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, {"insert": "one", "documents": [{"_id": "9", a: {"bin_b": BinData(0x05,'aGVsbG8='), }, c: "axyz"}], "ordered": false, }, ], }, 1463);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, {"insert": "one", "documents": [{"_id": "0", c: "x1B", a: [[{"num_f": 314159265000, }, {"num_c": 10, }, {"num_c": 2.225073858072009e308, }, ], BinData(0x03,'aGVsbG8='), {"bin_d": BinData(0x05,'aGVsbG8='), }, ]}], "ordered": false, }, {"update": "one", "updates": [{"q": {"_id": "5", }, "u": {a: "A0B", e: ["abc\def", "abc\def", ]}, }], }, ], }, 1464);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 324, }, 1465);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("db_0", {"convertToCapped": "one", "size": 40979, }, 1466);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 76, }, 1467);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "755335651606321", f: {a: " a "}, e: ["  ", ]}], "ordered": true, }, 1468);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1469);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1470);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"_id": "text", "_id": "hashed", }, "name": "517689245855946", "background": true, "sparse": true, },{"key": {"ts_b.rgx_f": -1, }, "name": "438613613444154", "background": false, },], }, 1471);
cmdWrapper("db_0", {"drop": "one", }, 1472);
cmdWrapper("db_1", {"create": "three", "capped": true, "size": 853, "validator": {"a": {$ne: 100}, }, }, 1473);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "155210320563555", f: {"bin_a": BinData(0x00,'aGVsbG8='), }, c: [{"str_e": "  ", }, ]}], "ordered": true, }, 1474);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 48, }, 1475);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 21, }, 1476);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "3", }, "u": {b: {b: "A0B"}, f: "A0B"}, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "9", }, "limit": 1, }], }, {"delete": "one", "deletes": [{"q": {"_id": "2", }, "limit": 1, }], }, ], }, 1477);
cmdWrapper("db_0", {"create": "one", "size": 62, "max": 32, "validationLevel": "off", "flags": 3, }, 1478);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "434219747792009", b: [{"num_e": 10, }, ], f: "A0B"}], "ordered": true, }, 1479);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 15, }, 1480);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 26, }, 1481);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1482);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "057009080502412", a: ["axxxxxxxyz", [BinData(0x03,'aGVsbG8='), BinData(0x01,'aGVsbG8='), ], ], e: [{"num_c": 0.0, }, {"num_e": 3.14159265359, }, {"num_e": -1, }, ]}], "ordered": false, }, 1483);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "792456027153166", b: [["any thing", ], [], ], b: [[], ]}], "ordered": true, }, 1484);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.one", "dropTarget": false, }, 1485);
cmdWrapper("db_1", {"drop": "two", }, 1486);
cmdWrapper("db_0", {"collMod": "three", "validator": {"c": {$ne: 100}, }, }, 1487);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 1488);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "308370487556444", b: "￿f", a: {c: "an y thing"}}], "ordered": false, }, 1489);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationAction": "warn", }, 1490);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1491);
cmdWrapper("db_0", {"drop": "one", }, 1492);
cmdWrapper("db_0", {"collMod": "one", "validationLevel": "strict", "validationAction": "warn", }, 1493);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1494);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1495);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"_id": "text", }, "name": "849764210164874", "unique": false, "sparse": false, "collation": 9428, },{"key": {"int_d.1.str_d": 1, }, "name": "863561732337925", "collation": {"locale": "af", "strength": 3, }, },{"key": {"e": "text", }, "name": "892235558038414", "unique": true, },], }, 1496);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1497);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1498);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 38, }, 1499);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1500);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 1501);
cmdWrapper("db_1", {"create": "three", "capped": false, "size": 996, "max": 154, "validationLevel": "strict", "validationAction": "warn", }, 1502);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1503);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1504);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": "hashed", "_id": "text", }, "name": "686952803163165", "background": true, "unique": true, },{"key": {"b": "text", "_id": "hashed", }, "name": "215424334544645", "background": true, "unique": true, "collation": {"locale": "sq", "strength": 4, }, },{"key": {"int_e.oid_f.2": -1, }, "name": "015728877597259", "unique": true, "sparse": false, },], }, 1505);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"b": {$ne: 100}, }, "validationLevel": "off", }, 1506);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 404749, }, 1507);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "8", }, "u": {d: "thing", f: "￿f"}, }], }, {"update": "one", "updates": [{"q": {"_id": "6", }, "u": {d: "anything", a: {e: 0}}, }], }, ], }, 1508);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.three", "dropTarget": true, }, 1509);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "ix_a", }, 1510);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"dec_b.$.lon_d": -1, }, "name": "ix_eeeee", "background": true, "unique": false, },{"key": {"_id": -1, "f": 1, }, "name": "882711533852065", "unique": false, "expireAfterSeconds": {"locale": "sq", "strength": 5, }, },{"key": {"1": -1, }, "name": "328219000566407", "background": false, "sparse": false, },], }, 1511);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1512);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [], }, 1513);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"_id": "hashed", "_id": "hashed", }, "name": "ix_ffffff", "background": true, "unique": false, },], }, 1514);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"a": -1, }, "name": "ix_ccc", "unique": false, "expireAfterSeconds": 74, },], }, 1515);
cmdWrapper("db_1", {"collMod": "two", "validator": {"f": {$ne: 100}, }, "validationAction": "error", }, 1516);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1517);
cmdWrapper("db_0", {"create": "three", "capped": false, "size": 475, "validator": {"a": {$ne: 100}, }, "validationLevel": "off", "flags": 3, }, 1518);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "703794977157708", a: {c: [{"num_e": -1, }, ["A0B", "any thing", ], ]}, a: [["axyz", " a ", ], [{"bin_b": BinData(0x80,'aGVsbG8='), }, {"bin_c": BinData(0x01,'aGVsbG8='), }, {"bin_e": BinData(0x00,'aGVsbG8='), }, ], {"str_d": "axxxxxxxyz", }, ]}], "ordered": false, }, 1519);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 1520);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_0.two", }, 1521);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1522);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("db_1", {"create": "two", "capped": true, "flags": 3, }, 1523);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 8753, }, 1524);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.one", }, 1525);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 1526);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 8548, }, 1527);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "391098519255280", e: {b: 4.940656484124654e-324}, e: {"num_e": +0, }}], "ordered": true, }, 1528);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"nul_a.1": 1, }, "name": "ix_dddd", "background": false, "unique": false, },], }, 1529);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "three", "updates": [{"q": {"_id": "0", }, "u": {e: -314159265359, f: [[], ]}, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "2", }, "limit": 1, }], }, {"insert": "three", "documents": [{"_id": "7", f: "an y thing", a: [[-314159265359, -314159265359, Infinity, ], ]}], "ordered": false, }, ], }, 1530);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 99, }, 1531);
cmdWrapper("db_1", {"collMod": "one", "validator": {"e": {$ne: 100}, }, "validationLevel": "off", "validationAction": "error", }, 1532);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1533);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 34, }, 1534);
cmdWrapper("db_0", {"create": "three", "capped": false, "size": 78, "validator": {"f": {$ne: 100}, }, "flags": 3, }, 1535);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "604050429185277", d: " a ", d: [BinData(0x01,'aGVsbG8='), BinData(0x01,'aGVsbG8='), ]}], "ordered": false, }, 1536);
cmdWrapper("db_1", {"collMod": "two", "validationLevel": "strict", "validationAction": "warn", }, 1537);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1538);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1539);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 52, }, 1540);
cmdWrapper("db_1", {"collMod": "two", "validator": {"b": {$ne: 100}, }, "validationAction": "warn", }, 1541);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 545, }, 1542);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"b": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "warn", }, 1543);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1544);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.one", "dropTarget": false, }, 1545);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 53704, }, 1546);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "strict", }, 1547);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1548);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_1", {"create": "one", "capped": false, "max": 84, "validator": {"c": {$ne: 100}, }, "validationLevel": "off", "validationAction": "error", "flags": 3, }, 1549);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"c": {$ne: 100}, }, "validationLevel": "off", }, 1550);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.one", "dropTarget": true, }, 1551);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 1552);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"_id": 1, }, "name": "ix_ffffff", "background": false, "sparse": true, },], }, 1553);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 91, }, 1554);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1555);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1556);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_0", {"dropIndexes": "two", "index": "*", }, 1557);
cmdWrapper("db_1", {"collMod": "one", "validationLevel": "strict", }, 1558);
cmdWrapper("db_0", {"collMod": "two", "validationLevel": "strict", "validationAction": "error", }, 1559);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1560);
cmdWrapper("db_0", {"drop": "three", }, 1561);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "one", "updates": [{"q": {"_id": "6", }, "u": {f: {e: "abc6ef"}, c: {c: [BinData(0x01,'aGVsbG8='), ]}}, }], }, {"update": "two", "updates": [{"q": {"_id": "3", }, "u": {d: {f: [{"num_c": 0, }, [-3.14159265000, ], [{"str_f": "CASELESS", }, {"str_a": "caselesS", }, {"str_c": "￿f", }, ], ]}, f: {e: {e: [{"num_a": 1.7976931348623157e308, }, "x7F", 1.0, ]}}}, }], }, ], }, 1562);
cmdWrapper("db_0", {"drop": "two", }, 1563);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.three", "dropTarget": false, }, 1564);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "*", }, 1565);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1566);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "024010144343853", c: "x1B", b: "an y thing"}], "ordered": true, }, 1567);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "ix_a", }, 1568);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1569);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"nul_a.bool_e": "hashed", }, "name": "975221514926134", "unique": true, "collation": {"locale": "hu", "strength": 2, }, },{"key": {"2": -1, "str_e.ts_d.num_d": 1, "lon_a": -1, }, "name": "ix_ffffff", "background": false, "unique": false, "sparse": false, "collation": 54, },{"key": {"date_c": 1, }, "name": "302716103596101", "background": true, "unique": false, "sparse": false, },], }, 1570);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.one", }, 1571);
cmdWrapper("db_0", {"create": "one", "size": 94, "max": 95, "validationLevel": "off", }, 1572);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.two", }, 1573);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "512890413628346", e: {e: "x7F"}, e: "thing"}], "ordered": true, }, 1574);
cmdWrapper("db_1", {"collMod": "three", "validationLevel": "off", "validationAction": "error", }, 1575);
cmdWrapper("db_1", {"create": "one", "max": 63, "validationAction": "error", "flags": 3, }, 1576);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1577);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "moderate", }, 1578);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 1579);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 75, }, 1580);
cmdWrapper("db_0", {"drop": "two", }, 1581);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "max": 98, "validator": {"e": {$ne: 100}, }, }, 1582);
cmdWrapper("db_1", {"collMod": "three", "validationAction": "warn", }, 1583);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1584);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationAction": "error", }, 1585);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"int_f.2": 1, }, "name": "ix_ffffff", "unique": true, "collation": 78, },{"key": {"ts_e.lon_d.0": "hashed", }, "name": "529805691336384", "background": true, "sparse": true, "expireAfterSeconds": {"locale": "hu", "strength": 5, }, },{"key": {"_id": -1, }, "name": "ix_ffffff", "unique": true, },], }, 1586);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_a", }, 1587);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "467415820651043", b: {c: {f: {d: "caseLESS"}}}, a: [+0, {"num_a": -3.14159265859, }, [-314159265359, 4.940656484124654e-324, 0, ], ]}], "ordered": true, }, 1588);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "211701144044238", c: {"str_c": "  ", }, c: "  "}], "ordered": false, }, 1589);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "846818529233355", d: "anything", e: [{"str_a": "caseLESS", }, ]}], "ordered": true, }, 1590);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "568398380789132", c: [{"bin_c": BinData(0x04,'aGVsbG8='), }, {"bin_b": BinData(0x00,'aGVsbG8='), }, ], e: "thing"}], "ordered": false, }, 1591);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 81, }, 1592);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 1593);
cmdWrapper("db_0", {"create": "one", "size": 954, "validator": {"d": {$ne: 100}, }, "validationLevel": "off", }, 1594);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "ix_ccc", }, 1595);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1596);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "972648001703883", b: {c: {d: [-1, [], ["", ], ]}}, d: -1}], "ordered": false, }, 1597);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.three", "dropTarget": false, }, 1598);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_dddd", }, 1599);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1600);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "361168457572038", a: "axxxxxxxyz", b: {f: [[BinData(0x05,'aGVsbG8='), BinData(0x01,'aGVsbG8='), ], ]}}], "ordered": true, }, 1601);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.two", }, 1602);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 93703, }, 1603);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "three", "updates": [{"q": {"_id": "3", }, "u": {f: "any thing", b: [BinData(0x03,'aGVsbG8='), ["an y thing", ], ]}, }], }, ], }, 1604);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 411, }, 1605);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "three", "deletes": [{"q": {"_id": "9", }, "limit": 1, }], }, ], }, 1606);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1607);
cmdWrapper("db_1", {"create": "one", "size": 5350, "validationLevel": "off", "validationAction": "warn", "flags": 3, }, 1608);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_1", {"drop": "one", }, 1609);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1610);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1611);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1612);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1613);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "*", }, 1614);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1615);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_eeeee", }, 1616);
cmdWrapper("db_1", {"drop": "one", }, 1617);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1618);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 1619);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 5706, }, 1620);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1621);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"e": "hashed", "c": "hashed", }, "name": "ix_bb", "background": false, "unique": true, "collation": 48, },], }, 1622);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"d": -1, }, "name": "ix_a", "collation": 79, },{"key": {"bool_d.lon_e.2": -1, }, "name": "308138854494116", "unique": false, "collation": 468, },], }, 1623);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "*", }, 1624);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_0.one", "dropTarget": false, }, 1625);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "503898713563549", a: "A0B", d: [[], ]}], "ordered": false, }, 1626);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.three", }, 1627);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1628);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "375632312638079", c: {b: [[{"str_c": "thing", }, ], ]}, a: [[{"bin_d": BinData(0x03,'aGVsbG8='), }, ], {"num_d": 0, }, ]}], "ordered": true, }, 1629);
cmdWrapper("db_0", {"drop": "one", }, 1630);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "ix_dddd", }, 1631);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1632);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"f": -1, }, "name": "ix_ffffff", "background": true, "sparse": true, },{"key": {"2.num_b": -1, }, "name": "105344591753749", "unique": true, "sparse": true, "collation": {"locale": "sq", "strength": 1, }, },{"key": {"_id": "hashed", }, "name": "159100159403080", "background": true, "unique": false, "sparse": false, },], }, 1633);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "strict", "validationAction": "warn", }, 1634);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"b": "hashed", }, "name": "ix_bb", "background": true, "unique": true, "sparse": false, },], }, 1635);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"_id": -1, }, "name": "638710885632833", "background": true, "expireAfterSeconds": 9116, },], }, 1636);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "three", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, {"update": "three", "updates": [{"q": {"_id": "4", }, "u": {c: "thing", e: "axxxxxxxyz"}, }], }, {"delete": "three", "deletes": [{"q": {"_id": "2", }, "limit": 1, }], }, ], }, 1637);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "8", d: {d: []}, a: {a: "bcxyz"}}], "ordered": false, }, {"update": "one", "updates": [{"q": {"_id": "7", }, "u": {a: [{"bin_d": BinData(0x01,'aGVsbG8='), }, ], b: "thing"}, }], }, ], }, 1638);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "2", }, "u": {b: [[314159265000, ], [], ], c: " "}, }], }, {"update": "one", "updates": [{"q": {"_id": "5", }, "u": {c: [" a ", [{"str_b": "caselesS", }, {"str_b": "caseLESS", }, ], [{"num_e": 4.940656484124654e-324, }, {"num_f": 31.415, }, {"num_e": NaN, }, ], ], e: "abc6ef"}, }], }, ], }, 1639);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "7", }, "u": {a: {f: " a "}, b: {f: {f: [[{"str_a": " a ", }, ], [BinData(0x04,'aGVsbG8='), ], [{"str_d": "axxxxxxxyz", }, {"str_b": "￿f", }, ], ]}}}, }], }, ], }, 1640);
cmdWrapper("db_1", {"collMod": "one", "validator": {"a": {$ne: 100}, }, "validationLevel": "moderate", }, 1641);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "two", "updates": [{"q": {"_id": "2", }, "u": {e: " ", b: "any thing"}, }], }, {"update": "two", "updates": [{"q": {"_id": "8", }, "u": {c: {b: ""}, f: [{"bin_d": BinData(0x80,'aGVsbG8='), }, {"str_a": "caseLESS", }, [{"str_d": "x7F", }, {"str_f": "x1B", }, ], ]}, }], }, ], }, 1642);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"lon_c": -1, }, "name": "ix_dddd", "background": false, "unique": true, "sparse": false, },{"key": {"_id": "hashed", "e": -1, }, "name": "736343371463689", "background": false, "sparse": false, },{"key": {"dec_b.rgx_e.1": -1, }, "name": "796823772981089", "sparse": false, },], }, 1643);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 965, }, 1644);
cmdWrapper("db_0", {"create": "one", "capped": false, "max": 67, "validator": {"b": {$ne: 100}, }, "validationAction": "warn", "flags": 3, }, 1645);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "one", "updates": [{"q": {"_id": "9", }, "u": {a: [{"str_e": "  ", }, {"str_c": "abc\def", }, ], d: [[], ]}, }], }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "4", e: [+0, ], c: [{"num_b": 314.15, }, {"num_a": 0.0, }, {"num_a": 314159265000, }, ]}], "ordered": false, }, {"update": "one", "updates": [{"q": {"_id": "6", }, "u": {c: [{"str_e": "caselesS", }, {"str_a": "abc6ef", }, ], a: "CASELESS"}, }], }, ], }, 1646);
cmdWrapper("db_1", {"drop": "one", }, 1647);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_eeeee", }, 1648);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1649);
cmdWrapper("db_0", {"create": "one", "capped": false, }, 1650);
cmdWrapper("db_0", {"drop": "two", }, 1651);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": 1, }, "name": "146452691550124", },{"key": {"d": 1, "_id": 1, }, "name": "013478602634659", "unique": false, "expireAfterSeconds": 12203026, },], }, 1652);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"dec_c.$.num_b": 1, }, "name": "213903732673828", },], }, 1653);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 1654);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_0.two", "dropTarget": false, }, 1655);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "three", "updates": [{"q": {"_id": "4", }, "u": {e: [{"num_b": 0, }, ], a: "  "}, }], }, ], }, 1656);
cmdWrapper("db_1", {"drop": "one", }, 1657);
cmdWrapper("db_1", {"collMod": "three", "validationAction": "warn", }, 1658);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1659);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1660);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "one", "deletes": [{"q": {"_id": "8", }, "limit": 1, }], }, ], }, 1661);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, }, 1662);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1663);
cmdWrapper("db_1", {"drop": "one", }, 1664);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "484748933979071", d: {f: [[{"str_e": "axxxxxxxyz", }, {"str_e": "x1B", }, ], -3.14159265859, BinData(0x02,'aGVsbG8='), ]}, a: " a "}], "ordered": false, }, 1665);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1666);
cmdWrapper("db_0", {"create": "one", "capped": false, "validator": {"b": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", "flags": 3, }, 1667);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1668);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "584490152452153", d: [{"bin_e": BinData(0x05,'aGVsbG8='), }, ], c: BinData(0x00,'aGVsbG8=')}], "ordered": true, }, 1669);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 354235, }, 1670);
cmdWrapper("db_0", {"collMod": "two", }, 1671);
cmdWrapper("db_1", {"drop": "two", }, 1672);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "524189407105655", f: {c: -1.0}, f: {c: "axxxxxxxyz"}}], "ordered": true, }, 1673);
cmdWrapper("db_0", {"collMod": "one", "validator": {"e": {$ne: 100}, }, }, 1674);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "639488719818044", c: [{"bin_b": BinData(0x01,'aGVsbG8='), }, ], f: ["", [{"num_b": 4.940656484124654e-324, }, {"num_f": 0, }, ], ]}], "ordered": true, }, 1675);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_ccc", }, 1676);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1677);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 220, }, 1678);
cmdWrapper("db_0", {"drop": "three", }, 1679);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.one", }, 1680);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("db_1", {"collMod": "one", "validator": {"c": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", }, 1681);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.two", }, 1682);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.one", }, 1683);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 1684);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1685);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.two", }, 1686);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1687);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 988, }, 1688);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1689);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1690);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "updates": [{"q": {"_id": "9", }, "u": {b: 314159265000, b: []}, }], }, {"delete": "three", "deletes": [{"q": {"_id": "9", }, "limit": 1, }], }, {"delete": "two", "deletes": [{"q": {"_id": "6", }, "limit": 1, }], }, ], }, 1691);
cmdWrapper("db_0", {"collMod": "two", "validator": {"f": {$ne: 100}, }, }, 1692);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "size": 474, "max": 9494, "flags": 3, }, 1693);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1694);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_eeeee", }, 1695);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": "text", }, "name": "ix_bb", "unique": true, "sparse": false, },], }, 1696);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1697);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": true, "size": 473, "max": 15558, "validationLevel": "moderate", }, 1698);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 92, }, 1699);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.two", }, 1700);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "252890163792977", b: {e: {a: "x7F"}}, d: "abc\def"}], "ordered": true, }, 1701);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.one", "dropTarget": false, }, 1702);
cmdWrapper("db_1", {"collMod": "two", "validationAction": "warn", }, 1703);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 72, "validator": {"c": {$ne: 100}, }, }, 1704);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "522107645444305", c: [{"bin_e": BinData(0x05,'aGVsbG8='), }, {"bin_c": BinData(0x00,'aGVsbG8='), }, ], f: [31.415, ]}], "ordered": false, }, 1705);
cmdWrapper("db_0", {"collMod": "three", "validator": {"b": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 1706);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1707);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_ffffff", }, 1708);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1709);
cmdWrapper("db_1", {"collMod": "one", "validator": {"c": {$ne: 100}, }, "validationLevel": "off", "validationAction": "error", }, 1710);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "9", b: "axxxxxxxyz", c: {c: {b: {e: [BinData(0x01,'aGVsbG8='), {"str_a": "A0B", }, ]}}}}], "ordered": false, }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "0", f: "any thing", d: {a: {c: [4.940656484124654e-324, -Infinity, 0.0, ]}}}], "ordered": true, }, ], }, 1711);
cmdWrapper("db_1", {"drop": "three", }, 1712);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.three", "dropTarget": false, }, 1713);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1714);
cmdWrapper("db_1", {"collMod": "three", }, 1715);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "177240784134786", d: [], b: {"str_c": "￿f", }}], "ordered": true, }, 1716);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 24, }, 1717);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"f": 1, }, "name": "977001311029983", "background": false, "unique": true, "sparse": true, },{"key": {"str_b.0": -1, }, "name": "323394916917484", "unique": true, },{"key": {"e": "text", }, "name": "ix_a", "unique": false, },], }, 1718);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 7403899, }, 1719);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1720);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1721);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_0.two", }, 1722);
cmdWrapper("db_1", {"create": "two", "size": 816, "validator": {"f": {$ne: 100}, }, }, 1723);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "4", }, "limit": 1, }], }, ], }, 1724);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"_id": "text", "_id": -1, }, "name": "ix_eeeee", },], }, 1725);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.three", "dropTarget": true, }, 1726);
cmdWrapper("db_0", {"drop": "one", }, 1727);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 8207, }, 1728);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1729);
cmdWrapper("db_1", {"drop": "three", }, 1730);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.one", }, 1731);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"b": 1, }, "name": "978129761430707", "background": false, "unique": true, "collation": 883, },{"key": {"_id": 1, }, "name": "845439470175335", "background": false, "unique": true, },], }, 1732);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_ffffff", }, 1733);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1734);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"str_a.dec_a.10": -1, }, "name": "ix_dddd", "background": false, "sparse": true, "collation": {"locale": "sq", "strength": 1, }, },], }, 1735);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1736);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_dddd", }, 1737);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1738);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"str_e": 1, }, "name": "744827159366949", "sparse": false, "expireAfterSeconds": {"locale": "yo", "strength": 3, }, },{"key": {"date_c.dec_b.ts_e": 1, "ts_d": -1, "udf_f": 1, }, "name": "ix_a", "background": false, "sparse": true, "expireAfterSeconds": {"locale": "af", "strength": 1, }, },{"key": {"_id": "text", "b": -1, }, "name": "ix_ccc", "background": false, "sparse": false, "expireAfterSeconds": {"locale": "sq", "strength": 5, }, },], }, 1739);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"rgx_a.1.date_d": -1, "2": -1, "str_e.3.dec_e": -1, }, "name": "625577037326252", "background": true, "unique": false, },{"key": {"$**": "text", }, "name": "328073770002023", "background": false, },], }, 1740);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 1895011, }, 1741);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1742);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1743);
cmdWrapper("db_0", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "667877909807448", f: " ", f: {f: {e: [[BinData(0x00,'aGVsbG8='), BinData(0x01,'aGVsbG8='), BinData(0x04,'aGVsbG8='), ], {"str_b": "", }, [{"bin_a": BinData(0x00,'aGVsbG8='), }, ], ]}}}], "ordered": false, }, 1744);
cmdWrapper("db_0", {"create": "one", "capped": true, "size": 42, "validator": {"c": {$ne: 100}, }, "validationLevel": "off", "validationAction": "error", "flags": 3, }, 1745);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1746);
cmdWrapper("db_0", {"collMod": "one", "validator": {"c": {$ne: 100}, }, "validationLevel": "moderate", }, 1747);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "792411528134615", b: {a: []}, c: {"str_e": "axyz", }}], "ordered": true, }, 1748);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.one", }, 1749);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 282, }, 1750);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1751);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "1", }, "u": {a: [{"bin_b": BinData(0x02,'aGVsbG8='), }, {"bin_c": BinData(0x80,'aGVsbG8='), }, {"bin_e": BinData(0x05,'aGVsbG8='), }, ], a: " "}, }], }, {"insert": "one", "documents": [{"_id": "6", f: {c: "  "}, f: "caseLESS"}], "ordered": true, }, ], }, 1752);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1753);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 644, }, 1754);
cmdWrapper("db_1", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1755);
cmdWrapper("db_0", {"drop": "three", }, 1756);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "573836122162673", b: "", f: {f: {"bin_f": BinData(0x05,'aGVsbG8='), }}}], "ordered": false, }, 1757);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.three", "dropTarget": false, }, 1758);
cmdWrapper("db_1", {"drop": "one", }, 1759);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"b": "text", "b": -1, }, "name": "163007774930558", "background": false, "unique": false, "sparse": false, },{"key": {"_id": -1, "b": 1, }, "name": "337654135515327", "background": false, "unique": false, "sparse": false, },], }, 1760);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"_id": 1, }, "name": "316168730221172", "sparse": false, },], }, 1761);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"ts_b.date_e.str_c": 1, }, "name": "ix_ffffff", "unique": true, "sparse": false, },], }, 1762);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "*", }, 1763);
cmdWrapper("db_0", {"collMod": "two", "validator": {"e": {$ne: 100}, }, "validationLevel": "off", }, 1764);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_0", {"dropIndexes": "one", "index": "ix_bb", }, 1765);
cmdWrapper("db_0", {"insert": "three", "documents": [{"_id": "871417271869723", e: "x7F", f: [{"num_d": -314159265359, }, {"num_c": 314159265000, }, ]}], "ordered": false, }, 1766);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1767);
cmdWrapper("db_0", {"create": "one", "capped": true, "size": 14, "max": 899, "flags": 3, }, 1768);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"c": {$ne: 100}, }, "validationLevel": "off", "validationAction": "error", }, 1769);
cmdWrapper("db_1", {"collMod": "three", "validator": {"c": {$ne: 100}, }, "validationAction": "error", }, 1770);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "max": 78, "validator": {"b": {$ne: 100}, }, "validationLevel": "strict", "flags": 3, }, 1771);
cmdWrapper("db_1", {"drop": "three", }, 1772);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"b": -1, }, "name": "369745264746952", "collation": 24, },{"key": {"e": 1, }, "name": "512091777335687", "background": false, "sparse": true, "collation": 60, },], }, 1773);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "*", }, 1774);
cmdWrapper("db_0", {"create": "three", "capped": false, "max": 62, "validationAction": "warn", "flags": 3, }, 1775);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "*", }, 1776);
cmdWrapper("db_1", {"drop": "two", }, 1777);
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"rgx_e.udf_e.lon_b": 1, }, "name": "ix_a", "background": false, "unique": true, },], }, 1778);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1779);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1780);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1781);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 9, }, 1782);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "*", }, 1783);
cmdWrapper("db_0", {"create": "two", "size": 38, "max": 65, "validationLevel": "off", }, 1784);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.three", "dropTarget": true, }, 1785);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.three", "dropTarget": false, }, 1786);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.one", }, 1787);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_1.two", "dropTarget": true, }, 1788);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "193617924956816", b: [], f: "￿f"}], "ordered": true, }, 1789);
cmdWrapper("db_0", {"convertToCapped": "two", "size": 133, }, 1790);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1791);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1792);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "521988909018664", b: ["abc\def", [BinData(0x05,'aGVsbG8='), ], [{"bin_f": BinData(0x05,'aGVsbG8='), }, ], ], c: []}], "ordered": false, }, 1793);
cmdWrapper("db_0", {"drop": "one", }, 1794);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 684, }, 1795);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "ix_a", }, 1796);
cmdWrapper("db_1", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 60, }, 1797);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1798);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.one", "dropTarget": false, }, 1799);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.three", }, 1800);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"a": {$ne: 100}, }, "validationLevel": "off", "validationAction": "warn", }, 1801);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1802);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "ix_bb", }, 1803);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1804);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "370127944117616", e: "any thing", d: {d: {a: BinData(0x03,'aGVsbG8=')}}}], "ordered": true, }, 1805);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.one", }, 1806);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 19, }, 1807);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.three", }, 1808);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1809);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "044533984375690", e: [BinData(0x01,'aGVsbG8='), [0.0, -1, 10, ], -8, ], b: {e: [["an y thing", "x7F", "thing", ], ]}}], "ordered": true, }, 1810);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_1.one", "dropTarget": false, }, 1811);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [{"key": {"dec_a.date_a.num_f": -1, }, "name": "ix_ccc", "background": true, "sparse": true, },{"key": {"int_e.num_b": -1, }, "name": "733780053271276", "background": true, "sparse": true, "expireAfterSeconds": 624, },{"key": {"_id": 1, "_id": "hashed", }, "name": "579821784409723", "background": true, "unique": false, "expireAfterSeconds": {"locale": "fr", "strength": 5, }, },], }, 1812);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1813);
cmdWrapper("db_0", {"insert": "one", "documents": [{"_id": "328160159911371", b: "caseLESS", a: {a: "an y thing"}}], "ordered": false, }, 1814);
cmdWrapper("db_1", {"drop": "three", }, 1815);
cmdWrapper("db_0", {"drop": "two", }, 1816);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_eeeee", }, 1817);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.one", "dropTarget": true, }, 1818);
cmdWrapper("db_1", {"collMod": "one", "validator": {"a": {$ne: 100}, }, }, 1819);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.three", "dropTarget": true, }, 1820);
cmdWrapper("db_0", {"create": "two", "size": 91, "validator": {"c": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", "flags": 3, }, 1821);
cmdWrapper("db_0", {"create": "three", "size": 65, "max": 503, "validator": {"d": {$ne: 100}, }, "validationLevel": "off", }, 1822);
cmdWrapper("db_0", {"collMod": "two", "validator": {"a": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", }, 1823);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1824);
cmdWrapper("db_0", {"collMod": "two", "validator": {"b": {$ne: 100}, }, "validationAction": "error", }, 1825);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "*", }, 1826);
cmdWrapper("db_1", {"create": "three", "size": 624, }, 1827);
cmdWrapper("db_1", {"drop": "one", }, 1828);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1829);
cmdWrapper("db_0", {"collMod": "one", }, 1830);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1831);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "ix_dddd", }, 1832);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 89, }, 1833);
cmdWrapper("db_0", {"create": "two", "capped": true, "size": 28, "max": 454, "validationLevel": "strict", }, 1834);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1835);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 1836);
cmdWrapper("db_1", {"insert": "three", "documents": [{"_id": "462798233650025", f: {b: BinData(0x05,'aGVsbG8=')}, f: " a "}], "ordered": false, }, 1837);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "871282337470174", a: {b: " "}, c: {b: [[{"str_f": "axyz", }, ], ]}}], "ordered": false, }, 1838);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 1839);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.one", }, 1840);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "638620839109777", c: [[3.14159265359, 2.225073858072009e308, -1.0, ], [], [{"bin_e": BinData(0x00,'aGVsbG8='), }, {"bin_b": BinData(0x00,'aGVsbG8='), }, ], ], e: "  "}], "ordered": true, }, 1841);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 47353, }, 1842);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.one", }, 1843);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "three", "updates": [{"q": {"_id": "9", }, "u": {d: {d: {c: {"str_a": "x1B", }}}, b: {e: "caseLESS"}}, }], }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "5", b: {e: "  "}, d: "any thing"}], "ordered": false, }, {"update": "two", "updates": [{"q": {"_id": "0", }, "u": {e: [[{"bin_b": BinData(0x00,'aGVsbG8='), }, ], [BinData(0x80,'aGVsbG8='), BinData(0x03,'aGVsbG8='), ], [-0, 4.940656484124654e-324, ], ], f: {c: [["x7F", ], [{"num_e": 31.415, }, {"num_d": 0, }, ], ]}}, }], }, ], }, 1844);
cmdWrapper("db_1", {"collMod": "one", "validationLevel": "strict", "validationAction": "error", }, 1845);
cmdWrapper("db_1", {"dropIndexes": "two", "index": "ix_dddd", }, 1846);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1847);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 36, "validator": {"e": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", }, 1848);
cmdWrapper("db_0", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"ts_b.nul_b.num_e": -1, }, "name": "930082056351326", "background": true, "sparse": true, "collation": 67, },], }, 1849);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"update": "three", "updates": [{"q": {"_id": "4", }, "u": {c: {d: "x7F"}, b: {"num_e": 1.0, }}, }], }, ], }, 1850);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"10": 1, }, "name": "580203250591641", "background": false, "unique": true, "sparse": false, },], }, 1851);
cmdWrapper("admin", {"renameCollection": "db_1.three", "to": "db_1.two", "dropTarget": true, }, 1852);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, {"insert": "one", "documents": [{"_id": "2", f: {b: ["axxxxxxxyz", "anything", "axxxxxxxyz", ]}, c: [-Infinity, BinData(0x05,'aGVsbG8='), ]}], "ordered": false, }, ], }, 1853);
cmdWrapper("db_1", {"create": "one", "size": 215, "max": 76, "validator": {"e": {$ne: 100}, }, "flags": 3, }, 1854);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_0.one", }, 1855);
cmdWrapper("admin", {"renameCollection": "db_0.three", "to": "db_0.two", "dropTarget": true, }, 1856);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"f": {$ne: 100}, }, "validationAction": "error", }, 1857);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1858);
cmdWrapper("db_0", {"convertToCapped": "three", "size": 8427, }, 1859);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "off", "validationAction": "error", }, 1860);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "ix_ccc", }, 1861);
cmdWrapper("db_1", {"create": "two", "capped": true, "max": 659, "validationLevel": "moderate", }, 1862);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.one", }, 1863);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1864);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "off", }, 1865);
cmdWrapper("db_0", {"collMod": "one", "validationLevel": "strict", "validationAction": "error", }, 1866);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"_id": "text", "_id": "hashed", }, "name": "430560665067813", "background": true, "sparse": false, "expireAfterSeconds": {"locale": "bs", "strength": 1, }, },{"key": {"date_e.str_d.2": -1, }, "name": "250571256500270", "unique": true, "sparse": false, },], }, 1867);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "796820074032049", a: [], e: {a: "any thing"}}], "ordered": true, }, 1868);
cmdWrapper("db_0", {"drop": "one", }, 1869);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"_id": 1, }, "name": "560792912730520", },{"key": {"_id": "hashed", }, "name": "555279660801183", "background": false, "sparse": false, },{"key": {"dec_f.lon_b": 1, }, "name": "ix_ccc", "expireAfterSeconds": 299, },], }, 1870);
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
cmdWrapper("db_0", {"dropIndexes": "three", "index": "*", }, 1871);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1872);
cmdWrapper("db_1", {"drop": "three", }, 1873);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_a", }, 1874);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1875);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"d": {$ne: 100}, }, "validationLevel": "strict", "validationAction": "warn", }, 1876);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "ix_bb", }, 1877);
cmdWrapper("db_0", {"drop": "two", }, 1878);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_0.three", "dropTarget": true, }, 1879);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "094133414378167", d: {c: [BinData(0x01,'aGVsbG8='), 3.14159265359, {"bin_d": BinData(0x01,'aGVsbG8='), }, ]}, e: "￿f"}], "ordered": true, }, 1880);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1881);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1882);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 1883);
cmdWrapper("db_1", {"drop": "two", }, 1884);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"delete": "two", "deletes": [{"q": {"_id": "6", }, "limit": 1, }], }, ], }, 1885);
cmdWrapper("db_1", {"collMod": "two", }, 1886);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"dec_d.lon_a.1": -1, }, "name": "701021092817582", "background": true, "unique": true, },{"key": {"int_b.udf_f.3": -1, }, "name": "889475833196335", "collation": {"locale": "am", "strength": 3, }, },{"key": {"$**": "text", }, "name": "ix_ccc", "collation": 92, },{"key": {"ts_e.num_c": "hashed", }, "name": "311879292846279", "background": false, "collation": 2571, },], }, 1887);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1888);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1889);
cmdWrapper("db_1", {"drop": "three", }, 1890);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1891);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [], }, 1892);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"c": {$ne: 100}, }, "validationLevel": "moderate", }, 1893);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "211817157302730", a: {a: {b: "x1B"}}, c: {e: [314.15, 4.940656484124654e-324, -Infinity, ]}}], "ordered": true, }, 1894);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "two", "updates": [{"q": {"_id": "1", }, "u": {a: {c: "x7F"}, a: [314.15, "", BinData(0x03,'aGVsbG8='), ]}, }], }, {"delete": "one", "deletes": [{"q": {"_id": "1", }, "limit": 1, }], }, ], }, 1895);
cmdWrapper("db_0", {"convertToCapped": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "size": 63, }, 1896);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "*", }, 1897);
cmdWrapper("db_1", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1898);
cmdWrapper("db_1", {"create": "three", "capped": true, "max": 54, "validator": {"f": {$ne: 100}, }, "validationAction": "warn", }, 1899);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1900);
cmdWrapper("db_0", {"dropIndexes": "three", "index": "ix_a", }, 1901);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "1", d: "CASELESS", b: [[BinData(0x03,'aGVsbG8='), BinData(0x01,'aGVsbG8='), BinData(0x01,'aGVsbG8='), ], ]}], "ordered": false, }, {"insert": "one", "documents": [{"_id": "3", d: {d: "x7F"}, d: [1.0, [-8, 0, ], -3.14159265859, ]}], "ordered": false, }, ], }, 1902);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "334450748364199", a: {b: -314159265359}, d: [[BinData(0x01,'aGVsbG8='), ], ]}], "ordered": false, }, 1903);
cmdWrapper("db_0", {"collMod": "two", "validator": {"b": {$ne: 100}, }, }, 1904);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"c": "text", "_id": "hashed", }, "name": "ix_a", "background": true, "unique": true, "sparse": false, "collation": {"locale": "es", "strength": 1, }, },], }, 1905);
cmdWrapper("db_1", {"collMod": "three", "validator": {"f": {$ne: 100}, }, }, 1906);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1907);
cmdWrapper("db_0", {"create": "three", "capped": true, "max": 87, "validationAction": "error", }, 1908);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.two", }, 1909);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"c": {$ne: 100}, }, "validationAction": "warn", }, 1910);
cmdWrapper("db_0", {"collMod": "two", "validator": {"f": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "error", }, 1911);
cmdWrapper("db_1", {"collMod": "three", "validationLevel": "off", "validationAction": "warn", }, 1912);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"dec_d.$.str_f": -1, }, "name": "464539566766829", "background": false, "expireAfterSeconds": 191, },{"key": {"f": "hashed", "b": "text", }, "name": "ix_bb", "background": false, "sparse": false, "expireAfterSeconds": {"locale": "es", "strength": 4, }, },], }, 1913);
cmdWrapper("db_0", {"create": "two", "capped": false, "size": 3173, "validationAction": "warn", "flags": 3, }, 1914);
cmdWrapper("db_1", {"createIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "indexes": [{"key": {"date_d.int_c.int_e": 1, "dec_c.int_b": 1, "3": -1, }, "name": "ix_bb", "background": false, },{"key": {"str_b.3.oid_e": -1, "rgx_c.3": 1, "date_d.int_f": -1, }, "name": "517213260058310", "background": false, "unique": false, "sparse": true, "expireAfterSeconds": {"locale": "fr", "strength": 4, }, },], }, 1915);
cmdWrapper("db_0", {"createIndexes": "two", "indexes": [{"key": {"c": "text", "_id": 1, }, "name": "ix_dddd", "sparse": false, },{"key": {"0": 1, }, "name": "ix_ccc", "background": false, },{"key": {"_id": -1, "_id": "hashed", }, "name": "ix_a", "unique": false, "collation": {"locale": "am", "strength": 2, }, },{"key": {"_id": "hashed", "_id": -1, }, "name": "ix_ccc", "background": true, "expireAfterSeconds": 13, },], }, 1916);
cmdWrapper("db_1", {"create": "three", "size": 80, "validationLevel": "off", "flags": 3, }, 1917);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 1918);
cmdWrapper("db_1", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "size": 16, "validationLevel": "moderate", "validationAction": "error", "flags": 3, }, 1919);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 6055, }, 1920);
cmdWrapper("db_0", {"collMod": "one", "validationLevel": "strict", }, 1921);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "265361092760301", b: "caselesS", d: [{"num_f": 2.225073858072009e308, }, {"num_c": 1.7976931348623157e308, }, {"num_e": 4.940656484124654e-324, }, ]}], "ordered": false, }, 1922);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"insert": "three", "documents": [{"_id": "4", e: "anything", c: [BinData(0x04,'aGVsbG8='), ]}], "ordered": false, }, {"update": "three", "updates": [{"q": {"_id": "1", }, "u": {d: " a ", e: [[{"num_e": 0, }, {"num_c": 1, }, {"num_f": -1.0, }, ], ]}, }], }, ], }, 1923);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "one", "updates": [{"q": {"_id": "8", }, "u": {c: [{"num_b": 0, }, ], e: "any thing"}, }], }, {"update": "two", "updates": [{"q": {"_id": "7", }, "u": {c: -3.14159265000, c: ""}, }], }, {"delete": "three", "deletes": [{"q": {"_id": "4", }, "limit": 1, }], }, ], }, 1924);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1925);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_dddd", }, 1926);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": "text", "f": "text", }, "name": "ix_ffffff", },{"key": {"_id": "text", "_id": 1, }, "name": "ix_bb", },{"key": {"lon_b.num_c": -1, }, "name": "ix_eeeee", "sparse": true, "expireAfterSeconds": 52, },{"key": {"_id": 1, "f": "text", }, "name": "ix_dddd", "background": true, "unique": true, },], }, 1927);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 17, }, 1928);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "704540342334380", f: "bcxyz", d: "caseLESS"}], "ordered": false, }, 1929);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_1.one", }, 1930);
rollbackTest.transitionToRollbackOperations();
cmdWrapper("db_0", {"create": "one", "max": 71, "validator": {"b": {$ne: 100}, }, "validationAction": "error", }, 1931);
cmdWrapper("db_0", {"drop": "one", }, 1932);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1933);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1934);
cmdWrapper("admin", {"renameCollection": "db_1.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_1.one", }, 1935);
cmdWrapper("db_1", {"dropIndexes": "one", "index": "ix_ccc", }, 1936);
cmdWrapper("db_0", {"collMod": "one", "validator": {"a": {$ne: 100}, }, "validationAction": "warn", }, 1937);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 33, }, 1938);
cmdWrapper("db_0", {"drop": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1939);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1940);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1941);
rollbackTest.transitionToSyncSourceOperationsBeforeRollback();
cmdWrapper("db_1", {"createIndexes": "two", "indexes": [{"key": {"d": 1, }, "name": "ix_dddd", "background": true, "unique": false, "sparse": false, },{"key": {"num_c.int_d.rgx_d": -1, "date_d.2.date_d": -1, "rgx_d.date_c.lon_b": 1, }, "name": "ix_ccc", "sparse": true, "expireAfterSeconds": {"locale": "sq", "strength": 4, }, },], }, 1942);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_ccc", }, 1943);
cmdWrapper("db_0", {"convertToCapped": "one", "size": 42, }, 1944);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"e": 1, }, "name": "706384943687079", "unique": true, "sparse": false, },{"key": {"10.num_a": -1, }, "name": "ix_a", "unique": false, },{"key": {"1": "text", }, "name": "043903324378968", "collation": 234616, },], }, 1945);
cmdWrapper("admin", {"renameCollection": "db_1.two", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": false, }, 1946);
cmdWrapper("db_0", {"createIndexes": "one", "indexes": [], }, 1947);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"b": {$ne: 100}, }, "validationLevel": "moderate", }, 1948);
cmdWrapper("db_0", {"drop": "one", }, 1949);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1950);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_ffffff", }, 1951);
cmdWrapper("db_1", {"dropIndexes": "three", "index": "ix_ffffff", }, 1952);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1953);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"update": "three", "updates": [{"q": {"_id": "3", }, "u": {a: 2.225073858072014e-308, e: [[{"str_e": "any thing", }, {"str_a": "￿f", }, {"str_e": "an y thing", }, ], ]}, }], }, {"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, {"update": "two", "updates": [{"q": {"_id": "7", }, "u": {e: "axxxxxxxyz", e: BinData(0x05,'aGVsbG8=')}, }], }, ], }, 1954);
cmdWrapper("db_0", {"create": "three", "validator": {"f": {$ne: 100}, }, "flags": 3, }, 1955);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [{"insert": "two", "documents": [{"_id": "8", a: {a: [{"num_a": 1.7976931348623157e308, }, ]}, c: {e: [[-314159265359, 4.940656484124654e-324, 3.14159265359, ], ]}}], "ordered": false, }, {"delete": "two", "deletes": [{"q": {"_id": "5", }, "limit": 1, }], }, ], }, 1956);
cmdWrapper("db_1", {"drop": "three", }, 1957);
cmdWrapper("db_1", {"drop": "three", }, 1958);
cmdWrapper("db_1", {"convertToCapped": "three", "size": 718, }, 1959);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "dropTarget": true, }, 1960);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_a", }, 1961);
cmdWrapper("db_1", {"insert": "one", "documents": [{"_id": "852203673677069", b: "any thing", c: [BinData(0x80,'aGVsbG8='), ]}], "ordered": true, }, 1962);
cmdWrapper("db_1", {"createIndexes": "three", "indexes": [{"key": {"c": -1, }, "name": "202310643638789", "sparse": false, },], }, 1963);
cmdWrapper("db_0", {"dropIndexes": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "index": "*", }, 1964);
cmdWrapper("admin", {"renameCollection": "db_0.two", "to": "db_0.one", }, 1965);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 268, }, 1966);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 9, }, 1967);
cmdWrapper("db_1", {"convertToCapped": "one", "size": 123890, }, 1968);
cmdWrapper("db_0", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationAction": "error", }, 1969);
cmdWrapper("db_0", {"drop": "one", }, 1970);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 0, "signal": 15, }, 1971);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "ix_bb", }, 1972);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "capped": false, "size": 2803, "validationLevel": "off", "validationAction": "error", }, 1973);
cmdWrapper("db_1", {"createIndexes": "one", "indexes": [{"key": {"_id": "hashed", }, "name": "593431433381832", "background": true, "unique": false, },{"key": {"date_d.ts_d.rgx_d": -1, }, "name": "059425908869942", "sparse": true, "expireAfterSeconds": {"locale": "hu", "strength": 3, }, },{"key": {"10": -1, "date_c.str_b": 1, "str_e.rgx_d.3": -1, }, "name": "994524555486078", "sparse": false, },], }, 1974);
cmdWrapper("db_1", {"drop": "three", }, 1975);
cmdWrapper("runTransaction",{"db": "db_0", "ops": [], }, 1976);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "114107482956139", c: [10, ], b: [BinData(0x05,'aGVsbG8='), ]}], "ordered": false, }, 1977);
cmdWrapper("db_0", {"insert": "two", "documents": [{"_id": "911971967236763", f: [{"str_a": "x7F", }, [{"str_a": "axxxxxxxyz", }, ], "anything", ], b: [BinData(0x03,'aGVsbG8='), [{"num_a": 0, }, ], [{"num_b": 314.15, }, {"num_c": +0, }, {"num_c": -314159265359, }, ], ]}], "ordered": true, }, 1978);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 9, }, 1979);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"e": {$ne: 100}, }, "validationLevel": "strict", }, 1980);
cmdWrapper("db_0", {"createIndexes": "three", "indexes": [{"key": {"bool_e.2.num_f": -1, }, "name": "589695033940492", "unique": true, "expireAfterSeconds": {"locale": "fr", "strength": 2, }, },], }, 1981);
cmdWrapper("db_0", {"dropIndexes": "one", "index": "*", }, 1982);
cmdWrapper("db_0", {"create": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validator": {"c": {$ne: 100}, }, }, 1983);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_1.three", "dropTarget": false, }, 1984);
cmdWrapper("admin", {"renameCollection": "db_0.one", "to": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", }, 1985);
cmdWrapper("db_1", {"collMod": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "validationLevel": "moderate", "validationAction": "error", }, 1986);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 1, "signal": 15, }, 1987);
cmdWrapper("db_1", {"insert": "two", "documents": [{"_id": "300396496836444", c: {d: {a: "anything"}}, a: ""}], "ordered": true, }, 1988);
cmdWrapper("admin", {"renameCollection": "db_1.one", "to": "db_0.one", "dropTarget": true, }, 1989);
cmdWrapper("db_0", {"dropIndexes": "two", "index": "*", }, 1990);
cmdWrapper("db_1", {"create": "three", "validator": {"b": {$ne: 100}, }, "validationLevel": "off", "flags": 3, }, 1991);
cmdWrapper("db_1", {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "732415996662326", a: "bcxyz", d: "bcxyz"}], "ordered": true, }, 1992);
cmdWrapper("db_1", {"create": "one", "capped": false, "size": 68, "validator": {"c": {$ne: 100}, }, "flags": 3, }, 1993);
cmdWrapper("db_0", {"collMod": "two", "validator": {"b": {$ne: 100}, }, "validationLevel": "moderate", "validationAction": "error", }, 1994);
cmdWrapper("db_1", {"convertToCapped": "two", "size": 21, }, 1995);
cmdWrapper("db_0", {"collMod": "three", "validationLevel": "moderate", }, 1996);
cmdWrapper("runTransaction",{"db": "db_1", "ops": [{"delete": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "deletes": [{"q": {"_id": "0", }, "limit": 1, }], }, {"insert": "verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "documents": [{"_id": "8", d: [{"bin_d": BinData(0x04,'aGVsbG8='), }, BinData(0x05,'aGVsbG8='), ], a: [{"str_c": "axyz", }, ["thing", "an y thing", ], -8, ]}], "ordered": false, }, ], }, 1997);
cmdWrapper("$fixtureCmd",{"fixtureCmd": "restartNode", "nodeId": 2, "signal": 15, }, 1998);
cmdWrapper("admin", {"renameCollection": "db_0.verylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnamespaceverylongnam", "to": "db_0.one", "dropTarget": false, }, 1999);
rollbackTest.transitionToSyncSourceOperationsDuringRollback();
rollbackTest.transitionToSteadyStateOperations({waitForRollback: false});
/* eslint-enable */
/* eslint no-undef: 0 */
/* eslint strict: 0 */
/* eslint no-implicit-globals: 0 */

runningFuzzerCommands = false;

(() => {
    if (applyOpsDict) {
        print('Printing the list of applyOps commands. Please copy and paste this dictionary' +
              'the code `const applyOpsDict = ` for a more reliable repro.');
        printjsononeline(applyOpsDict);
    }

    const allCommandCount = skippedCommandCount + failedCommandCount + successfulCommandCount;

    print('[summary] Percentage of skipped commands: ' +
          skippedCommandCount / allCommandCount);

    print('[summary] Percentage of failed commands: ' +
          failedCommandCount / allCommandCount);
})();

(() => {
    rollbackTest.stop();
})();
